{"version":3,"sources":["../../../../src/components/hris/SurfaceCard.jsx","../../../../src/components/hris/UserManagementPanel.jsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\n\nexport default function SurfaceCard({ title, subtitle, className, children, action }) {\n  return (\n    <section\n      className={cn(\n        \"rounded-2xl border border-slate-200 bg-white p-5 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)]\",\n        className,\n      )}\n    >\n      {(title || subtitle || action) && (\n        <header className=\"mb-4 flex items-start justify-between gap-3\">\n          <div className=\"space-y-1\">\n            {title && <h2 className=\"text-base font-semibold text-slate-900\">{title}</h2>}\n            {subtitle && <p className=\"text-sm text-slate-600\">{subtitle}</p>}\n          </div>\n          {action}\n        </header>\n      )}\n      {children}\n    </section>\n  );\n}\n","\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\nimport { ROLES } from \"@/features/hris/constants\";\n\nconst EMPLOYEE_ACCOUNT_ROLE_ID = \"EMPLOYEE_L1\";\nconst EMPLOYEE_ROLE_IDS = new Set([\"EMPLOYEE\", \"EMPLOYEE_L1\", \"EMPLOYEE_L2\", \"EMPLOYEE_L3\"]);\nconst BASE_INVITE_ROLE_IDS = new Set([\"SUPER_ADMIN\", \"GRC\", \"HR\", \"EA\", EMPLOYEE_ACCOUNT_ROLE_ID]);\nconst ROLE_LABEL_BY_ID = new Map(ROLES.map((role) => [role.id, role.label]));\n\nfunction normalizeAccountRoleId(roleId) {\n  const normalized = String(roleId || \"\").trim().toUpperCase();\n  if (EMPLOYEE_ROLE_IDS.has(normalized)) {\n    return EMPLOYEE_ACCOUNT_ROLE_ID;\n  }\n  return normalized;\n}\n\nconst ACCOUNT_ROLE_OPTIONS = (() => {\n  const deduped = new Map();\n  for (const role of ROLES) {\n    const normalizedRole = normalizeAccountRoleId(role.id);\n    if (!BASE_INVITE_ROLE_IDS.has(normalizedRole) || deduped.has(normalizedRole)) {\n      continue;\n    }\n    deduped.set(normalizedRole, {\n      id: normalizedRole,\n      label: normalizedRole === EMPLOYEE_ACCOUNT_ROLE_ID ? \"Employee\" : role.label,\n    });\n  }\n  return Array.from(deduped.values());\n})();\n\nconst initialInviteForm = {\n  email: \"\",\n  role: \"HR\",\n};\n\nfunction formatDate(value) {\n  if (!value) {\n    return \"-\";\n  }\n\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) {\n    return \"-\";\n  }\n\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: \"short\",\n    day: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  }).format(date);\n}\n\nfunction statusBadgeClass(status) {\n  if (status === \"active\") {\n    return \"bg-emerald-100 text-emerald-700\";\n  }\n  if (status === \"disabled\") {\n    return \"bg-rose-100 text-rose-700\";\n  }\n  return \"bg-amber-100 text-amber-700\";\n}\n\nfunction getRowActionLabel(status) {\n  if (status === \"active\") {\n    return \"Disable\";\n  }\n  return \"Open account\";\n}\n\nfunction getNextStatus(status) {\n  if (status === \"active\") {\n    return \"disabled\";\n  }\n  return \"active\";\n}\n\nfunction formatRoleLabel(roleId) {\n  const normalized = normalizeAccountRoleId(roleId);\n  if (normalized === EMPLOYEE_ACCOUNT_ROLE_ID) {\n    return \"Employee\";\n  }\n  return ROLE_LABEL_BY_ID.get(normalized) || roleId;\n}\n\nexport default function UserManagementPanel() {\n  const [users, setUsers] = useState([]);\n  const [roleDraftByUserId, setRoleDraftByUserId] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isUpdatingId, setIsUpdatingId] = useState(\"\");\n  const [isUpdatingRoleId, setIsUpdatingRoleId] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [invitePreview, setInvitePreview] = useState(null);\n  const [inviteForm, setInviteForm] = useState(initialInviteForm);\n\n  const loadUsers = useCallback(async () => {\n    setErrorMessage(\"\");\n    try {\n      const response = await fetch(\"/api/admin/users\", { method: \"GET\" });\n      if (!response.ok) {\n        const payload = await response.json().catch(() => ({}));\n        throw new Error(payload.message || \"Unable to load user directory.\");\n      }\n\n      const payload = await response.json();\n      const nextUsers = Array.isArray(payload.users) ? payload.users : [];\n      setUsers(nextUsers);\n      setRoleDraftByUserId(\n        nextUsers.reduce((accumulator, user) => {\n          accumulator[user.id] = normalizeAccountRoleId(user.role);\n          return accumulator;\n        }, {}),\n      );\n    } catch (error) {\n      setErrorMessage(error.message || \"Unable to load user directory.\");\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadUsers();\n  }, [loadUsers]);\n\n  const handleInviteField = (field) => (event) => {\n    setInviteForm((current) => ({\n      ...current,\n      [field]: event.target.value,\n    }));\n  };\n\n  const handleInviteSubmit = async (event) => {\n    event.preventDefault();\n    setIsSubmitting(true);\n    setErrorMessage(\"\");\n    setSuccessMessage(\"\");\n    setInvitePreview(null);\n\n    try {\n      const response = await fetch(\"/api/admin/users\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(inviteForm),\n      });\n\n      if (!response.ok) {\n        const payload = await response.json().catch(() => ({}));\n        throw new Error(payload.message || \"Unable to send invitation.\");\n      }\n\n      const payload = await response.json();\n      const deliveryStatus = typeof payload?.delivery?.status === \"string\" ? payload.delivery.status : \"\";\n      const warning = typeof payload?.warning === \"string\" ? payload.warning : \"\";\n      if (deliveryStatus === \"failed\") {\n        setSuccessMessage(\n          warning || `Invite created for ${payload.user.email}. Email delivery failed.`,\n        );\n      } else {\n        setSuccessMessage(`Invitation email with verification link sent to ${payload.user.email}.`);\n      }\n      setInvitePreview(payload.invite || null);\n      setInviteForm(initialInviteForm);\n      await loadUsers();\n    } catch (error) {\n      setErrorMessage(error.message || \"Unable to send invitation.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleStatusToggle = async (user) => {\n    setIsUpdatingId(user.id);\n    setErrorMessage(\"\");\n    setSuccessMessage(\"\");\n\n    try {\n      const response = await fetch(`/api/admin/users/${encodeURIComponent(user.id)}/status`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          status: getNextStatus(user.status),\n        }),\n      });\n\n      if (!response.ok) {\n        const payload = await response.json().catch(() => ({}));\n        throw new Error(payload.message || \"Unable to update account status.\");\n      }\n\n      const payload = await response.json();\n      setUsers((current) =>\n        current.map((item) => (item.id === payload.user.id ? payload.user : item)),\n      );\n      setSuccessMessage(`Account status updated: ${payload.user.email} is ${payload.user.status}.`);\n    } catch (error) {\n      setErrorMessage(error.message || \"Unable to update account status.\");\n    } finally {\n      setIsUpdatingId(\"\");\n    }\n  };\n\n  const handleRoleDraftChange = (userId) => (event) => {\n    const nextRole = normalizeAccountRoleId(event.target.value);\n    setRoleDraftByUserId((current) => ({\n      ...current,\n      [userId]: nextRole,\n    }));\n  };\n\n  const handleRoleChange = async (user) => {\n    const requestedRole = normalizeAccountRoleId(roleDraftByUserId[user.id] || user.role);\n    const currentRole = normalizeAccountRoleId(user.role);\n    if (!requestedRole || requestedRole === currentRole) {\n      return;\n    }\n\n    setIsUpdatingRoleId(user.id);\n    setErrorMessage(\"\");\n    setSuccessMessage(\"\");\n\n    try {\n      const response = await fetch(`/api/admin/users/${encodeURIComponent(user.id)}/role`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          role: requestedRole,\n        }),\n      });\n\n      if (!response.ok) {\n        const payload = await response.json().catch(() => ({}));\n        throw new Error(payload.message || \"Unable to update user role.\");\n      }\n\n      const payload = await response.json();\n      setUsers((current) =>\n        current.map((item) => (item.id === payload.user.id ? payload.user : item)),\n      );\n      setRoleDraftByUserId((current) => ({\n        ...current,\n        [payload.user.id]: normalizeAccountRoleId(payload.user.role),\n      }));\n      setSuccessMessage(`Role updated: ${payload.user.email} is now ${formatRoleLabel(payload.user.role)}.`);\n    } catch (error) {\n      setErrorMessage(error.message || \"Unable to update user role.\");\n    } finally {\n      setIsUpdatingRoleId(\"\");\n    }\n  };\n\n  const orderedUsers = useMemo(\n    () =>\n      [...users].sort(\n        (a, b) => new Date(b.updatedAt || b.invitedAt).getTime() - new Date(a.updatedAt || a.invitedAt).getTime(),\n      ),\n    [users],\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      <SurfaceCard\n        title=\"Invite User\"\n        subtitle=\"No sign-up form. Invited users must verify email from the invite link before Google sign-in.\"\n      >\n        <form className=\"grid gap-3 sm:grid-cols-[minmax(0,1fr)_180px_auto]\" onSubmit={handleInviteSubmit}>\n          <label className=\"space-y-1\">\n            <span className=\"text-xs font-medium uppercase tracking-[0.08em] text-slate-600\">Work Email</span>\n            <input\n              type=\"email\"\n              required\n              value={inviteForm.email}\n              onChange={handleInviteField(\"email\")}\n              placeholder=\"employee@gmail.com\"\n              className=\"h-10 w-full rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-sky-400 focus:outline-none\"\n            />\n          </label>\n\n          <label className=\"space-y-1\">\n            <span className=\"text-xs font-medium uppercase tracking-[0.08em] text-slate-600\">Role</span>\n            <select\n              value={inviteForm.role}\n              onChange={handleInviteField(\"role\")}\n              className=\"h-10 w-full rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\n            >\n              {ACCOUNT_ROLE_OPTIONS.map((role) => (\n                <option key={role.id} value={role.id}>\n                  {role.label}\n                </option>\n              ))}\n            </select>\n          </label>\n\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"mt-6 inline-flex h-10 items-center justify-center rounded-lg bg-sky-600 px-4 text-sm font-semibold text-white transition hover:bg-sky-700 disabled:cursor-not-allowed disabled:opacity-70\"\n          >\n            {isSubmitting ? \"Sending...\" : \"Send invite\"}\n          </button>\n        </form>\n\n        {invitePreview ? (\n          <div className=\"mt-4 rounded-xl border border-sky-200 bg-sky-50 px-4 py-3 text-xs text-sky-800\">\n            <p className=\"font-semibold\">Invite recorded</p>\n            <p className=\"mt-1\">Invite ID: {invitePreview.id || \"-\"}</p>\n            <p className=\"mt-1\">Expires: {formatDate(invitePreview.expiresAt)}</p>\n          </div>\n        ) : null}\n\n        {errorMessage ? (\n          <p className=\"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700\">\n            {errorMessage}\n          </p>\n        ) : null}\n\n        {successMessage ? (\n          <p className=\"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700\">\n            {successMessage}\n          </p>\n        ) : null}\n      </SurfaceCard>\n\n      <SurfaceCard\n        title=\"User Directory\"\n        subtitle=\"Review account states and manage access by role.\"\n      >\n        {isLoading ? (\n          <p className=\"text-sm text-slate-600\">Loading user accounts...</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full text-left text-sm\">\n              <thead>\n                <tr className=\"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500\">\n                  <th className=\"px-2 py-3 font-medium\">Email</th>\n                  <th className=\"px-2 py-3 font-medium\">Role</th>\n                  <th className=\"px-2 py-3 font-medium\">Status</th>\n                  <th className=\"px-2 py-3 font-medium\">Invited</th>\n                  <th className=\"px-2 py-3 font-medium\">Last Login</th>\n                  <th className=\"px-2 py-3 font-medium\">Change Role</th>\n                  <th className=\"px-2 py-3 font-medium text-right\">Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {orderedUsers.map((user) => (\n                  <tr key={user.id} className=\"border-b border-slate-100 text-slate-700 last:border-b-0\">\n                    <td className=\"px-2 py-3\">\n                      <p className=\"font-medium text-slate-900\">{user.email}</p>\n                      <p className=\"text-xs text-slate-500\">By: {user.invitedBy}</p>\n                    </td>\n                    <td className=\"px-2 py-3\">{formatRoleLabel(user.role)}</td>\n                    <td className=\"px-2 py-3\">\n                      <span className={`rounded-md px-2 py-1 text-xs font-semibold ${statusBadgeClass(user.status)}`}>\n                        {user.status}\n                      </span>\n                    </td>\n                    <td className=\"px-2 py-3 text-xs text-slate-600\">{formatDate(user.invitedAt)}</td>\n                    <td className=\"px-2 py-3 text-xs text-slate-600\">{formatDate(user.lastLoginAt)}</td>\n                    <td className=\"px-2 py-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <select\n                          value={normalizeAccountRoleId(roleDraftByUserId[user.id] || user.role)}\n                          onChange={handleRoleDraftChange(user.id)}\n                          disabled={isUpdatingRoleId === user.id}\n                          className=\"h-8 min-w-[132px] rounded-lg border border-slate-300 bg-white px-2 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:opacity-70\"\n                        >\n                          {ACCOUNT_ROLE_OPTIONS.map((role) => (\n                            <option key={role.id} value={role.id}>\n                              {role.label}\n                            </option>\n                          ))}\n                        </select>\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRoleChange(user)}\n                          disabled={\n                            isUpdatingRoleId === user.id ||\n                            !roleDraftByUserId[user.id] ||\n                            normalizeAccountRoleId(roleDraftByUserId[user.id]) === normalizeAccountRoleId(user.role)\n                          }\n                          className=\"rounded-lg border border-sky-300 bg-sky-50 px-2.5 py-1.5 text-xs font-medium text-sky-700 transition hover:bg-sky-100 disabled:cursor-not-allowed disabled:opacity-70\"\n                        >\n                          {isUpdatingRoleId === user.id ? \"Saving...\" : \"Change Role\"}\n                        </button>\n                      </div>\n                    </td>\n                    <td className=\"px-2 py-3 text-right\">\n                      <button\n                        type=\"button\"\n                        onClick={() => handleStatusToggle(user)}\n                        disabled={isUpdatingId === user.id || isUpdatingRoleId === user.id}\n                        className=\"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-70\"\n                      >\n                        {isUpdatingId === user.id ? \"Updating...\" : getRowActionLabel(user.status)}\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </SurfaceCard>\n    </div>\n  );\n}\n\r\n"],"names":[],"mappings":"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"}