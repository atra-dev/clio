module.exports=[44801,e=>{"use strict";function t(e){return String(e??"").trim()}function r(e,{fallbackLabel:i="User",maxTokens:n=3}={}){let o=t(e).toLowerCase(),s=t(i)||"User";if(!o.includes("@"))return s;let a=(o.split("@")[0]||"").split(/[._-]+/g).map(e=>{let r;return(r=t(e).toLowerCase())?`${r.charAt(0).toUpperCase()}${r.slice(1)}`:""}).filter(Boolean).slice(0,Math.max(1,Number.isFinite(n)?n:3));return 0===a.length?s:a.join(" ")}function i({firstName:e,middleName:r,lastName:i,order:n}){let o=t(e),s=t(r),a=t(i);if("last-first"===n){let e=[o,s].filter(Boolean).join(" ");return a?`${a}${e?`, ${e}`:""}`:e}return[o,s,a].filter(Boolean).join(" ")}function n({fallback:e,fallbackEmail:i,fallbackLabel:n}){let o=t(e);if(o)return o;let s=t(i);return s?r(s,{fallbackLabel:n}):t(n)||"User"}function o({firstName:e,middleName:r,lastName:s,suffix:a,fallback:l="",fallbackEmail:c="",fallbackLabel:u="User"}={}){let d=[i({firstName:e,middleName:r,lastName:s,order:"first-last"}),t(a)].filter(Boolean).join(" ").trim();return d||n({fallback:l,fallbackEmail:c,fallbackLabel:u})}function s({firstName:e,middleName:r,lastName:o,suffix:a,fallback:l="",fallbackEmail:c="",fallbackLabel:u="Employee"}={}){let d=[i({firstName:e,middleName:r,lastName:o,order:"last-first"}),t(a)].filter(Boolean).join(" ").trim();return d||n({fallback:l,fallbackEmail:c,fallbackLabel:u})}e.s(["formatEmployeeName",()=>s,"formatNameFromEmail",()=>r,"formatPersonName",()=>o])},35110,e=>{"use strict";function t(){let e=String(process.env.CLIO_APP_BASE_URL||"").trim();return e?e.replace(/\/+$/,""):"http://localhost:3000"}async function r({toEmail:e,verifyUrl:t}){let r=String("AIzaSyC-mWz29cK_wjvDsjhgbwYLAuJeygPohOI").trim();if(!r)throw Error("firebase_api_key_not_configured");let i=await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestType:"EMAIL_SIGNIN",email:e,continueUrl:t,canHandleCodeInApp:!0})}),n=await i.json().catch(()=>({}));if(!i.ok){let e;throw Error((e=String(n?.error?.message||"").trim())?"OPERATION_NOT_ALLOWED"===e?"firebase_email_provider_not_enabled":"MISSING_CONTINUE_URI"===e||"INVALID_CONTINUE_URI"===e?"firebase_continue_url_invalid":"INVALID_EMAIL"===e?"invalid_email":"PROJECT_NOT_FOUND"===e||"API_KEY_INVALID"===e?"firebase_api_key_not_configured":"email_delivery_failed":"email_delivery_failed")}return{provider:"firebase",status:"sent",messageId:`firebase-${Date.now()}`}}async function i({toEmail:e,subject:t,html:r,text:i}){let n=String(process.env.RESEND_API_KEY||"").trim(),o=String(process.env.CLIO_EMAIL_FROM||"").trim();if(!n||!o||!n.startsWith("re_"))throw Error("email_provider_not_configured");let s=await fetch("https://api.resend.com/emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({from:o,to:[e],subject:t,html:r,text:i})});if(!s.ok){let e=await s.json().catch(()=>({})),t="string"==typeof e?.message?e.message:"string"==typeof e?.error?.message?e.error.message:"";throw Error(t?`email_delivery_failed:${t}`:"email_delivery_failed")}let a=await s.json().catch(()=>({}));return{provider:"resend",status:"sent",messageId:"string"==typeof a?.id?a.id:`resend-${Date.now()}`}}async function n({toEmail:e,role:n,invitedBy:o,expiresAt:s,inviteToken:a}){let l,c,u,d=function(e){let r,i=t(),n=(r=String(process.env.CLIO_INVITE_VERIFY_PATH||"").trim())?r.startsWith("/")?r:`/${r}`:"/verify-invite",o=String(e||"").trim();if(!o)throw Error("invalid_invite_token");return`${i}${n}?token=${encodeURIComponent(o)}`}(a),f=(c=t(),`${c}${!(u=String(process.env.CLIO_LOGIN_PATH||"").trim())?"/login":u.startsWith("/")?u:`/${u}`}`),m=function({role:e,invitedBy:t,verifyUrl:r,loginUrl:i,expiresAt:n}){let o=new Date(n),s=Number.isNaN(o.getTime())?n:o.toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return{subject:"You are invited to CLIO HRIS",text:`You were invited to access CLIO HRIS.
Assigned role: ${e}
Invited by: ${t}
Verify your email: ${r}
Sign-in page: ${i}
Invitation expires: ${s}

Step 1: Open the verification link and complete email verification.
Step 2: After verification, sign in using Google with the same invited work email.
Only invited accounts can access the workspace.`,html:`<p>You were invited to access <strong>CLIO HRIS</strong>.</p><p><strong>Assigned role:</strong> ${e}<br/><strong>Invited by:</strong> ${t}<br/><strong>Invitation expires:</strong> ${s}</p><p><a href="${r}">Verify your email</a></p><p><a href="${i}">Open CLIO sign-in</a></p><p>After verification, sign in using Google with the same invited work email.</p>`}}({role:n,invitedBy:o,verifyUrl:d,loginUrl:f,expiresAt:s}),_=!(l=String(process.env.CLIO_EMAIL_PROVIDER||"").trim().toLowerCase())||"firebase"===l||l.includes("firebase")?"firebase":"resend"===l||l.includes("resend")?"resend":"console"===l||"dev"===l||l.includes("console")?"console":l;if("firebase"===_)return await r({toEmail:e,verifyUrl:d});if("resend"===_)return await i({toEmail:e,subject:m.subject,html:m.html,text:m.text});if("console"===_){if("true"!==String(process.env.CLIO_ALLOW_CONSOLE_EMAIL||"").trim().toLowerCase())throw Error("email_provider_not_configured");return function({toEmail:e,subject:t,verifyUrl:r,loginUrl:i}){return{provider:"console",status:"simulated",messageId:`console-${Date.now()}`,previewUrl:r,loginUrl:i}}({toEmail:e,subject:m.subject,verifyUrl:d,loginUrl:f})}throw Error("unsupported_email_provider")}e.s(["deliverInviteEmail",()=>n])}];

//# sourceMappingURL=src_lib_9a482084._.js.map