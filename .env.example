# CLIO local baseline environment
# Copy this file to .env.local and replace placeholder values.

# -----------------------------------------------------------------------------
# App URL fallback
# -----------------------------------------------------------------------------
# Invite/login links auto-resolve from NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN.
# Set CLIO_APP_BASE_URL only if you need a custom override.

# -----------------------------------------------------------------------------
# Runtime and security baseline
# -----------------------------------------------------------------------------
CLIO_NEXT_DIST_DIR=next-dev-cache
CLIO_SESSION_SECRET=replace-with-a-long-random-secret-min-48-characters-0123456789
CLIO_USE_FIRESTORE=true
CLIO_FIRESTORE_DATABASE_ID=cliohris
CLIO_AUDIT_ASYNC=true

# -----------------------------------------------------------------------------
# Authentication policy
# -----------------------------------------------------------------------------
CLIO_REQUIRE_SMS_MFA=true
CLIO_REQUIRE_FIREBASE_CUSTOM_CLAIMS=true
CLIO_REQUIRE_EMAIL_DELIVERY=false
CLIO_EXPOSE_DEV_OTP=true
CLIO_INVITE_EXPIRATION_DAYS=30

# -----------------------------------------------------------------------------
# Firebase client (required for Google auth + Firestore client SDK)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_FIREBASE_API_KEY=replace-me
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=replace-me.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=replace-me
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=replace-me.appspot.com
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET_URL=gs://replace-me.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=replace-me
NEXT_PUBLIC_FIREBASE_APP_ID=replace-me
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=

# -----------------------------------------------------------------------------
# Firebase Admin (required by claims sync and production hardening checks)
# FIREBASE_ADMIN_PRIVATE_KEY must keep \n escapes.
# -----------------------------------------------------------------------------
FIREBASE_ADMIN_PROJECT_ID=replace-me
FIREBASE_ADMIN_CLIENT_EMAIL=firebase-adminsdk-xxxxx@replace-me.iam.gserviceaccount.com
FIREBASE_ADMIN_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nreplace-me\n-----END PRIVATE KEY-----\n"

# -----------------------------------------------------------------------------
# Invite / onboarding email delivery
# Use CLIO_EMAIL_PROVIDER=resend for branded custom invite emails.
# Firebase provider sends Firebase default email-link template.
# -----------------------------------------------------------------------------
CLIO_EMAIL_PROVIDER=resend
CLIO_ALLOW_CONSOLE_EMAIL=true
CLIO_EMAIL_FROM=onboarding@your-domain.com
CLIO_EMAIL_BRAND_DOMAIN=your-domain.com
RESEND_API_KEY=

# -----------------------------------------------------------------------------
# Security incident alert delivery (optional)
# -----------------------------------------------------------------------------
CLIO_ALERT_EMAIL_PROVIDER=none
CLIO_ALERT_SMS_PROVIDER=none
CLIO_SECURITY_ALERT_RECIPIENTS=
CLIO_SMS_ALERT_RECIPIENTS=
CLIO_SECURITY_WEBHOOK_URLS=
CLIO_SECURITY_WEBHOOK_TOKEN=
CLIO_SIEM_WEBHOOK_URL=
CLIO_SIEM_WEBHOOK_TOKEN=
CLIO_EDR_WEBHOOK_URL=
CLIO_EDR_WEBHOOK_TOKEN=
CLIO_SECURITY_WEBHOOK_TIMEOUT_MS=5000

# -----------------------------------------------------------------------------
# SMS OTP controls
# -----------------------------------------------------------------------------
CLIO_SMS_DEFAULT_COUNTRY_CODE=+63
CLIO_SMS_OTP_SECRET=
CLIO_SMS_OTP_TTL_SECONDS=300
CLIO_SMS_OTP_MAX_ATTEMPTS=5
CLIO_SMS_OTP_RESEND_COOLDOWN_SECONDS=60
CLIO_LOGIN_MFA_CHALLENGE_TTL_SECONDS=600

# -----------------------------------------------------------------------------
# Role bootstrap emails (comma-separated)
# -----------------------------------------------------------------------------
SUPER_ADMIN_EMAILS=superadmin@example.com
HR_EMAILS=
GRC_EMAILS=
EA_EMAILS=
EMPLOYEE_L1_EMAILS=
EMPLOYEE_L2_EMAILS=
EMPLOYEE_L3_EMAILS=
CLIO_GRC_ALERT_EMAIL=grc@example.com
CLIO_IDS_SYSTEM_ACTOR_EMAIL=system@clio.local

# -----------------------------------------------------------------------------
# Firestore collection names (optional overrides)
# -----------------------------------------------------------------------------
CLIO_FIRESTORE_AUDIT_COLLECTION=clio_audit_logs
CLIO_FIRESTORE_USERS_COLLECTION=clio_users
CLIO_FIRESTORE_INVITES_COLLECTION=clio_user_invites
CLIO_FIRESTORE_EMPLOYEES_COLLECTION=employees
CLIO_FIRESTORE_LIFECYCLE_COLLECTION=employment_lifecycle
CLIO_FIRESTORE_ATTENDANCE_COLLECTION=attendance
CLIO_FIRESTORE_LEAVE_COLLECTION=leave_requests
CLIO_FIRESTORE_PERFORMANCE_COLLECTION=performance_records
CLIO_FIRESTORE_TEMPLATES_COLLECTION=document_templates
CLIO_FIRESTORE_EXPORTS_COLLECTION=export_requests
CLIO_FIRESTORE_INCIDENTS_COLLECTION=security_incidents
CLIO_FIRESTORE_SETTINGS_REFERENCE_COLLECTION=settings_reference_data
CLIO_FIRESTORE_EMPLOYEE_DOCUMENTS_SUBCOLLECTION=documents
CLIO_FIRESTORE_NOTIFICATIONS_COLLECTION=clio_notifications
CLIO_FIRESTORE_IDS_RETRY_COLLECTION=clio_ids_retry_queue
CLIO_FIRESTORE_IDS_DEAD_LETTER_COLLECTION=clio_ids_dead_letter

# -----------------------------------------------------------------------------
# Data retention and incident evidence controls
# -----------------------------------------------------------------------------
CLIO_RETENTION_YEARS=5
CLIO_INCIDENT_FORENSIC_LOG_LIMIT=1800
CLIO_INCIDENT_EVIDENCE_MAX_BYTES=10485760
CLIO_INCIDENT_EVIDENCE_ALLOWED_EXTENSIONS=pdf,png,jpg,jpeg,webp,doc,docx,xls,xlsx,csv,txt
CLIO_INCIDENT_EVIDENCE_ALLOWED_MIME_TYPES=application/pdf,image/png,image/jpeg,image/webp,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/csv,text/plain
CLIO_INCIDENT_EVIDENCE_REQUIRE_MIME_TYPE=true
CLIO_INCIDENT_EVIDENCE_AV_HOOK_URL=
CLIO_INCIDENT_EVIDENCE_AV_HOOK_TOKEN=
CLIO_INCIDENT_EVIDENCE_AV_REQUIRED=false
CLIO_INCIDENT_EVIDENCE_AV_FAIL_OPEN=false
CLIO_INCIDENT_EVIDENCE_AV_TIMEOUT_MS=5000

# -----------------------------------------------------------------------------
# IDS tuning
# -----------------------------------------------------------------------------
CLIO_IDS_ENABLED=true
CLIO_IDS_AUTH_FAILURE_THRESHOLD=5
CLIO_IDS_AUTH_FAILURE_WINDOW_MINUTES=10
CLIO_IDS_PERMISSION_DENIED_THRESHOLD=3
CLIO_IDS_PERMISSION_DENIED_WINDOW_MINUTES=15
CLIO_IDS_EXPORT_SPIKE_THRESHOLD=4
CLIO_IDS_EXPORT_SPIKE_WINDOW_MINUTES=20
CLIO_IDS_PII_ACCESS_SPIKE_THRESHOLD=12
CLIO_IDS_PII_ACCESS_SPIKE_WINDOW_MINUTES=15
CLIO_IDS_OFFBOARDED_ACCESS_THRESHOLD=2
CLIO_IDS_OFFBOARDED_ACCESS_WINDOW_MINUTES=30
CLIO_IDS_ROLE_ESCALATION_THRESHOLD=2
CLIO_IDS_ROLE_ESCALATION_WINDOW_MINUTES=60
CLIO_IDS_BREACH_WINDOW_MINUTES=30
CLIO_IDS_BREACH_EXPORT_THRESHOLD=2
CLIO_IDS_BREACH_PII_THRESHOLD=6
CLIO_IDS_BREACH_DENIED_THRESHOLD=2
CLIO_IDS_INCIDENT_COOLDOWN_MINUTES=15
CLIO_IDS_MAX_RECIPIENTS=20
CLIO_IDS_RETRY_ENABLED=true
CLIO_IDS_RETRY_BATCH_SIZE=8
CLIO_IDS_RETRY_MAX_ATTEMPTS=5
CLIO_IDS_RETRY_BASE_BACKOFF_SECONDS=30
CLIO_IDS_RETRY_MAX_BACKOFF_SECONDS=1800
