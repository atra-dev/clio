(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87748,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(22016),i=e.i(57688),s=e.i(71645),n=e.i(18566);e.i(51718);var l=e.i(18357),o=e.i(1616),c=e.i(32295),d=e.i(80064);let m={employees:[],"employment-lifecycle":[{id:"workflow-status-tracking",label:"Workflow Status Tracking"},{id:"onboarding",label:"Onboarding"},{id:"role-changes",label:"Role Changes"},{id:"disciplinary-records",label:"Disciplinary Records"},{id:"offboarding-access-revocation",label:"Offboarding + Access Revocation"}],attendance:[{id:"monitoring-dashboard",label:"Attendance Dashboard"},{id:"records",label:"Records"},{id:"audit-logs",label:"Audit Logs"}],"incident-management":[{id:"incident-dashboard",label:"Incident Dashboard"},{id:"report-incident",label:"Report Incident"},{id:"incident-list",label:"Case Management"},{id:"reports-analytics",label:"Reports & Analytics"}]},h=new Set(["profile","documents"]);function p(e){let a,i,l,o,h,p,u=(0,r.c)(17),{moduleId:f,moduleHref:g,role:b,visible:v}=e,w=(0,n.usePathname)(),[y,j]=(0,s.useState)("");if(u[0]!==f||u[1]!==b){e:{let e,t=m[f]||[];if("employees"!==f||!("EMPLOYEE"===(e=String(b||"").trim().toUpperCase())||e.startsWith("EMPLOYEE_"))){a=t;break e}a=t.filter(x)}u[0]=f,u[1]=b,u[2]=a}else a=u[2];let N=a;if(u[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=()=>{j(String(window.location.hash||"").trim().replace(/^#/,""))};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},l=[],u[3]=i,u[4]=l):(i=u[3],l=u[4]),(0,s.useEffect)(i,l),!(void 0===v||v)||w!==g||0===N.length)return null;u[5]!==g||u[6]!==f?(o=e=>{let t=`${g}#${e}`;window.history.pushState(null,"",t),j(e),window.dispatchEvent(new CustomEvent("clio:subtab-anchor",{detail:{moduleId:f,anchor:e}}))},u[5]=g,u[6]=f,u[7]=o):o=u[7];let S=o;if(u[8]!==S||u[9]!==y||u[10]!==N){let e;u[12]!==S||u[13]!==y?(e=(e,r)=>{let a=(0,c.toSubTabAnchor)(e.id),i=y===a||!y&&0===r;return(0,t.jsx)("button",{type:"button",onClick:()=>S(a),className:(0,d.cn)("block w-full rounded-lg border px-2.5 py-1.5 text-left text-[11px] font-medium transition",i?"border-sky-200 bg-sky-50 text-sky-700":"border-transparent text-slate-600 hover:border-slate-200 hover:bg-white hover:text-slate-800"),children:e.label},e.id)},u[12]=S,u[13]=y,u[14]=e):e=u[14],h=N.map(e),u[8]=S,u[9]=y,u[10]=N,u[11]=h}else h=u[11];return u[15]!==h?(p=(0,t.jsx)("div",{className:"mt-1.5 space-y-1.5 pl-12 pr-1",children:h}),u[15]=h,u[16]=p):p=u[16],p}function x(e){return h.has(e.id)}var u=e.i(74923),f=e.i(75686);let g="EMPLOYEE_L1",b=new Set(f.ROLES.map(e=>e.id));function v(e){if("string"!=typeof e)return g;let t=e.trim().toUpperCase();return b.has(t)?t:g}e.i(47167);let w={SUPER_ADMIN:["*"],GRC:["dashboard:view","employees:view","employees:edit","employees:view:sensitive","lifecycle:view","lifecycle:edit","lifecycle:approve","attendance:view","attendance:edit","attendance:approve","performance:view","performance:edit","performance:approve","templates:view","templates:edit","exports:view","exports:manage","exports:approve","exports:request","activity_log:export","activity_log:view","audit:view","access_management:view","retention_archive:view","retention_archive:manage","incident_management:view","incident_management:edit","user_management:view","user_management:manage","settings:view","audit:write:nonsensitive","auth:logout","resource:own"],HR:["dashboard:view","employees:view","employees:edit","employees:view:sensitive","lifecycle:view","lifecycle:edit","lifecycle:approve","attendance:view","attendance:edit","attendance:approve","performance:view","performance:edit","performance:approve","templates:view","templates:edit","exports:view","exports:manage","exports:approve","exports:request","activity_log:export","settings:view","audit:write:nonsensitive","auth:logout","resource:own"],EA:["dashboard:view","employees:view","employees:edit","employees:view:sensitive","lifecycle:view","lifecycle:edit","lifecycle:approve","attendance:view","attendance:edit","attendance:approve","performance:view","performance:edit","performance:approve","templates:view","templates:edit","exports:view","exports:manage","exports:approve","exports:request","activity_log:export","settings:view","audit:write:nonsensitive","auth:logout","resource:own"],EMPLOYEE_L1:["dashboard:view","employees:view","employees:edit:self","attendance:view","attendance:edit:self","performance:view","templates:view","requests:view","requests:create:self","exports:request:self","settings:view","audit:write:nonsensitive","auth:logout","resource:own"],EMPLOYEE_L2:["dashboard:view","employees:view","employees:edit:self","attendance:view","attendance:edit:self","performance:view","templates:view","requests:view","requests:create:self","exports:request:self","settings:view","audit:write:nonsensitive","auth:logout","resource:own"],EMPLOYEE_L3:["dashboard:view","employees:view","employees:edit:self","attendance:view","attendance:edit:self","performance:view","templates:view","requests:view","requests:create:self","exports:request:self","settings:view","audit:write:nonsensitive","auth:logout","resource:own"]},y={dashboard:"dashboard:view",employees:"employees:view","employment-lifecycle":"lifecycle:view",attendance:"attendance:view",performance:"performance:view","activity-log":"activity_log:view",exports:"exports:view",documents:"templates:view","access-management":"access_management:view","retention-archive":"retention_archive:view","incident-management":"incident_management:view",requests:"requests:view",settings:"settings:view","user-management":"user_management:view"};function j(e,t){let r=v(e);if(!new Set(f.MODULE_ACCESS[r]??[]).has(t))return!1;let a=y[t];if(!a)return!0;let i=w[v(r)]??[];return i.includes("*")||i.includes(a)}var N=e.i(13634),S=e.i(47414),k=e.i(9968);let E=new Map(f.MODULES.map(e=>[String(e?.href||"").trim().toLowerCase(),e.id])),C=new Map(f.MODULES.map(e=>[String(e?.label||"").trim().toLowerCase(),e.id]));function _(e){let t=String(e||"").trim().toUpperCase();return"EMPLOYEE"===t||t.startsWith("EMPLOYEE_")?"Employee":({SUPER_ADMIN:"Super Admin",GRC:"GRC",HR:"HR",EA:"EA"})[t]||"Employee"}function M(e){let t=e?new Date(e):null;return!t||Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function P(e){let a,i=(0,r.c)(78),{moduleId:s,active:n}=e,l=n?"text-sky-700":"text-slate-500 group-hover:text-slate-700";i[0]!==l?(a=(0,d.cn)("h-4 w-4 transition-colors",l),i[0]=l,i[1]=a):a=i[1];let o=a;switch(s){case"dashboard":{let e,r,a,s,n;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("rect",{x:"3.5",y:"3.5",width:"7",height:"7",rx:"1.2"}),r=(0,t.jsx)("rect",{x:"13.5",y:"3.5",width:"7",height:"4.5",rx:"1.2"}),a=(0,t.jsx)("rect",{x:"13.5",y:"10.5",width:"7",height:"10",rx:"1.2"}),s=(0,t.jsx)("rect",{x:"3.5",y:"13",width:"7",height:"7.5",rx:"1.2"}),i[2]=e,i[3]=r,i[4]=a,i[5]=s):(e=i[2],r=i[3],a=i[4],s=i[5]),i[6]!==o?(n=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a,s]}),i[6]=o,i[7]=n):n=i[7],n}case"employees":{let e,r,a,s,n;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("circle",{cx:"9",cy:"8.3",r:"3.1"}),r=(0,t.jsx)("path",{d:"M3.8 18.3c0-3.2 2.4-5.2 5.2-5.2s5.2 2 5.2 5.2"}),a=(0,t.jsx)("path",{d:"M15.1 9.3a2.5 2.5 0 1 0 0-5"}),s=(0,t.jsx)("path",{d:"M20 18.2c0-2.3-1.3-3.9-3.4-4.7"}),i[8]=e,i[9]=r,i[10]=a,i[11]=s):(e=i[8],r=i[9],a=i[10],s=i[11]),i[12]!==o?(n=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a,s]}),i[12]=o,i[13]=n):n=i[13],n}case"employment-lifecycle":{let e,r,a,s,n,l,c;return i[14]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M4.5 6.2h15"}),r=(0,t.jsx)("path",{d:"M4.5 12h15"}),a=(0,t.jsx)("path",{d:"M4.5 17.8h15"}),s=(0,t.jsx)("circle",{cx:"7.2",cy:"6.2",r:"1.2"}),n=(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1.2"}),l=(0,t.jsx)("circle",{cx:"16.8",cy:"17.8",r:"1.2"}),i[14]=e,i[15]=r,i[16]=a,i[17]=s,i[18]=n,i[19]=l):(e=i[14],r=i[15],a=i[16],s=i[17],n=i[18],l=i[19]),i[20]!==o?(c=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a,s,n,l]}),i[20]=o,i[21]=c):c=i[21],c}case"attendance":{let e,r,a,s;return i[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("rect",{x:"4",y:"5.2",width:"16",height:"14.2",rx:"2"}),r=(0,t.jsx)("path",{d:"M8 3.8v2.4M16 3.8v2.4M4 9.2h16"}),a=(0,t.jsx)("path",{d:"m9.1 14 1.9 1.9 4-4"}),i[22]=e,i[23]=r,i[24]=a):(e=i[22],r=i[23],a=i[24]),i[25]!==o?(s=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a]}),i[25]=o,i[26]=s):s=i[26],s}case"performance":{let e,r,a,s,n;return i[27]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M4.2 18.5h15.6"}),r=(0,t.jsx)("rect",{x:"6.2",y:"11.5",width:"2.8",height:"7",rx:"0.8"}),a=(0,t.jsx)("rect",{x:"10.6",y:"8.5",width:"2.8",height:"10",rx:"0.8"}),s=(0,t.jsx)("rect",{x:"15",y:"5.5",width:"2.8",height:"13",rx:"0.8"}),i[27]=e,i[28]=r,i[29]=a,i[30]=s):(e=i[27],r=i[28],a=i[29],s=i[30]),i[31]!==o?(n=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a,s]}),i[31]=o,i[32]=n):n=i[32],n}case"activity-log":{let e,r,a;return i[33]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("circle",{cx:"12",cy:"12",r:"8.5"}),r=(0,t.jsx)("path",{d:"M12 7.4v5.1l3.6 2.2"}),i[33]=e,i[34]=r):(e=i[33],r=i[34]),i[35]!==o?(a=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r]}),i[35]=o,i[36]=a):a=i[36],a}case"exports":{let e,r,a,s;return i[37]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M12 4.2v9.6"}),r=(0,t.jsx)("path",{d:"m8.4 10.1 3.6 3.7 3.6-3.7"}),a=(0,t.jsx)("rect",{x:"4",y:"15.5",width:"16",height:"4.3",rx:"1.2"}),i[37]=e,i[38]=r,i[39]=a):(e=i[37],r=i[38],a=i[39]),i[40]!==o?(s=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a]}),i[40]=o,i[41]=s):s=i[41],s}case"access-management":{let e,r,a;return i[42]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M12 3.8 5.2 6.5v5.3c0 4.1 2.5 7.7 6.8 8.4 4.3-.7 6.8-4.3 6.8-8.4V6.5L12 3.8Z"}),r=(0,t.jsx)("path",{d:"M9.2 12.3 11 14l3.8-3.9"}),i[42]=e,i[43]=r):(e=i[42],r=i[43]),i[44]!==o?(a=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r]}),i[44]=o,i[45]=a):a=i[45],a}case"retention-archive":{let e,r,a,s;return i[46]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("rect",{x:"4.4",y:"5.2",width:"15.2",height:"4.2",rx:"1"}),r=(0,t.jsx)("path",{d:"M6.1 9.6h11.8v8.7a1.7 1.7 0 0 1-1.7 1.7H7.8a1.7 1.7 0 0 1-1.7-1.7V9.6Z"}),a=(0,t.jsx)("path",{d:"M9 13.1h6M9 16h6"}),i[46]=e,i[47]=r,i[48]=a):(e=i[46],r=i[47],a=i[48]),i[49]!==o?(s=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a]}),i[49]=o,i[50]=s):s=i[50],s}case"incident-management":{let e,r,a;return i[51]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"m12 3.8 8.1 14.1a1.2 1.2 0 0 1-1 1.8H4.9a1.2 1.2 0 0 1-1-1.8L12 3.8Z"}),r=(0,t.jsx)("path",{d:"M12 9v5.2M12 17.5h.01"}),i[51]=e,i[52]=r):(e=i[51],r=i[52]),i[53]!==o?(a=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r]}),i[53]=o,i[54]=a):a=i[54],a}case"documents":{let e,r,a,s;return i[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M7.5 3.8h7l4 4v12.4a1.8 1.8 0 0 1-1.8 1.8H7.5a1.8 1.8 0 0 1-1.8-1.8V5.6a1.8 1.8 0 0 1 1.8-1.8Z"}),r=(0,t.jsx)("path",{d:"M14.5 3.8v4h4"}),a=(0,t.jsx)("path",{d:"M8.8 13h6.6M8.8 16.4h6.6"}),i[55]=e,i[56]=r,i[57]=a):(e=i[55],r=i[56],a=i[57]),i[58]!==o?(s=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a]}),i[58]=o,i[59]=s):s=i[59],s}case"requests":{let e,r,a,s;return i[60]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("rect",{x:"4",y:"4.5",width:"16",height:"15",rx:"2"}),r=(0,t.jsx)("path",{d:"M8 9h8M8 13h5"}),a=(0,t.jsx)("path",{d:"m14 16 2.1 2.1L20 14.2"}),i[60]=e,i[61]=r,i[62]=a):(e=i[60],r=i[61],a=i[62]),i[63]!==o?(s=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a]}),i[63]=o,i[64]=s):s=i[64],s}case"settings":{let e,r,a;return i[65]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("path",{d:"M9.9 4.8h4.2l.7 2 2.1.9 1.9-1.1 2.1 3.6-1.6 1.4v2.4l1.6 1.4-2.1 3.6-1.9-1.1-2.1.9-.7 2H9.9l-.7-2-2.1-.9-1.9 1.1-2.1-3.6 1.6-1.4v-2.4l-1.6-1.4 2.1-3.6 1.9 1.1 2.1-.9.7-2Z"}),r=(0,t.jsx)("circle",{cx:"12",cy:"12",r:"2.7"}),i[65]=e,i[66]=r):(e=i[65],r=i[66]),i[67]!==o?(a=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r]}),i[67]=o,i[68]=a):a=i[68],a}case"user-management":{let e,r,a,s,n;return i[69]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("circle",{cx:"8.2",cy:"8.4",r:"2.6"}),r=(0,t.jsx)("circle",{cx:"16.1",cy:"9.6",r:"2.2"}),a=(0,t.jsx)("path",{d:"M3.9 18.7c0-2.9 2.1-4.8 4.8-4.8s4.8 1.9 4.8 4.8"}),s=(0,t.jsx)("path",{d:"M13.4 18.3c.3-2 1.7-3.4 3.9-3.4 2.1 0 3.4 1.1 3.8 2.9"}),i[69]=e,i[70]=r,i[71]=a,i[72]=s):(e=i[69],r=i[70],a=i[71],s=i[72]),i[73]!==o?(n=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:o,"aria-hidden":"true",children:[e,r,a,s]}),i[73]=o,i[74]=n):n=i[74],n}default:{let e,r;return i[75]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3"}),i[75]=e):e=i[75],i[76]!==o?(r=(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:o,"aria-hidden":"true",children:e}),i[76]=o,i[77]=r):r=i[77],r}}}function L(e){let a,i,s=(0,r.c)(3),{className:n}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("path",{d:"m15 5-7 7 7 7"}),s[0]=a):a=s[0],s[1]!==n?(i=(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",className:n,"aria-hidden":"true",children:a}),s[1]=n,s[2]=i):i=s[2],i}function U(e){let a,i,s=(0,r.c)(3),{className:n}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("path",{d:"m9 5 7 7-7 7"}),s[0]=a):a=s[0],s[1]!==n?(i=(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",className:n,"aria-hidden":"true",children:a}),s[1]=n,s[2]=i):i=s[2],i}function A(){window.sessionStorage.removeItem("clio_google_redirect_pending")}function D({children:e,session:r}){var c;let m,h,x,g,b=(0,n.usePathname)(),w=(0,n.useRouter)(),y=(0,u.useToast)(),D=v(r?.role),[O,I]=(0,s.useState)(!1),[R,T]=(0,s.useState)(!1),B=r?.email??"user@gmail.com",[W,q]=(0,s.useState)(!1),[V,$]=(0,s.useState)(null),[Y,H]=(0,s.useState)({firstName:"",middleName:"",lastName:"",profilePhotoDataUrl:"",profilePhotoStoragePath:"",phoneVerifiedAt:"",phoneLast4:"",smsMfaEnabled:!1}),[F,G]=(0,s.useState)(!0),[z,Z]=(0,s.useState)(!1),[J,K]=(0,s.useState)(!1),[Q,X]=(0,s.useState)([]),[ee,et]=(0,s.useState)(0),[er,ea]=(0,s.useState)(!1),[ei,es]=(0,s.useState)(!1),[en,el]=(0,s.useState)(16),[eo,ec]=(0,s.useState)("all"),[ed,em]=(0,s.useState)({}),[eh,ep]=(0,s.useState)(!1),[ex,eu]=(0,s.useState)(!1),[ef,eg]=(0,s.useState)(!1),[eb,ev]=(0,s.useState)(!1),[ew,ey]=(0,s.useState)({role:String(r?.role||""),employmentRole:String(r?.role||""),employeeId:"-",employeeName:"-",employeeEmail:B,department:"-",jobTitle:"-",employmentStatus:"-",recordStatus:"-",managerEmail:"-",hireDate:"-",lastLoginAt:null,lastActiveIp:"unknown",lastActiveDevice:"Unknown device",recentActivity:[]}),ej=(0,s.useRef)(null),eN=(0,s.useRef)(null),eS=(0,s.useRef)(null),ek=(0,s.useRef)(null),eE=(0,s.useRef)(null),eC=(0,s.useMemo)(()=>(0,N.formatPersonName)({firstName:V?.firstName,middleName:V?.middleName,lastName:V?.lastName,fallbackEmail:B,fallbackLabel:"Clio User"}),[V?.firstName,V?.middleName,V?.lastName,B]),e_=(0,s.useMemo)(()=>eC.split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()).slice(0,2).join("")||"CU",[eC]),eM=(0,s.useMemo)(()=>String(V?.profilePhotoDataUrl||"").trim()||"",[V]);(0,s.useEffect)(()=>{T("true"===window.localStorage.getItem("clio_sidebar_collapsed"))},[]),(0,s.useEffect)(()=>{window.localStorage.setItem("clio_sidebar_collapsed",String(R))},[R]),(0,s.useEffect)(()=>{let e=!0,t=0,r=[0,300,700,1200],a=async()=>{if(e){t+=1;try{let t=await fetch("/api/auth/role",{method:"GET",cache:"no-store"});if(!t.ok)throw Error("Session not ready.");await t.json().catch(()=>({})),e&&q(!0)}catch{if(!e)return;if(t<4){let e=r[Math.min(t,r.length-1)];window.setTimeout(a,e)}else q(!0)}}};return a(),()=>{e=!1}},[]),(0,s.useEffect)(()=>{let e=!0;return async function(){if(W){G(!0);try{let t=await fetch("/api/auth/profile",{method:"GET",cache:"no-store"}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error(r?.message||"Unable to load account profile.");if(!e)return;let a={firstName:String(r?.firstName||""),middleName:String(r?.middleName||""),lastName:String(r?.lastName||""),profilePhotoDataUrl:String(r?.profilePhotoDataUrl||""),profilePhotoStoragePath:String(r?.profilePhotoStoragePath||""),phoneVerifiedAt:String(r?.phoneVerifiedAt||""),phoneLast4:String(r?.phoneLast4||""),smsMfaEnabled:!!r?.smsMfaEnabled};$(a),H(a)}catch(t){e&&y.error(t.message||"Unable to load account profile.")}finally{e&&G(!1)}}}(),()=>{e=!1}},[W,y,B]);let eP=(0,s.useCallback)(async({quiet:e=!1,limit:t}={})=>{if(W){e||ea(!0);try{let e="number"==typeof t?t:en,r=await fetch(`/api/notifications?status=all&limit=${e}`,{method:"GET",cache:"no-store"}),a=await r.json().catch(()=>({}));if(!r.ok)throw Error(a?.message||"Unable to load notifications.");X(Array.isArray(a?.records)?a.records:[]),et(Number(a?.unreadCount||0))}catch(t){e||y.error(t.message||"Unable to load notifications.")}finally{e||ea(!1)}}},[W,en,y]);(0,s.useEffect)(()=>{if(!W)return;eP().catch(()=>null);let e=window.setInterval(()=>{eP({quiet:!0}).catch(()=>null)},3e4);return()=>{window.clearInterval(e)}},[W,eP]),(0,s.useEffect)(()=>{if(!z&&!J)return;let e=e=>{"Escape"===e.key&&(eh||ex||eb||Z(!1),ei||K(!1))},t=e=>{let t=e.target;if(!(t instanceof Node))return;let r=eE.current?.contains(t)||ek.current?.contains(t),a=eS.current?.contains(t)||eN.current?.contains(t);r||a||(eh||ex||eb||Z(!1),ei||K(!1))};return window.addEventListener("keydown",e),window.addEventListener("mousedown",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("mousedown",t)}},[ei,J,z,eb,eh,ex]);let eL=(0,s.useMemo)(()=>{let e,t;return e=v(D),t=new Set(f.MODULE_ACCESS[e]??[]),f.MODULES.filter(e=>t.has(e.id))},[D]),[eU,eA]=(0,s.useState)(""),eD=_(ew.role||D),eO=(m=String(ew.employmentRole||ew.role||D||"").trim().toUpperCase(),(h={EMPLOYEE:"Employee",EMPLOYEE_L1:"Employee (L1)",EMPLOYEE_L2:"Employee (L2)",EMPLOYEE_L3:"Employee (L3)"})[m]?h[m]:_(m)),eI=j(D,"settings"),eR=(0,s.useCallback)(e=>{if("device-login"===String(e?.type||"").trim().toLowerCase()||!String(e?.actionUrl||"").trim())return!1;let t=function(e){let t=function(e){let t=String(e||"").trim();if(!t)return"";try{let e=window.location.origin;return String(new URL(t,e).pathname||"").trim().toLowerCase()}catch{return t.split("?")[0].split("#")[0].trim().toLowerCase()}}(e?.actionUrl);if(t){let e=t.replace(/^\/+/,"").split("/")[0],r=E.get(`/${e}`);if(r)return r}let r=String(e?.module||"").trim().toLowerCase();return C.get(r)||""}(e);return!!t&&j(D,t)},[D]),eT=(0,s.useMemo)(()=>"all"===eo?Q:"unread"===eo?Q.filter(e=>"read"!==String(e?.status||"").trim().toLowerCase()):"read"===eo?Q.filter(e=>"read"===String(e?.status||"").trim().toLowerCase()):Q.filter(e=>String(e?.severity||"").trim().toLowerCase()===eo),[eo,Q]);(0,s.useEffect)(()=>{eL.forEach(e=>{w.prefetch(e.href)})},[eL,w]),(0,s.useEffect)(()=>{let e;try{e=new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"medium",timeZone:"Asia/Manila",timeZoneName:"short"})}catch{e=new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"medium"})}let t=()=>eA(e.format(new Date));t();let r=window.setInterval(t,1e3);return()=>window.clearInterval(r)},[]);let eB=async()=>{I(!0);try{let e=(0,S.getFirebaseClientAuth)();await (0,l.signOut)(e).catch(()=>null),A(),await fetch("/api/auth/logout",{method:"POST"}).catch(()=>null)}finally{window.location.assign("/login")}},eW=()=>{eh||ex||eb||Z(!1)},eq=async e=>{let t=String(e?.id||e?.recordId||"").trim();if(t&&"read"!==String(e?.status||"").trim().toLowerCase()){es(!0);try{let e=await fetch(`/api/notifications/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({read:!0})}),r=await e.json().catch(()=>({}));if(!e.ok)throw Error(r?.message||"Unable to update notification.");X(e=>e.map(e=>String(e?.id||e?.recordId||"").trim()===t?{...e,status:"read",readAt:new Date().toISOString()}:e)),et(e=>Math.max(0,e-1))}catch(e){y.error(e.message||"Unable to update notification.")}finally{es(!1)}}},eV=async()=>{if(!ei){es(!0);try{let e=await fetch("/api/notifications/read-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({limit:200})}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error(t?.message||"Unable to mark notifications as read.");X(e=>e.map(e=>({...e,status:"read",readAt:e?.readAt||new Date().toISOString()}))),et(0)}catch(e){y.error(e.message||"Unable to mark notifications as read.")}finally{es(!1)}}},e$=async e=>{if("device-login"===String(e?.type||"").trim().toLowerCase()||!eR(e))return;await eq(e);let t=String(e?.actionUrl||"").trim();t&&(K(!1),w.push(t))},eY=async(e,t)=>{let r=String(e?.id||e?.recordId||"").trim();if(!r)return;let a=String(e?.metadata?.deviceVerificationDecision||"").trim().toLowerCase(),i="confirmed"===a?"confirm":"denied"===a?"deny":a;if("confirm"!==i&&"deny"!==i){em(e=>({...e,[r]:!0}));try{let e=await fetch("/api/auth/device-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:r,decision:t})}),a=await e.json().catch(()=>({}));if(!e.ok)throw Error(a?.message||"Unable to submit device verification.");let i=String(a?.decision||t||"").trim().toLowerCase(),s="confirmed"===i?"confirm":"denied"===i?"deny":i,n=new Date().toISOString();X(e=>e.map(e=>String(e?.id||e?.recordId||"").trim()===r?{...e,status:"read",readAt:e?.readAt||n,metadata:{...e?.metadata&&"object"==typeof e.metadata?e.metadata:{},deviceVerificationDecision:s||t,deviceVerificationResolvedAt:n,deviceVerificationResponder:B}}:e)),et(e=>Math.max(0,e-1)),eP({quiet:!0}).catch(()=>null)}catch(e){y.error(e.message||"Unable to submit device verification.")}finally{em(e=>({...e,[r]:!1}))}}},eH=async()=>{if(W){eg(!0);try{let e=await fetch("/api/auth/profile/activity",{method:"GET",cache:"no-store"}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error(t?.message||"Unable to load account insights.");ey(e=>({...e,role:String(t?.role||e.role||r?.role||""),employmentRole:String(t?.employmentRole||e.employmentRole||t?.role||e.role||r?.role||""),employeeId:String(t?.employeeId||"-"),employeeName:String(t?.employeeName||"-"),employeeEmail:String(t?.employeeEmail||B),department:String(t?.department||"-"),jobTitle:String(t?.jobTitle||"-"),employmentStatus:String(t?.employmentStatus||"-"),recordStatus:String(t?.recordStatus||"-"),managerEmail:String(t?.managerEmail||"-"),hireDate:String(t?.hireDate||"-"),lastLoginAt:t?.lastLoginAt||null,lastActiveIp:String(t?.lastActiveIp||"unknown"),lastActiveDevice:String(t?.lastActiveDevice||"Unknown device"),recentActivity:Array.isArray(t?.recentActivity)?t.recentActivity:[]}))}catch(e){y.error(e.message||"Unable to load account insights.")}finally{eg(!1)}}},eF=e=>t=>{H(r=>({...r,[e]:t.target.value}))},eG=async e=>{let t=e.target.files?.[0];if(t){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(String(t.type||"").toLowerCase())){y.error("Only PNG, JPG, or WEBP images are allowed."),e.target.value="";return}if(t.size>1e6){y.error("Profile picture must be 1MB or below."),e.target.value="";return}eu(!0);try{let e=await (0,k.uploadProfilePhotoToStorage)({file:t,userEmail:B});H(t=>({...t,profilePhotoDataUrl:e.downloadUrl,profilePhotoStoragePath:e.storagePath})),y.success("Profile photo uploaded to secure storage.")}catch(e){y.error(e.message||"Unable to upload profile photo.")}finally{eu(!1),e.target.value=""}}},ez=async()=>{if(!ex&&!eb){ep(!0);try{let e=String(V?.profilePhotoStoragePath||"").trim(),t=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:Y.firstName,middleName:Y.middleName,lastName:Y.lastName,profilePhotoDataUrl:Y.profilePhotoDataUrl||null,profilePhotoStoragePath:Y.profilePhotoStoragePath||null,smsMfaEnabled:!!Y.smsMfaEnabled})}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error(r?.message||"Unable to save profile.");let a={firstName:String(r?.profile?.firstName||""),middleName:String(r?.profile?.middleName||""),lastName:String(r?.profile?.lastName||""),profilePhotoDataUrl:String(r?.profile?.profilePhotoDataUrl||""),profilePhotoStoragePath:String(r?.profile?.profilePhotoStoragePath||""),phoneVerifiedAt:String(r?.profile?.phoneVerifiedAt||""),phoneLast4:String(r?.profile?.phoneLast4||""),smsMfaEnabled:!!r?.profile?.smsMfaEnabled};$(a),H(a),Z(!1);let i=String(a.profilePhotoStoragePath||"").trim();e&&e!==i&&(0,k.removeStorageObjectByPath)(e).catch(()=>null),y.success("Profile updated.")}catch(e){y.error(e.message||"Unable to save profile.")}finally{ep(!1)}}},eZ=async()=>{if(!eh&&!ex&&!O&&!eb){ev(!0);try{let e=await fetch("/api/auth/sessions/revoke",{method:"POST"}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error(t?.message||"Unable to revoke active sessions.");let r=(0,S.getFirebaseClientAuth)();await (0,l.signOut)(r).catch(()=>null),A(),y.success("All active sessions were signed out."),Z(!1),window.location.assign("/login")}catch(e){y.error(e.message||"Unable to revoke active sessions.")}finally{ev(!1)}}};return(0,t.jsxs)("div",{className:"h-dvh w-full overflow-hidden bg-slate-100/80",children:[(0,t.jsx)("a",{href:"#main-content",className:"sr-only rounded-lg bg-white px-4 py-2 text-sm text-slate-900 focus:not-sr-only",children:"Skip to main content"}),(0,t.jsxs)("div",{className:(0,d.cn)("grid h-full w-full gap-0 lg:transition-[grid-template-columns] lg:duration-500 lg:ease-[cubic-bezier(0.22,1,0.36,1)]",R?"lg:grid-cols-[88px_minmax(0,1fr)]":"lg:grid-cols-[240px_minmax(0,1fr)]"),children:[(0,t.jsx)("aside",{className:(0,d.cn)("relative h-full border-r border-slate-200 bg-[linear-gradient(180deg,#f8fbff_0%,#f2f7fc_45%,#eef3f8_100%)] lg:overflow-visible",R?"px-2 py-4 lg:px-2 lg:py-4":"p-0"),children:(0,t.jsxs)("div",{className:"flex h-full min-h-0 flex-col",children:[(0,t.jsx)("div",{className:(0,d.cn)("flex transition-all duration-300 ease-out",R?"flex-col items-center gap-2":"items-stretch h-[92px] w-full"),children:(0,t.jsx)(o.default,{href:"/dashboard",iconOnly:R})}),(0,t.jsx)("button",{type:"button",onClick:()=>{T(e=>!e)},className:"absolute -right-4 top-1/2 z-30 inline-flex h-9 w-9 -translate-y-1/2 items-center justify-center rounded-md border border-sky-300 bg-white text-slate-600 shadow-sm transition hover:border-sky-400 hover:text-slate-900","aria-label":R?"Open sidebar":"Close sidebar",title:R?"Open sidebar":"Close sidebar",children:R?(0,t.jsx)(U,{className:"h-5 w-5"}):(0,t.jsx)(L,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:(0,d.cn)("mt-4 flex min-h-0 flex-1 flex-col px-2 lg:px-2.5",R&&"mt-5"),children:[(0,t.jsx)("div",{className:(0,d.cn)("overflow-hidden px-0.5 transition-all duration-300 ease-out",R?"max-h-0 opacity-0":"max-h-6 opacity-100"),children:(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.14em] text-sky-700/80",children:"Navigation"})}),(0,t.jsx)("nav",{className:(0,d.cn)("clio-sidebar-scroll mt-2 min-h-0 flex-1 space-y-1 overflow-y-auto overscroll-contain pb-3 pr-2",R?"max-h-[calc(100dvh-8.75rem)]":"max-h-[calc(100dvh-10rem)]"),"aria-label":"Main navigation",children:eL.map(e=>{var r,i;let s=b===e.href,n=(r=e.id,i=e.label,String(D||"").trim().toUpperCase().startsWith("EMPLOYEE_")&&({employees:"My Profile",attendance:"My Attendance",performance:"My Performance",documents:"My Documents"})[r]||i);return(0,t.jsxs)("div",{children:[(0,t.jsxs)(a.default,{href:e.href,prefetch:!0,"aria-current":s?"page":void 0,title:R?n:void 0,className:(0,d.cn)("group flex items-center gap-2.5 rounded-lg border py-2 text-[13px] transition",R?"justify-center px-2":"px-2",s?"border-sky-200 bg-white text-sky-700 shadow-[0_12px_28px_-20px_rgba(14,116,214,0.8)]":"border-transparent text-slate-700 hover:border-slate-200/90 hover:bg-white/75"),children:[(0,t.jsx)("span",{className:(0,d.cn)("inline-flex h-7 w-7 shrink-0 items-center justify-center transition",s?"text-sky-700":"text-slate-500 group-hover:text-slate-700"),children:(0,t.jsx)(P,{moduleId:e.id,active:s})}),(0,t.jsx)("span",{className:(0,d.cn)("overflow-hidden whitespace-nowrap font-medium leading-none transition-all duration-300 ease-out",s?"text-sky-700":"text-slate-800",R?"max-w-0 -translate-x-2 opacity-0":"max-w-[11.5rem] translate-x-0 opacity-100"),children:n})]}),(0,t.jsx)(p,{moduleId:e.id,moduleHref:e.href,role:D,visible:!R})]},e.id)})})]}),(0,t.jsx)("div",{className:"mt-auto shrink-0 pt-2"})]})}),(0,t.jsxs)("div",{className:"flex min-h-0 min-w-0 flex-col overflow-hidden",children:[(0,t.jsxs)("header",{className:"shrink-0 flex flex-col gap-3 border-b border-slate-200 bg-white/90 px-5 py-4 sm:flex-row sm:items-center sm:justify-between lg:px-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Clio Workspace"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",suppressHydrationWarning:!0,children:["Today: ",eU||"—"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{ref:eN,type:"button",onClick:()=>{J?K(!1):(Z(!1),K(!0),eP({quiet:!0}).catch(()=>null))},className:"relative inline-flex h-10 w-10 items-center justify-center rounded-xl border border-slate-300 bg-white text-slate-700 transition hover:border-sky-300 hover:bg-sky-50/60","aria-label":"Open notifications","aria-expanded":J,title:"Notifications",children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4.5 w-4.5","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M7.3 10.2a4.7 4.7 0 1 1 9.4 0v3.3l1.4 2v1h-12v-1l1.2-2v-3.3"}),(0,t.jsx)("path",{d:"M10.1 17.6a2.1 2.1 0 0 0 3.8 0"})]}),ee>0?(0,t.jsx)("span",{className:"absolute -right-1.5 -top-1.5 inline-flex min-w-5 items-center justify-center rounded-full bg-rose-600 px-1.5 py-0.5 text-[10px] font-semibold text-white",children:ee>99?"99+":ee}):null]}),(0,t.jsxs)("div",{ref:eS,role:"dialog","aria-label":"Notifications","aria-hidden":!J,className:(0,d.cn)("absolute right-0 top-[calc(100%+0.55rem)] z-50 w-[min(92vw,24rem)] max-h-[calc(100dvh-8rem)] overflow-y-auto rounded-2xl border border-slate-200 bg-white p-3 shadow-[0_20px_50px_-30px_rgba(15,23,42,0.45)] transition-all duration-200",J?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none -translate-y-2 opacity-0"),children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 border-b border-slate-200 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Notifications"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:ee>0?`${ee} unread alert${1===ee?"":"s"}`:"No unread alerts"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{el(120),eP({quiet:!1,limit:120}).catch(()=>null)},className:"inline-flex h-7 items-center rounded-md border border-slate-300 bg-white px-2.5 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50",children:"View all"}),(0,t.jsxs)("select",{value:eo,onChange:e=>ec(e.target.value),className:"h-7 rounded-md border border-slate-300 bg-white px-2 text-[11px] font-semibold text-slate-700",children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"unread",children:"Unread"}),(0,t.jsx)("option",{value:"read",children:"Read"}),(0,t.jsx)("option",{value:"critical",children:"Critical"}),(0,t.jsx)("option",{value:"high",children:"High"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"low",children:"Low"})]}),(0,t.jsx)("button",{type:"button",onClick:eV,disabled:ei||0===ee,className:"inline-flex h-7 items-center rounded-md border border-slate-300 bg-white px-2.5 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-60",children:"Mark all read"})]})]}),(0,t.jsx)("div",{className:"mt-2",children:er?(0,t.jsx)("div",{className:"flex justify-center py-6",children:(0,t.jsx)("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600","aria-hidden":"true"})}):0===eT.length?(0,t.jsx)("p",{className:"rounded-lg border border-dashed border-slate-300 px-3 py-4 text-center text-xs text-slate-500",children:"No notifications found for this filter."}):(0,t.jsx)("ul",{className:"space-y-2",children:eT.map(e=>{let r,a=String(e?.id||e?.recordId||"").trim()||`${e?.title}-${e?.createdAt}`,i="read"!==String(e?.status||"").trim().toLowerCase(),s="device-login"===String(e?.type||"").trim().toLowerCase(),n=!s&&eR(e),l=String(e?.metadata?.deviceLabel||"").trim(),o=String(e?.metadata?.sourceIp||"").trim(),c=String(e?.metadata?.deviceVerificationDecision||"").trim().toLowerCase(),m="confirmed"===c?"confirm":"denied"===c?"deny":c,h=!!ed[a],p=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-900",children:String(e?.title||"Security notification")}),(0,t.jsx)("span",{className:(0,d.cn)("inline-flex shrink-0 rounded-full border px-1.5 py-0.5 text-[10px] font-semibold capitalize","critical"===(r=String(e?.severity||"").trim().toLowerCase())?"border-rose-200 bg-rose-50 text-rose-700":"high"===r?"border-amber-200 bg-amber-50 text-amber-700":"low"===r?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-sky-200 bg-sky-50 text-sky-700"),children:String(e?.severity||"medium")})]}),(0,t.jsx)("p",{className:"mt-1 text-[11px] text-slate-600",children:String(e?.message||"")}),s?(0,t.jsxs)("div",{className:"mt-1 text-[10px] text-slate-500",children:[l?`Device: ${l}`:"Device: Unknown",o?` • IP: ${o}`:""]}):null,n||s?null:(0,t.jsx)("p",{className:"mt-1 text-[10px] font-medium text-slate-500",children:"Read-only alert for visibility."}),s?(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:"confirm"===m||"deny"===m?(0,t.jsxs)("p",{className:(0,d.cn)("rounded-md border px-2 py-1 text-[11px] font-semibold","confirm"===m?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-rose-200 bg-rose-50 text-rose-700"),children:["Decision saved: ","confirm"===m?"It's me":"Not me"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{type:"button",onClick:()=>eY(e,"confirm"),disabled:h,className:"inline-flex h-7 items-center rounded-md border border-emerald-200 bg-emerald-50 px-2.5 text-[11px] font-semibold text-emerald-700 transition hover:bg-emerald-100 disabled:opacity-60",children:"It's me"}),(0,t.jsx)("button",{type:"button",onClick:()=>eY(e,"deny"),disabled:h,className:"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-[11px] font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Not me"})]})}):null,(0,t.jsxs)("p",{className:"mt-1 text-[10px] text-slate-500",children:[function(e){let t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"Just now";let r=Math.floor((Date.now()-t.getTime())/6e4);if(r<=0)return"Just now";if(r<60)return`${r}m ago`;let a=Math.floor(r/60);if(a<24)return`${a}h ago`;let i=Math.floor(a/24);return i<7?`${i}d ago`:M(t.toISOString())}(e?.createdAt)," | ",String(e?.module||"System")]})]});return(0,t.jsx)("li",{children:s?(0,t.jsx)("div",{className:(0,d.cn)("w-full rounded-lg border px-2.5 py-2 text-left transition",i?"border-sky-200 bg-sky-50/50":"border-slate-200 bg-white"),children:p}):(0,t.jsx)("button",{type:"button",onClick:()=>e$(e),disabled:!n,"aria-disabled":!n,title:n?"Open notification":"You do not have access to open this notification target.",className:(0,d.cn)("w-full rounded-lg border px-2.5 py-2 text-left transition",n?"hover:bg-slate-50":"cursor-default",i?"border-sky-200 bg-sky-50/50":"border-slate-200 bg-white"),children:p})},a)})})})]})]}),eI?(0,t.jsx)(a.default,{href:"/settings",className:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-slate-300 bg-white text-slate-700 transition hover:border-sky-300 hover:bg-sky-50/60","aria-label":"Open settings",title:"Settings",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4.5 w-4.5","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M9.9 4.8h4.2l.7 2 2.1.9 1.9-1.1 2.1 3.6-1.6 1.4v2.4l1.6 1.4-2.1 3.6-1.9-1.1-2.1.9-.7 2H9.9l-.7-2-2.1-.9-1.9 1.1-2.1-3.6 1.6-1.4v-2.4l-1.6-1.4 2.1-3.6 1.9 1.1 2.1-.9.7-2Z"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"2.7"})]})}):null,(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{ref:ek,type:"button",onClick:()=>{z?eW():(H({firstName:String(V?.firstName||""),middleName:String(V?.middleName||""),lastName:String(V?.lastName||""),profilePhotoDataUrl:String(V?.profilePhotoDataUrl||""),profilePhotoStoragePath:String(V?.profilePhotoStoragePath||""),phoneVerifiedAt:String(V?.phoneVerifiedAt||""),phoneLast4:String(V?.phoneLast4||""),smsMfaEnabled:!!V?.smsMfaEnabled}),K(!1),Z(!0),W&&eH())},disabled:F,className:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-slate-300 bg-white text-slate-700 transition hover:border-sky-300 hover:bg-sky-50/50 disabled:cursor-wait disabled:opacity-70","aria-label":"Open account profile",title:"Account profile","aria-expanded":z,children:eM?(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center overflow-hidden rounded-lg border border-slate-200 bg-white",children:(0,t.jsx)(i.default,{src:eM,alt:"Profile picture",width:32,height:32,className:"h-full w-full object-cover",unoptimized:!0})}):(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900 text-xs font-semibold text-white",children:e_})}),(0,t.jsxs)("div",{ref:eE,role:"dialog","aria-label":"Account profile","aria-hidden":!z,className:(0,d.cn)("absolute right-0 top-[calc(100%+0.6rem)] z-50 w-[min(94vw,42rem)] max-h-[calc(100dvh-7rem)] origin-top-right overflow-y-auto overscroll-contain rounded-2xl border border-slate-200 bg-white p-4 shadow-[0_22px_60px_-28px_rgba(15,23,42,0.45)] transition-all duration-200 sm:p-5",z?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none -translate-y-2 opacity-0"),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Account Profile"}),(0,t.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Update your name and profile picture."})]}),(0,t.jsx)("button",{type:"button",onClick:eW,disabled:eh||ex||eb,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-70","aria-label":"Close profile panel",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[Y.profilePhotoDataUrl?(0,t.jsx)("span",{className:"inline-flex h-14 w-14 items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-white",children:(0,t.jsx)(i.default,{src:Y.profilePhotoDataUrl,alt:"Profile preview",width:56,height:56,className:"h-full w-full object-cover",unoptimized:!0})}):(0,t.jsx)("span",{className:"inline-flex h-14 w-14 items-center justify-center rounded-xl bg-slate-900 text-sm font-semibold text-white",children:e_}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ej.current?.click(),disabled:ex||eh||eb,className:"inline-flex h-9 items-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-semibold text-slate-700 transition hover:bg-slate-50",children:ex?"Uploading...":"Upload Photo"}),(0,t.jsx)("button",{type:"button",onClick:()=>{H(e=>({...e,profilePhotoDataUrl:"",profilePhotoStoragePath:""}))},disabled:ex||eh||eb,className:"inline-flex h-9 items-center rounded-lg border border-rose-200 bg-rose-50 px-3 text-xs font-semibold text-rose-700 transition hover:bg-rose-100",children:"Remove"}),(0,t.jsx)("input",{ref:ej,type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",className:"hidden",onChange:eG})]})]}),(0,t.jsxs)("div",{className:"grid gap-2.5 sm:grid-cols-3",children:[(0,t.jsx)("input",{value:Y.firstName,onChange:eF("firstName"),placeholder:"First name",className:"h-10 rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,t.jsx)("input",{value:Y.middleName,onChange:eF("middleName"),placeholder:"Middle name",className:"h-10 rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,t.jsx)("input",{value:Y.lastName,onChange:eF("lastName"),placeholder:"Last name",className:"h-10 rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsx)("section",{className:"rounded-xl border border-slate-200 bg-slate-50/70 p-3",children:(0,t.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Account Role"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:eD})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Role"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:eO})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee ID"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.employeeId||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Name"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.employeeName||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Email"}),(0,t.jsx)("p",{className:"truncate text-sm font-medium text-slate-900",children:ew.employeeEmail||B})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Department"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.department||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Position"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.jobTitle||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Status"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.employmentStatus||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Record Status"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.recordStatus||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Start Date"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:!(x=(c=ew.hireDate)?new Date(c):null)||Number.isNaN(x.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(x)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Manager"}),(0,t.jsx)("p",{className:"truncate text-sm font-medium text-slate-900",children:ew.managerEmail||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Last Login"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:M(ew.lastLoginAt)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Last Active"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:ew.lastActiveDevice||"Unknown device"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Source IP"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:(g=String(ew.lastActiveIp||"").trim())&&"unknown"!==g.toLowerCase()?new Set(["::1","127.0.0.1","::ffff:127.0.0.1"]).has(g.toLowerCase())?`Loopback (${g})`:g:"Unknown"})]})]})})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:eB,disabled:O||eh||ex||eb,className:"inline-flex h-9 items-center rounded-lg border border-rose-200 bg-rose-50 px-3 text-xs font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-70",children:O?"Signing out...":"Sign out"}),(0,t.jsx)("button",{type:"button",onClick:eZ,disabled:eb||O||eh||ex,className:"inline-flex h-9 items-center rounded-lg border border-amber-300 bg-amber-50 px-3 text-xs font-semibold text-amber-800 transition hover:bg-amber-100 disabled:opacity-70",children:eb?"Revoking...":"Sign out all devices"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:eW,disabled:eh||ex||eb,className:"inline-flex h-9 items-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-70",children:"Cancel"}),(0,t.jsx)("button",{type:"button",onClick:ez,disabled:eh||ex||eb,className:"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:ex?"Uploading...":eh?"Saving...":"Save Profile"})]})]})]})]})]})]}),(0,t.jsx)("main",{id:"main-content",className:"min-h-0 flex-1 overflow-y-auto bg-slate-100/70 px-5 py-5 sm:px-6 sm:py-6 lg:px-8 lg:py-7",children:e})]})]})]})}e.s(["default",()=>D],87748)}]);