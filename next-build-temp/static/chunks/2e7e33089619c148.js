(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38418,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(80064);function l(e){let l,i,r,n=(0,s.c)(10),{title:d,subtitle:o,className:c,children:x,action:m}=e;return n[0]!==c?(l=(0,a.cn)("rounded-2xl border border-slate-200 bg-white p-5 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)]",c),n[0]=c,n[1]=l):l=n[1],n[2]!==m||n[3]!==o||n[4]!==d?(i=(d||o||m)&&(0,t.jsxs)("header",{className:"mb-4 flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[d&&(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:d}),o&&(0,t.jsx)("p",{className:"text-sm text-slate-600",children:o})]}),m]}),n[2]=m,n[3]=o,n[4]=d,n[5]=i):i=n[5],n[6]!==x||n[7]!==l||n[8]!==i?(r=(0,t.jsxs)("section",{className:l,children:[i,x]}),n[6]=x,n[7]=l,n[8]=i,n[9]=r):r=n[9],r}e.s(["default",()=>l])},97256,e=>{"use strict";function t(e={}){let s=new URLSearchParams;Object.entries(e).forEach(([e,t])=>{if(null==t)return;let a=String(t).trim();a&&s.set(e,a)});let a=s.toString();return a?`?${a}`:""}async function s(e){if((e.headers.get("content-type")||"").includes("text/csv"))return await e.text();let t=await e.json().catch(()=>({}));if(!e.ok)throw Error(t?.message||"Request failed.");return t}async function a(e,t={}){let l=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{}},cache:"no-store"});return await s(l)}async function l(e,t={}){let s=await fetch(e,{...t,cache:"no-store"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.message||"Export failed.")}return await s.text()}e.s(["hrisApi",0,{employees:{list:async(e={})=>await a(`/api/hris/employees${t(e)}`,{method:"GET"}),get:async e=>await a(`/api/hris/employees/${encodeURIComponent(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/employees",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/employees/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)}),archive:async e=>await a(`/api/hris/employees/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify({status:"Archived"})}),logDocumentAccess:async(e,t)=>await a(`/api/hris/employees/${encodeURIComponent(e)}/documents/access`,{method:"POST",body:JSON.stringify(t||{})})},lifecycle:{list:async(e={})=>await a(`/api/hris/lifecycle${t(e)}`,{method:"GET"}),get:async e=>await a(`/api/hris/lifecycle/${encodeURIComponent(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/lifecycle",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/lifecycle/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)}),offboard:async(e,t={})=>await a(`/api/hris/lifecycle/${encodeURIComponent(e)}/offboard`,{method:"POST",body:JSON.stringify(t)}),approve:async(e,t={})=>await a(`/api/hris/lifecycle/${encodeURIComponent(e)}/approve`,{method:"POST",body:JSON.stringify(t)})},attendance:{list:async(e={})=>await a(`/api/hris/attendance${t(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/attendance",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/attendance/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)})},leave:{list:async(e={})=>await a(`/api/hris/attendance/leave-requests${t(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/attendance/leave-requests",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/attendance/leave-requests/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)}),approve:async(e,{approved:t,approvalNote:s})=>await a(`/api/hris/attendance/leave-requests/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify({status:t?"Approved":"Rejected",approvalNote:s||""})})},performance:{list:async(e={})=>await a(`/api/hris/performance${t(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/performance",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/performance/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)})},templates:{list:async(e={})=>await a(`/api/hris/templates${t(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/templates",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/templates/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)}),archive:async e=>await a(`/api/hris/templates/${encodeURIComponent(e)}`,{method:"DELETE"})},activityLogs:{list:async(e={})=>await a(`/api/hris/activity-logs${t(e)}`,{method:"GET"}),async exportCsv(e={}){let s=t({...e,export:"csv"});return await l(`/api/hris/activity-logs${s}`,{method:"GET"})}},exports:{list:async(e={})=>await a(`/api/hris/exports${t(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/exports",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/exports/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)}),approve:async(e,t)=>await a(`/api/hris/exports/${encodeURIComponent(e)}/approve`,{method:"POST",body:JSON.stringify(t)}),execute:async e=>await l(`/api/hris/exports/${encodeURIComponent(e)}/execute`,{method:"POST"})},retention:{list:async(e={})=>await a(`/api/hris/retention${t(e)}`,{method:"GET"}),purge:async(e={})=>await a("/api/hris/retention",{method:"POST",body:JSON.stringify(e)})},incidents:{list:async(e={})=>await a(`/api/hris/incidents${t(e)}`,{method:"GET"}),get:async e=>await a(`/api/hris/incidents/${encodeURIComponent(e)}`,{method:"GET"}),create:async e=>await a("/api/hris/incidents",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await a(`/api/hris/incidents/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)})},settings:{referenceData:{list:async()=>await a("/api/hris/settings/reference-data",{method:"GET"}),create:async e=>await a("/api/hris/settings/reference-data",{method:"POST",body:JSON.stringify(e)}),remove:async e=>await a("/api/hris/settings/reference-data",{method:"DELETE",body:JSON.stringify(e)})}}}])},93096,e=>{"use strict";var t=e.i(43476),s=e.i(932);function a(e){let a,l,i,r=(0,s.c)(7),{title:n,subtitle:d}=e;return r[0]!==n?(a=(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:n}),r[0]=n,r[1]=a):a=r[1],r[2]!==d?(l=d?(0,t.jsx)("p",{className:"mt-1 text-xs text-slate-600",children:d}):null,r[2]=d,r[3]=l):l=r[3],r[4]!==a||r[5]!==l?(i=(0,t.jsxs)("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50/80 px-4 py-5 text-center",children:[a,l]}),r[4]=a,r[5]=l,r[6]=i):i=r[6],i}e.s(["default",()=>a])},77135,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(80064);let l={critical:"bg-rose-100 text-rose-700 ring-1 ring-rose-200",high:"bg-orange-100 text-orange-700 ring-1 ring-orange-200",medium:"bg-amber-100 text-amber-700 ring-1 ring-amber-200",low:"bg-emerald-100 text-emerald-700 ring-1 ring-emerald-200",open:"bg-cyan-100 text-cyan-700 ring-1 ring-cyan-200",containment:"bg-blue-100 text-blue-700 ring-1 ring-blue-200",investigating:"bg-indigo-100 text-indigo-700 ring-1 ring-indigo-200",escalated:"bg-violet-100 text-violet-700 ring-1 ring-violet-200","regulatory review":"bg-fuchsia-100 text-fuchsia-700 ring-1 ring-fuchsia-200",resolved:"bg-teal-100 text-teal-700 ring-1 ring-teal-200",closed:"bg-slate-200 text-slate-700 ring-1 ring-slate-300",active:"bg-emerald-100 text-emerald-700",approved:"bg-emerald-100 text-emerald-700",completed:"bg-sky-100 text-sky-700",exported:"bg-sky-100 text-sky-700",pending:"bg-amber-100 text-amber-700",rejected:"bg-rose-100 text-rose-700",failed:"bg-rose-100 text-rose-700",archived:"bg-slate-200 text-slate-700","in progress":"bg-indigo-100 text-indigo-700"};function i(e){let i,r,n=(0,s.c)(6),{value:d,className:o}=e,c=l[String(d||"").trim().toLowerCase()]||"bg-slate-100 text-slate-700";n[0]!==o||n[1]!==c?(i=(0,a.cn)("inline-flex rounded-md px-2 py-1 text-xs font-medium",c,o),n[0]=o,n[1]=c,n[2]=i):i=n[2];let x=d||"N/A";return n[3]!==i||n[4]!==x?(r=(0,t.jsx)("span",{className:i,children:x}),n[3]=i,n[4]=x,n[5]=r):r=n[5],r}e.s(["default",()=>i])},46670,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(80064);function l(e){let l,i,r,n=(0,s.c)(12),{tabs:d,value:o,onChange:c,className:x}=e;if(n[0]!==x?(l=(0,a.cn)("flex gap-2 overflow-x-auto pb-1 sm:flex-wrap sm:overflow-visible",x),n[0]=x,n[1]=l):l=n[1],n[2]!==c||n[3]!==d||n[4]!==o){let e;n[6]!==c||n[7]!==o?(e=e=>{let s=e.id===o;return(0,t.jsx)("button",{type:"button",onClick:()=>c(e.id),className:(0,a.cn)("whitespace-nowrap rounded-lg border px-3 py-1.5 text-xs font-medium transition",s?"border-sky-300 bg-sky-50 text-sky-700":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"),children:e.label},e.id)},n[6]=c,n[7]=o,n[8]=e):e=n[8],i=d.map(e),n[2]=c,n[3]=d,n[4]=o,n[5]=i}else i=n[5];return n[9]!==l||n[10]!==i?(r=(0,t.jsx)("div",{className:l,children:i}),n[9]=l,n[10]=i,n[11]=r):r=n[11],r}e.s(["default",()=>l])},270,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(38418),l=e.i(93096),i=e.i(46670),r=e.i(77135),n=e.i(97256);let d=[{id:"overview",label:"Retention Overview"},{id:"records",label:"Archived Records"},{id:"purge",label:"Purge Console"}],o=[{value:"all",label:"All States"},{value:"due",label:"Due Now"},{value:"due_soon",label:"Due Soon"},{value:"scheduled",label:"Scheduled"},{value:"no_retention",label:"Missing Retention Date"}],c={due:"Due",due_soon:"Due Soon",scheduled:"Scheduled",no_retention:"No Retention Date"},x="PURGE ARCHIVED DATA",m={generatedAt:"",totalArchived:0,dueNow:0,dueWithinWindow:0,scheduledFuture:0,missingRetentionDate:0,nextDeletionAt:null,oldestArchivedAt:null,dueWithinDays:30,moduleBreakdown:[]},p={retentionYears:5,dueWithinDays:30,generatedAt:"",moduleCatalog:[]},u={q:"",module:"all",status:"all",dueWithinDays:30,page:1,pageSize:20};function h(e){let t=new Date(e||"");return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function g(e){return Number.isFinite(e)?e<0?`${Math.abs(e)} day(s) overdue`:0===e?"Due today":`${e} day(s) left`:"-"}function b({session:e}){let b=String(e?.role||"").trim().toUpperCase(),y="SUPER_ADMIN"===b||"GRC"===b,[f,j]=(0,s.useState)("overview"),[N,v]=(0,s.useState)(u),[w,S]=(0,s.useState)([]),[A,C]=(0,s.useState)(""),[D,R]=(0,s.useState)(m),[T,k]=(0,s.useState)(p),[P,O]=(0,s.useState)({page:1,pageSize:20,total:0,totalPages:1}),[$,E]=(0,s.useState)(!0),[U,I]=(0,s.useState)(!1),[J,M]=(0,s.useState)(""),[G,W]=(0,s.useState)(""),[B,q]=(0,s.useState)(null),[z,H]=(0,s.useState)({cutoff:function(e){let t=new Date(e||Date.now());if(Number.isNaN(t.getTime()))return"";let s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${s}-${a}-${l}T${i}:${r}`}(new Date().toISOString()),confirmation:""}),_=(0,s.useCallback)(async()=>{E(!0),M("");try{let e=await n.hrisApi.retention.list({q:N.q,module:N.module,status:N.status,dueWithinDays:N.dueWithinDays,page:N.page,pageSize:N.pageSize,view:"employee"});S(Array.isArray(e.employeeGroups)?e.employeeGroups:[]),R(e.summary&&"object"==typeof e.summary?e.summary:m),k(e.policy&&"object"==typeof e.policy?e.policy:p),O(e.pagination&&"object"==typeof e.pagination?e.pagination:{page:1,pageSize:N.pageSize,total:0,totalPages:1})}catch(e){S([]),R(m),k(p),O({page:1,pageSize:N.pageSize,total:0,totalPages:1}),M(e.message||"Unable to load retention archive data.")}finally{E(!1)}},[N]);(0,s.useEffect)(()=>{_()},[_]);let L=(0,s.useMemo)(()=>[{id:"all",label:"All Modules"},...(Array.isArray(T.moduleCatalog)?T.moduleCatalog:[]).map(e=>({id:String(e.id||""),label:String(e.label||e.id||"Module")}))],[T.moduleCatalog]),F=Math.max(0,Number(D.dueWithinWindow||0)-Number(D.dueNow||0)),Y=0===P.total?0:(P.page-1)*P.pageSize+1,K=Math.min(P.total,P.page*P.pageSize),V=(0,s.useMemo)(()=>w.find(e=>e.id===A)||null,[w,A]),Q=(e,t)=>{v(s=>({...s,[e]:t,page:1}))},X=e=>{v(t=>{let s=Math.max(1,Math.min(t.page+e,Math.max(1,P.totalPages)));return{...t,page:s}})},Z=()=>{C("")},ee=async e=>{if(e.preventDefault(),M(""),W(""),!y)return void M("You do not have permission to run retention purge.");if(String(z.confirmation||"").trim().toUpperCase()!==x)return void M(`Type "${x}" to confirm purge.`);I(!0);try{let e=await n.hrisApi.retention.purge({cutoff:function(e){let t=String(e||"").trim();if(!t)return"";let s=new Date(t);return Number.isNaN(s.getTime())?"":s.toISOString()}(z.cutoff),confirmation:z.confirmation});q(e?.result||null),W("Retention purge completed."),H(e=>({...e,confirmation:""})),await _()}catch(e){M(e.message||"Unable to run retention purge.")}finally{I(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.default,{tabs:d,value:f,onChange:j}),J?(0,t.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:J}):null,G?(0,t.jsx)("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:G}):null,"overview"===f?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(a.default,{title:"Total Archived",subtitle:"Records currently under retention policy",children:(0,t.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:D.totalArchived})}),(0,t.jsx)(a.default,{title:"Due Now",subtitle:"Records eligible for immediate secure deletion",children:(0,t.jsx)("p",{className:"text-2xl font-semibold text-rose-700",children:D.dueNow})}),(0,t.jsx)(a.default,{title:`Due in ${D.dueWithinDays||T.dueWithinDays} Days`,subtitle:"Upcoming retention deadlines",children:(0,t.jsx)("p",{className:"text-2xl font-semibold text-amber-700",children:F})}),(0,t.jsx)(a.default,{title:"Missing Retention Date",subtitle:"Archived records needing retention schedule",children:(0,t.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:D.missingRetentionDate})})]}),(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,t.jsx)(a.default,{title:"Policy Window",subtitle:"Retention policy currently enforced",children:(0,t.jsxs)("dl",{className:"space-y-2 text-sm text-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("dt",{children:"Retention Period"}),(0,t.jsxs)("dd",{className:"font-semibold text-slate-900",children:[T.retentionYears," years"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("dt",{children:"Next Deletion Window"}),(0,t.jsx)("dd",{className:"font-semibold text-slate-900",children:h(D.nextDeletionAt)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("dt",{children:"Oldest Archived Record"}),(0,t.jsx)("dd",{className:"font-semibold text-slate-900",children:h(D.oldestArchivedAt)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("dt",{children:"Snapshot Generated"}),(0,t.jsx)("dd",{className:"font-semibold text-slate-900",children:h(D.generatedAt)})]})]})}),(0,t.jsx)(a.default,{title:"Lifecycle Stage",subtitle:"Retention and deletion governance flow",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-slate-700",children:[(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Active employment records remain editable by authorized roles."}),(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Separated records shift to archive-only with restricted access."}),(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Post-retention records are securely purged with deletion evidence."})]})}),(0,t.jsx)(a.default,{title:"Archive Controls",subtitle:"Security and audit safeguards",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-slate-700",children:[(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Archived datasets are read-only and traceable."}),(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Purge execution requires explicit confirmation phrase."}),(0,t.jsx)("li",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:"Every purge result is recorded in audit logs."})]})})]}),(0,t.jsx)(a.default,{title:"Module Breakdown",subtitle:"Archived records by module",children:Array.isArray(D.moduleBreakdown)&&D.moduleBreakdown.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Module"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archived Records"})]})}),(0,t.jsx)("tbody",{children:D.moduleBreakdown.map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 last:border-b-0",children:[(0,t.jsx)("td",{className:"px-2 py-3 text-slate-800",children:e.label}),(0,t.jsx)("td",{className:"px-2 py-3 font-semibold text-slate-900",children:e.count})]},`retention-breakdown-${e.id}`))})]})}):(0,t.jsx)(l.default,{title:"No archived records yet",subtitle:"Archive counts will appear once retention records exist."})})]}):null,"records"===f?(0,t.jsxs)(a.default,{title:"Archived Records",subtitle:"Filter archive inventory and retention deletion state",children:[(0,t.jsxs)("div",{className:"grid gap-2 md:grid-cols-5",children:[(0,t.jsx)("input",{value:N.q,onChange:e=>Q("q",e.target.value),placeholder:"Search employee, module, reason",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 placeholder:text-slate-400 focus:border-sky-400 focus:outline-none md:col-span-2"}),(0,t.jsx)("select",{value:N.module,onChange:e=>Q("module",e.target.value),className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:L.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label},`retention-module-${e.id}`))}),(0,t.jsx)("select",{value:N.status,onChange:e=>Q("status",e.target.value),className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:o.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`retention-status-${e.value}`))}),(0,t.jsx)("input",{type:"number",min:1,max:365,value:N.dueWithinDays,onChange:e=>{let t;return Q("dueWithinDays",Number.isFinite(t=Number.parseInt(String(e.target.value??""),10))?t:30)},className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none","aria-label":"Due within days"})]}),(0,t.jsx)("div",{className:"mt-4",children:$?(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Loading archived employee groups..."}):0===w.length?(0,t.jsx)(l.default,{title:"No archived employee groups found",subtitle:"Adjust filters or archive records from lifecycle/offboarding flows."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Modules"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archived Data"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archived At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Retention Delete At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Deletion State"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Countdown"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:w.map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:[(0,t.jsxs)("td",{className:"px-2 py-3",children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:e.employeeName||"Employee"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.employeeEmail||"-"})]}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[Array.isArray(e.moduleBreakdown)&&e.moduleBreakdown.length>0?e.moduleBreakdown.slice(0,3).map(s=>(0,t.jsxs)("span",{className:"inline-flex rounded-md border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] text-slate-700",children:[s.moduleLabel," (",s.count,")"]},`${e.id}-${s.moduleId}`)):(0,t.jsx)("span",{className:"text-xs text-slate-500",children:"-"}),Array.isArray(e.moduleBreakdown)&&e.moduleBreakdown.length>3?(0,t.jsxs)("span",{className:"inline-flex rounded-md border border-slate-200 bg-white px-2 py-0.5 text-[11px] text-slate-600",children:["+",e.moduleBreakdown.length-3]}):null]})}),(0,t.jsxs)("td",{className:"px-2 py-3 text-xs text-slate-600",children:[e.totalRecords||0," item(s)"]}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:h(e.archivedAt)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:h(e.retentionDeleteAt)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(r.default,{value:c[e.deletionState]||e.deletionState||"Unknown"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:g(e.daysToDeletion)}),(0,t.jsx)("td",{className:"px-2 py-3 text-right",children:(0,t.jsx)("button",{type:"button",onClick:()=>{C(String(e.id||"").trim())},className:"inline-flex h-8 items-center justify-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-medium text-slate-700 transition hover:bg-slate-100",children:"View"})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:[(0,t.jsxs)("p",{children:["Showing ",Y,"-",K," of ",P.total," employees"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>X(-1),disabled:P.page<=1||$,className:"inline-flex h-8 items-center justify-center rounded-lg border border-slate-300 bg-white px-3 font-medium text-slate-700 transition hover:bg-slate-100 disabled:opacity-60",children:"Previous"}),(0,t.jsxs)("span",{className:"text-slate-700",children:["Page ",P.page," of ",Math.max(1,P.totalPages)]}),(0,t.jsx)("button",{type:"button",onClick:()=>X(1),disabled:P.page>=P.totalPages||$,className:"inline-flex h-8 items-center justify-center rounded-lg border border-slate-300 bg-white px-3 font-medium text-slate-700 transition hover:bg-slate-100 disabled:opacity-60",children:"Next"})]})]}),V?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 p-4",role:"dialog","aria-modal":"true","aria-label":"Retention Group Details",onClick:Z,children:(0,t.jsxs)("div",{className:"w-full max-w-6xl rounded-2xl border border-slate-200 bg-white p-4 shadow-2xl sm:p-5",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-slate-900",children:"Retention Details"}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[V.employeeName||"Employee"," ",V.employeeEmail?`(${V.employeeEmail})`:""]})]}),(0,t.jsx)("button",{type:"button",onClick:Z,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50","aria-label":"Close retention details",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsxs)("div",{className:"mb-3 grid gap-2 sm:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Archived Data"}),(0,t.jsx)("p",{className:"mt-1 text-base font-semibold text-slate-900",children:V.totalRecords||0})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Next Deletion"}),(0,t.jsx)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:h(V.retentionDeleteAt)})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Deletion State"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(r.default,{value:c[V.deletionState]||V.deletionState||"Unknown"})})]})]}),(0,t.jsx)("div",{className:"max-h-[50vh] overflow-auto rounded-lg border border-slate-200",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Module"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Record"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archived At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Retention Delete At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"State"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Countdown"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Reason"})]})}),(0,t.jsx)("tbody",{children:(V.records||[]).map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:[(0,t.jsx)("td",{className:"px-2 py-3 text-slate-900",children:e.moduleLabel||"-"}),(0,t.jsxs)("td",{className:"px-2 py-3",children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:e.title||e.recordId||"-"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.subtitle||"-"})]}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:h(e.archivedAt)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:h(e.retentionDeleteAt)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(r.default,{value:c[e.deletionState]||e.deletionState||"Unknown"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:g(e.daysToDeletion)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:e.archiveReason||"-"})]},e.id))})]})})]})}):null]}):null,"purge"===f?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(a.default,{title:"Purge Readiness",subtitle:"Deletion scope based on current retention state",children:(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"Due Now"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-rose-700",children:D.dueNow})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"Due Window"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-amber-700",children:D.dueWithinWindow})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"Scheduled Future"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:D.scheduledFuture})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"Missing Retention Date"}),(0,t.jsx)("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:D.missingRetentionDate})]})]})}),(0,t.jsxs)(a.default,{title:"Run Retention Purge",subtitle:"Purge removes records with retentionDeleteAt less than or equal to cutoff",children:[(0,t.jsxs)("form",{className:"grid gap-3 md:grid-cols-3",onSubmit:ee,children:[(0,t.jsxs)("label",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium uppercase tracking-[0.08em] text-slate-600",children:"Cutoff Date & Time"}),(0,t.jsx)("input",{type:"datetime-local",value:z.cutoff,onChange:e=>H(t=>({...t,cutoff:e.target.value})),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium uppercase tracking-[0.08em] text-slate-600",children:"Confirmation Phrase"}),(0,t.jsx)("input",{value:z.confirmation,onChange:e=>H(t=>({...t,confirmation:e.target.value})),placeholder:x,className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 placeholder:text-slate-400 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"md:col-span-3 flex items-center justify-between gap-3",children:[(0,t.jsxs)("p",{className:"text-xs text-slate-600",children:["Required phrase: ",(0,t.jsx)("span",{className:"font-semibold text-slate-900",children:x})]}),(0,t.jsx)("button",{type:"submit",disabled:U||!y,className:"inline-flex h-9 items-center justify-center rounded-lg bg-rose-600 px-4 text-xs font-semibold text-white transition hover:bg-rose-700 disabled:cursor-not-allowed disabled:opacity-60",children:U?"Purging...":"Run Purge"})]})]}),y?null:(0,t.jsx)("p",{className:"mt-3 text-xs text-amber-700",children:"Current role does not have retention purge permission."})]}),(0,t.jsx)(a.default,{title:"Latest Purge Result",subtitle:"Most recent deletion outcome from this console",children:B?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-xs text-slate-600",children:["Cutoff: ",h(B.cutoff)]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Collection"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Deleted Records"})]})}),(0,t.jsxs)("tbody",{children:[Object.entries(B.deletedByCollection||{}).map(([e,s])=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 last:border-b-0",children:[(0,t.jsx)("td",{className:"px-2 py-3 text-slate-800",children:e}),(0,t.jsx)("td",{className:"px-2 py-3 font-semibold text-slate-900",children:s})]},`purge-result-${e}`)),(0,t.jsxs)("tr",{className:"border-b border-slate-100 last:border-b-0",children:[(0,t.jsx)("td",{className:"px-2 py-3 text-slate-800",children:"user_accounts"}),(0,t.jsx)("td",{className:"px-2 py-3 font-semibold text-slate-900",children:B?.deletedUsers?.deletedUsers||0})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-2 py-3 text-slate-800",children:"user_invites"}),(0,t.jsx)("td",{className:"px-2 py-3 font-semibold text-slate-900",children:B?.deletedUsers?.deletedInvites||0})]})]})]})})]}):(0,t.jsx)(l.default,{title:"No purge executed yet",subtitle:"Run retention purge to view deletion metrics."})})]}):null]})}e.s(["default",()=>b])}]);