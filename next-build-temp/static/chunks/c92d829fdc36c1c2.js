(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90177,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(38418),s=e.i(93096),r=e.i(94106),i=e.i(77135),n=e.i(74923),o=e.i(12554),d=e.i(13634),c=e.i(97256),m=e.i(32295),p=e.i(9968);let x=[{id:"workflow-status-tracking",label:"Workflow Status Tracking"},{id:"onboarding",label:"Onboarding"},{id:"role-changes",label:"Role Changes"},{id:"disciplinary-records",label:"Disciplinary Records"},{id:"offboarding-access-revocation",label:"Offboarding + Access Revocation"}],u={onboarding:"Onboarding","role-changes":"Role Change","disciplinary-records":"Disciplinary","offboarding-access-revocation":"Offboarding"},f={"workflow-status-tracking":"Unified tracking view across onboarding, role changes, disciplinary actions, and offboarding.",onboarding:"Employee onboarding workflows with activation and completion tracking.","role-changes":"Role/department movement workflows with effectivity details.","disciplinary-records":"Disciplinary case workflows with controlled updates and timeline visibility.","offboarding-access-revocation":"Offboarding workflows with access revocation and account disablement trail."},h={disciplinary:[{id:"incident-report",label:"Incident Report",keywords:["incident","report"]},{id:"notice-to-explain",label:"Notice to Explain / Written Explanation",keywords:["notice","explain","written explanation","explanation"]},{id:"decision-memo",label:"Decision Memo",keywords:["decision","memo"]}],offboarding:[{id:"resignation-termination",label:"Resignation / Termination Document",keywords:["resignation","termination","termination notice"]},{id:"clearance-form",label:"Clearance Form",keywords:["clearance"]},{id:"handover-exit",label:"Handover / Exit Checklist",keywords:["handover","exit checklist","exit interview"]}]},g=[{value:"SUPER_ADMIN",label:"Super Admin"},{value:"GRC",label:"Governance, Risk, and Compliance (GRC)"},{value:"HR",label:"Human Resources (HR)"},{value:"EA",label:"Executive Assistant (EA)"},{value:"EMPLOYEE_L1",label:"Employee (L1)"},{value:"EMPLOYEE_L2",label:"Employee (L2)"},{value:"EMPLOYEE_L3",label:"Employee (L3)"}],b=new Map([["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"]]),y=[{value:"Governance, Risk, and Compliance (GRC)",label:"Governance, Risk, and Compliance (GRC)"},{value:"Research and Development (R&D)",label:"Research and Development (R&D)"},{value:"Cyber Security Operations Center (CSOC)",label:"Cyber Security Operations Center (CSOC)"},{value:"Threat Intelligence (TI)",label:"Threat Intelligence (TI)"}],j=["On-site","Hybrid","Remote"],N=new Map([["SUPER_ADMIN","Super Admin"],["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"],["EMPLOYEE","Employee (L1)"],["EMPLOYEE_L1","Employee (L1)"],["EMPLOYEE_L2","Employee (L2)"],["EMPLOYEE_L3","Employee (L3)"]]),v=new Set(["SUPER_ADMIN","GRC","HR","EA","EMPLOYEE","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),w=new Set(["GRC","HR","EA","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),k={employeeRecordId:"",employeeEmail:"",employee:"",category:"Onboarding",owner:"",status:"In Progress",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",roleTo:"",departmentFrom:"",departmentTo:"",effectiveDate:"",justification:"",details:""};function E(e){let t=new Date(e||"");return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function S(e){let t=new Date(e||"");return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(t)}function A(e){return String(e||"").trim().toLowerCase()}function C(e){let t=A(e);return t?t.includes("disciplin")?"disciplinary":t.includes("offboard")||t.includes("resign")||t.includes("terminate")?"offboarding":t.includes("role")||t.includes("promotion")?"role-change":"onboarding":"onboarding"}function R(e){return String(e||"").trim()||"-"}function D(e){let t=Number(e);return!Number.isFinite(t)||t<=0?"0 B":t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function L(e){return String(e||"").trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,"")}function M(e){let t=L(e);return t?N.get(t)||e:"-"}function F(e){return Array.isArray(e)?e:[]}function O(e,t){let a=[],l=new Set;return[...F(e),...F(t)].forEach(e=>{let t,s,r=(t=String(e?.value||"").trim(),s=String(e?.label||t).trim(),t?{value:t,label:s||t}:null);if(!r)return;let i=A(`${r.value}::${r.label}`);!i||l.has(i)||(l.add(i),a.push(r))}),a}function I(e){return"role change"===A(e)}function $(e){return"onboarding"===A(e)}function P(e){return e?.details&&"object"==typeof e.details?e.details:{}}function T(e){return(0,d.formatEmployeeName)({firstName:e?.onboardingFirstName,middleName:e?.onboardingMiddleName,lastName:e?.onboardingLastName,suffix:e?.onboardingSuffix,fallback:e?.employee,fallbackEmail:e?.employeeEmail,fallbackLabel:"Employee"})}function U(e){return(Array.isArray(e)?e:[]).map(e=>"string"==typeof e?e.trim():String(e?.message||"").trim()).filter(Boolean).join(" ")}function B(e){let t=A(e?.category);return t.includes("offboard")||t.includes("resign")||t.includes("terminate")}function _(e){let t=h[C(e?.workflowType||e?.category)]||[];if(0===t.length)return{required:[],matched:[],missing:[],complete:!0};let a=(Array.isArray(e?.evidence)?e.evidence:[]).map(e=>A([e?.name,e?.type,e?.note].filter(Boolean).join(" "))),l=[],s=[];return t.forEach(e=>{let t=Array.isArray(e.keywords)?e.keywords.map(e=>A(e)).filter(Boolean):[],r=a.some(e=>t.some(t=>e.includes(t))),i={id:e.id,label:e.label};r?l.push(i):s.push(i)}),{required:t.map(e=>({id:e.id,label:e.label})),matched:l,missing:s,complete:0===s.length}}function W({session:e}){let N,F,W=(0,n.useToast)(),z=(0,o.useConfirm)(),G=e?.role||"EMPLOYEE_L1",Y=L(G),q=!String(G||"").trim().toUpperCase().startsWith("EMPLOYEE_"),H=(N=String(e?.email||"").trim().toLowerCase(),F=(0,d.formatPersonName)({firstName:e?.firstName,middleName:e?.middleName,lastName:e?.lastName,fallbackEmail:N,fallbackLabel:"System"}),N&&F.toLowerCase()!==N?`${F} (${N})`:F),[K,J]=(0,a.useState)("workflow-status-tracking"),[Z,Q]=(0,a.useState)([]),[V,X]=(0,a.useState)(!0),[ee,et]=(0,a.useState)(""),[ea,el]=(0,a.useState)(""),[es,er]=(0,a.useState)(!1),[ei,en]=(0,a.useState)(k),[eo,ed]=(0,a.useState)(!1),[ec,em]=(0,a.useState)(!1),[ep,ex]=(0,a.useState)(""),[eu,ef]=(0,a.useState)(""),[eh,eg]=(0,a.useState)(1),[eb,ey]=(0,a.useState)([]),[ej,eN]=(0,a.useState)(!1),[ev,ew]=(0,a.useState)(""),[ek,eE]=(0,a.useState)({roles:g,departments:y}),[eS,eA]=(0,a.useState)(!1),[eC,eR]=(0,a.useState)(""),[eD,eL]=(0,a.useState)([]),[eM,eF]=(0,a.useState)([]),[eO,eI]=(0,a.useState)([]),e$=(0,a.useRef)(null),eP=(0,a.useMemo)(()=>x.find(e=>e.id===K)||x[0],[K]),eT=u[K]||"",eU=f[K]||f["workflow-status-tracking"],eB=(0,a.useMemo)(()=>{let e=O(ek.roles,g),t=new Map;return e.forEach(e=>{let a=L(e?.value);if(!a)return;let l=b.get(a),s={value:String(e.value||"").trim(),label:l||String(e.label||e.value||"").trim()};t.has(a)||t.set(a,s)}),b.forEach((e,a)=>{t.has(a)||t.set(a,{value:a,label:e})}),Array.from(t.values())},[ek.roles]),e_=(0,a.useMemo)(()=>O(ek.departments,y),[ek.departments]),eW=(0,a.useMemo)(()=>eB.filter(e=>{let t,a=L(e.value);return!!a&&!!v.has(a)&&("SUPER_ADMIN"===Y||("GRC"===Y?w.has(a):"EMPLOYEE"===(t=L(e.value))||t.startsWith("EMPLOYEE_")))}),[Y,eB]),ez=(0,a.useCallback)(async()=>{X(!0),et("");try{let e=await c.hrisApi.lifecycle.list();Q(Array.isArray(e.records)?e.records:[])}catch(e){et(e.message||"Unable to load lifecycle records.")}finally{X(!1)}},[]);(0,a.useEffect)(()=>{ez()},[ez]);let eG=(0,a.useCallback)(async()=>{if(!q)return void eE({roles:g,departments:y});eA(!0);try{let e=await c.hrisApi.settings.referenceData.list();eE({roles:O(e?.catalogs?.roles,g),departments:O(e?.catalogs?.departments,y)})}catch{eE({roles:g,departments:y})}finally{eA(!1)}},[q]);(0,a.useEffect)(()=>{eG()},[eG]);let eY=(0,a.useCallback)(async()=>{if(q){eN(!0),ew("");try{let e=await c.hrisApi.employees.list({page:1,pageSize:200}),t=Array.isArray(e?.records)?e.records:[],a=[],l=new Set;t.forEach(e=>{let t=function(e){let t=String(e?.id||"").trim(),a=String(e?.email||"").trim().toLowerCase();return t&&a?{id:t,email:a,name:(0,d.formatEmployeeName)({firstName:e?.firstName,middleName:e?.middleName,lastName:e?.lastName,suffix:e?.suffix,fallback:e?.name,fallbackEmail:e?.email,fallbackLabel:"Unnamed Employee"}),currentRole:String(e?.role||"").trim(),currentDepartment:String(e?.department||"").trim()}:null}(e);!t||l.has(t.id)||(l.add(t.id),a.push(t))}),ey(a)}catch(e){ey([]),ew(e.message||"Unable to load employee directory options.")}finally{eN(!1)}}},[q]);(0,a.useEffect)(()=>{eY()},[eY]),(0,a.useEffect)(()=>{en(e=>({...e,owner:H}))},[H]),(0,a.useEffect)(()=>{q&&0!==eb.length&&en(e=>{if($(e.category)||e.employeeRecordId&&eb.some(t=>t.id===e.employeeRecordId))return e;let t=eb[0];return{...e,employeeRecordId:t.id,employee:t.name,employeeEmail:t.email,onboardingRole:t.currentRole||"",onboardingDepartment:t.currentDepartment||"",roleFrom:t.currentRole||"",departmentFrom:t.currentDepartment||""}})},[q,eb]),(0,a.useEffect)(()=>{if(!eo)return;let e=document.body.style.overflow,t=e=>{"Escape"!==e.key||es||ed(!1)};return document.body.style.overflow="hidden",window.addEventListener("keydown",t),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t)}},[eo,es]),(0,a.useEffect)(()=>{let e=new Set(x.map(e=>e.id)),t=(t=window.location.hash)=>{let a=String(t||"").replace(/^#/,"").trim().toLowerCase();if(!a)return void J("workflow-status-tracking");let l=x.find(e=>(0,m.toSubTabAnchor)(e.id)===a);l&&e.has(l.id)&&J(l.id)},a=e=>{let a=e?.detail?.anchor;a?t(a):t()};return t(),window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("clio:subtab-anchor",a),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t),window.removeEventListener("clio:subtab-anchor",a)}},[]);let eq=(0,a.useMemo)(()=>Z.filter(e=>{let t="workflow-status-tracking"===K||A(e.category).includes(A(u[K])),a=!ep||A(e.status).includes(A(ep)),l=!eu||[e.employee,e.employeeEmail,e.category,e.owner,e.status].map(e=>A(e)).some(e=>e.includes(A(eu)));return t&&a&&l}),[Z,K,ep,eu]),eH=(0,a.useMemo)(()=>{let e=eq.length,t=Math.max(1,Math.ceil(e/10));return{page:Math.min(Math.max(1,eh),t),pageSize:10,total:e,totalPages:t}},[eq.length,eh]),eK=(0,a.useMemo)(()=>{let e=(eH.page-1)*eH.pageSize;return eq.slice(e,e+eH.pageSize)},[eq,eH.page,eH.pageSize]);(0,a.useEffect)(()=>{eg(1)},[K,eu,ep]),(0,a.useEffect)(()=>{eh>eH.totalPages&&eg(eH.totalPages)},[eh,eH.totalPages]),(0,a.useEffect)(()=>{if(0===eq.length){eR(""),em(!1);return}eC&&!eq.some(e=>e.id===eC)&&(eR(""),em(!1))},[eq,eC]),(0,a.useEffect)(()=>{if(!ec)return;let e=document.body.style.overflow,t=e=>{"Escape"!==e.key||es||em(!1)};return document.body.style.overflow="hidden",window.addEventListener("keydown",t),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t)}},[ec,es]);let eJ=(0,a.useMemo)(()=>Z.find(e=>e.id===eC)||null,[Z,eC]),eZ=Array.isArray(eJ?.workflow?.checklist)?eJ.workflow.checklist:[],eQ=Array.isArray(eJ?.workflow?.stages)?eJ.workflow.stages:[],eV=Number.isFinite(Number(eJ?.workflow?.stageIndex))?Number(eJ.workflow.stageIndex):0,eX=Array.isArray(eJ?.evidence)?eJ.evidence:[],e0=(0,a.useMemo)(()=>_(eJ),[eJ]),e1=(0,a.useMemo)(()=>h[C(ei.category)]||[],[ei.category]),e2=(0,a.useMemo)(()=>C(ei.category),[ei.category]),e3=(0,a.useMemo)(()=>"disciplinary"===e2?eM:"offboarding"===e2?eO:eD,[e2,eM,eO,eD]),e5=(0,a.useMemo)(()=>{let e=eq.filter(e=>{let t=A(e.status);return t.includes("in progress")||t.includes("pending")}).length,t=eq.filter(e=>{let t=A(e.status);return t.includes("approved")||t.includes("completed")}).length;return{total:eq.length,inProgress:e,completed:t}},[eq]),e9=(0,a.useMemo)(()=>[{key:"total",label:"Total",value:e5.total},{key:"in-progress",label:"In Progress",value:e5.inProgress},{key:"completed",label:"Completed",value:e5.completed}],[e5]),e7=e=>t=>{en(a=>({...a,[e]:t.target.value}))},e4=async t=>{if(t.preventDefault(),q){if($(ei.category)){if(!String(ei.employeeEmail||"").trim())return void et("Google account email is required for onboarding.");if(eD.find(e=>e.size>0xa00000)){et("Each onboarding document must be 10MB or below."),W.error("Each onboarding document must be 10MB or below.");return}}if(("disciplinary"===e2||"offboarding"===e2)&&e3.find(e=>e.size>0xa00000)){let e="disciplinary"===e2?"disciplinary":"offboarding";et(`Each ${e} document must be 10MB or below.`),W.error(`Each ${e} document must be 10MB or below.`);return}if(I(ei.category)){let e=String(ei.roleFrom||"").trim(),t=String(ei.roleTo||"").trim();if(!e||!t)return void et("Current role is missing on employee record. Set employee role first, then select new role.");if(!String(ei.departmentFrom||"").trim())return void et("Current department is missing on employee record. Set employee department first.")}if(await z({title:"Create Lifecycle Workflow",message:`Create ${ei.category} workflow for ${R(ei.employeeEmail||ei.employee)}?`,confirmText:"Create"})){er(!0),et(""),el("");try{let t=$(ei.category),a=t?T(ei):ei.employee,l=String(ei.employeeEmail||"").trim(),s=t?ei.activateEmploymentNow&&l?"Approved":"In Progress":ei.status,r=await c.hrisApi.lifecycle.create({employeeEmail:ei.employeeEmail,employee:a,category:ei.category,owner:H,status:s,details:function(e){let t={note:String(e.details||"").trim()};if($(e.category)){let a=String(e.onboardingStartDate||"").trim(),l=String(e.onboardingEmployeeId||"").trim(),s=String(e.onboardingFirstName||"").trim(),r=String(e.onboardingMiddleName||"").trim(),i=String(e.onboardingLastName||"").trim(),n=String(e.onboardingSuffix||"").trim(),o=String(e.onboardingRole||"").trim(),d=String(e.onboardingDepartment||"").trim();t.startDate=a,t.employeeId=l,t.firstName=s,t.middleName=r,t.lastName=i,t.suffix=n,t.role=o,t.roleTo=o,t.department=d,t.departmentTo=d,t.workSetup=String(e.workSetup||"").trim(),t.accountEmail=String(e.employeeEmail||"").trim().toLowerCase(),t.activateEmploymentNow=!!e.activateEmploymentNow}return I(e.category)&&(t.roleFrom=String(e.roleFrom||"").trim(),t.roleTo=String(e.roleTo||"").trim(),t.departmentFrom=String(e.departmentFrom||"").trim(),t.departmentTo=String(e.departmentTo||"").trim(),t.effectiveDate=String(e.effectiveDate||"").trim(),t.justification=String(e.justification||"").trim()),t}(ei)}),i=String(r?.record?.id||"").trim(),n="onboarding"===e2?"Onboarding":"disciplinary"===e2?"Disciplinary":"offboarding"===e2?"Offboarding":"Evidence";if(i&&e3.length>0)for(let t of e3){let a=await (0,p.uploadLifecycleEvidenceToStorage)({file:t,lifecycleRecordId:i,employeeEmail:ei.employeeEmail});await c.hrisApi.lifecycle.update(i,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:String(t.name||"").trim()||"Onboarding Document",type:n,ref:a.downloadUrl,storagePath:a.storagePath,contentType:a.contentType,sizeBytes:a.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:e?.email||"system@gmail.com"}}})}en(k),eL([]),eF([]),eI([]),ed(!1);let o=U(r?.effects),d=e3.length>0?`${e3.length} ${n.toLowerCase()} document${e3.length>1?"s":""} uploaded. `:"",m=o?`${d}Lifecycle workflow created. ${o}`:`${d}Lifecycle workflow created.`,x=t&&ei.activateEmploymentNow&&!l?" Saved as In Progress because account email is blank.":"",u=`${m}${x}`;el(u),W.success(u),await ez()}catch(t){let e=t.message||"Unable to create lifecycle workflow.";et(e),W.error(e)}finally{er(!1)}}}},e8=async(e,t,a)=>{if(e?.id&&t?.id&&q){er(!0),et(""),el("");try{await c.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"toggle-task",taskId:t.id,completed:a}});let l=a?"Checklist task marked as completed.":"Checklist task reverted to pending.";el(l),W.success(l),await ez()}catch(t){let e=t.message||"Unable to update checklist task.";et(e),W.error(e)}finally{er(!1)}}},e6=async(e,t)=>{if(e?.id&&q&&await z({title:"Update Workflow Stage",message:"Update workflow stage for this case?",confirmText:"Update"})&&await z({title:"Update Checklist Task",message:completed?`Mark "${R(task.label)}" as completed?`:`Set "${R(task.label)}" back to pending?`,confirmText:completed?"Mark Complete":"Set Pending"})){er(!0),et(""),el("");try{await c.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"set-stage",stageIndex:t}}),el("Workflow stage updated."),W.success("Workflow stage updated."),await ez()}catch(t){let e=t.message||"Unable to update workflow stage.";et(e),W.error(e)}finally{er(!1)}}},te=async e=>{if(!e?.id||!q)return;let t=_(e);if(!t.complete){let e=`Required offboarding documents are missing: ${t.missing.map(e=>e.label).join(", ")}.`;et(`Required offboarding documents are missing: ${t.missing.map(e=>e.label).join(", ")}.`),W.error(e),el("");return}if(await z({title:"Trigger Offboarding",message:"Trigger immediate offboarding and access revocation for this employee?",confirmText:"Offboard",tone:"danger"})){er(!0),et(""),el("");try{let t=await c.hrisApi.lifecycle.offboard(e.id,{reason:"Resignation"}),a=U(t?.effects);el(a?`Offboarding completed. ${a}`:"Offboarding completed. Access revocation has been triggered."),W.success("Offboarding completed."),await ez()}catch(t){let e=t.message||"Unable to complete offboarding.";et(e),W.error(e)}finally{er(!1)}}},tt=async t=>{let a=t.target.files?.[0];if(!a||!eJ||!q){t.target.value="";return}if(a.size>0xa00000){et("Evidence upload is limited to 10MB per file."),W.error("Evidence upload is limited to 10MB per file."),t.target.value="";return}if(!await z({title:"Upload Evidence",message:`Upload evidence file "${a.name}" to this workflow?`,confirmText:"Upload"})){t.target.value="";return}er(!0),et(""),el("");try{let t=await (0,p.uploadLifecycleEvidenceToStorage)({file:a,lifecycleRecordId:eJ.id,employeeEmail:eJ.employeeEmail});await c.hrisApi.lifecycle.update(eJ.id,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}`,name:String(a.name||"").trim()||"Evidence File",ref:t.downloadUrl,storagePath:t.storagePath,contentType:t.contentType,sizeBytes:t.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:e?.email||"system@gmail.com"}}}),el("Evidence file uploaded."),W.success("Evidence file uploaded."),await ez()}catch(t){let e=t.message||"Unable to upload evidence file.";et(e),W.error(e)}finally{er(!1),t.target.value=""}},ta=async(e,t)=>{if(!e?.id||!t?.id||!q)return;let a=String(t?.name||"evidence file").trim();if(await z({title:"Remove Evidence",message:`Remove evidence "${a}" from this workflow?`,confirmText:"Remove",tone:"danger"})){er(!0),et(""),el("");try{await c.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"remove-evidence",evidenceId:t.id}});let a=String(t?.storagePath||"").trim();a&&(0,p.removeStorageObjectByPath)(a).catch(()=>null),el("Evidence file removed."),W.success("Evidence file removed."),await ez()}catch(t){let e=t.message||"Unable to remove evidence file.";et(e),W.error(e)}finally{er(!1)}}},tl=()=>{es||(eL([]),eF([]),eI([]),ed(!1))},ts=()=>{es||em(!1)},tr=e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:R(e.employee)}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:R(e.employeeEmail)})]}),ti=(e,a)=>{let l,s;return(0,t.jsx)("td",{className:"px-2 py-3 text-right",children:(l=_(e),s=B(e)&&!l.complete,(0,t.jsxs)("div",{className:"inline-flex flex-wrap items-center justify-end gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{var t;(t=e.id)&&(eR(t),em(!0))},className:`rounded-lg border px-2.5 py-1.5 text-xs font-medium transition ${a?"border-sky-300 bg-sky-50 text-sky-700":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:a?"Opened":"Open Workflow"}),q&&B(e)?(0,t.jsx)("button",{type:"button",onClick:()=>te(e),disabled:es||s,title:s?"Attach required offboarding evidence first.":void 0,className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Offboard"}):null]}))})};return(0,t.jsxs)("div",{className:"space-y-4",children:[ee?(0,t.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:ee}):null,ev?(0,t.jsx)("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-700",children:ev}):null,ea?(0,t.jsx)("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:ea}):null,q&&eo?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-slate-900/45 p-4 sm:items-center",role:"dialog","aria-modal":"true","aria-label":"Create Lifecycle Workflow",onClick:tl,children:(0,t.jsxs)("div",{className:"my-4 flex max-h-[calc(100vh-2rem)] w-full max-w-5xl flex-col rounded-2xl border border-slate-200 bg-white p-5 shadow-2xl sm:p-6",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Create Lifecycle Workflow"}),(0,t.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Onboarding, role change, disciplinary, and offboarding actions"})]}),(0,t.jsx)("button",{type:"button",onClick:tl,disabled:es,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-70","aria-label":"Close create workflow modal",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsxs)("form",{className:"mt-4 grid flex-1 gap-3 overflow-y-auto pr-1 md:grid-cols-3",onSubmit:e4,children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Lifecycle Category"}),(0,t.jsxs)("select",{value:ei.category,onChange:e=>{let t=e.target.value,a=C(t),l=$(t);"onboarding"!==a&&eL([]),"disciplinary"!==a&&eF([]),"offboarding"!==a&&eI([]),en(e=>{if(l)return{...e,category:t,employeeRecordId:"",employee:T(e),employeeEmail:"",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",departmentFrom:""};let a=eb.find(t=>t.id===e.employeeRecordId)||eb[0]||null;return{...e,category:t,employeeRecordId:a?.id||e.employeeRecordId||"",employee:a?.name||e.employee||"",employeeEmail:a?.email||e.employeeEmail||"",onboardingRole:a?.currentRole||e.onboardingRole||"",onboardingDepartment:a?.currentDepartment||e.onboardingDepartment||"",roleFrom:a?.currentRole||e.roleFrom||"",departmentFrom:a?.currentDepartment||e.departmentFrom||""}})},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{children:"Onboarding"}),(0,t.jsx)("option",{children:"Role Change"}),(0,t.jsx)("option",{children:"Disciplinary"}),(0,t.jsx)("option",{children:"Offboarding"})]})]}),$(ei.category)?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,t.jsx)("input",{value:ei.activateEmploymentNow?"Approved (auto on create)":"In Progress",readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,t.jsxs)("select",{value:ei.status,onChange:e7("status"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{children:"In Progress"}),(0,t.jsx)("option",{children:"Completed"}),(0,t.jsx)("option",{children:"Approved"}),(0,t.jsx)("option",{children:"Rejected"})]})]}),e1.length>0?(0,t.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 md:col-span-3",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-amber-700",children:"Required Documents For Final Status"}),(0,t.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:e1.map(e=>(0,t.jsx)("span",{className:"inline-flex rounded-md border border-amber-200 bg-white px-2 py-1 text-[11px] font-medium text-amber-700",children:e.label},e.id))}),(0,t.jsx)("p",{className:"mt-1.5 text-[11px] text-amber-700",children:"You cannot set this workflow to Approved/Completed/Access Revoked until all required documents are attached."})]}):null,$(ei.category)?(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 md:col-span-3",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Steps"}),(0,t.jsxs)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:[(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"1. Encode Employee Details"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"2. Upload Documents"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"3. Create Account"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"4. Activate Employment"})]})]}):null,$(ei.category)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Number"}),(0,t.jsx)("input",{value:ei.onboardingEmployeeId,onChange:e7("onboardingEmployeeId"),placeholder:"Employee number",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Last Name"}),(0,t.jsx)("input",{value:ei.onboardingLastName,onChange:e7("onboardingLastName"),placeholder:"Last name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"First Name"}),(0,t.jsx)("input",{value:ei.onboardingFirstName,onChange:e7("onboardingFirstName"),placeholder:"First name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Middle Name"}),(0,t.jsx)("input",{value:ei.onboardingMiddleName,onChange:e7("onboardingMiddleName"),placeholder:"Middle name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Suffix"}),(0,t.jsx)("input",{value:ei.onboardingSuffix,onChange:e7("onboardingSuffix"),placeholder:"Suffix (optional)",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Account Email (Google Sign-In)"}),(0,t.jsx)("input",{required:!0,value:ei.employeeEmail,onChange:e7("employeeEmail"),type:"email",placeholder:"employee@gmail.com",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Role"}),(0,t.jsxs)("select",{value:ei.onboardingRole,onChange:e7("onboardingRole"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select role"}),eW.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`onboarding-role-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Department"}),(0,t.jsxs)("select",{value:ei.onboardingDepartment,onChange:e7("onboardingDepartment"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select department"}),e_.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`onboarding-department-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Work Setup"}),(0,t.jsx)("select",{value:ei.workSetup,onChange:e7("workSetup"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:j.map(e=>(0,t.jsx)("option",{value:e,children:e},`work-setup-${e}`))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Start Date"}),(0,t.jsx)("input",{type:"date",value:ei.onboardingStartDate,onChange:e7("onboardingStartDate"),className:"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Generated Employee Display Name"}),(0,t.jsx)("input",{value:T(ei),readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Upload Onboarding Documents"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:e=>{eL(Array.from(e.target.files||[]).slice(0,10))},className:"block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-2.5 file:py-1.5 file:text-xs file:font-semibold file:text-slate-700 hover:file:bg-slate-200"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Add contracts, IDs, NDA, and other onboarding files (max 10 files, 10 MB each)."}),eD.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:eD.map((e,a)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-[11px] text-slate-700",children:[(0,t.jsx)("span",{className:"max-w-[210px] truncate",children:e.name}),(0,t.jsxs)("span",{className:"text-slate-500",children:["(",D(e.size),")"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{eL(e=>e.filter((e,t)=>t!==a))},className:"rounded px-1 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":`Remove ${e.name}`,children:"x"})]},`${e.name}-${e.size}-${e.lastModified}-${a}`))}):(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"No files selected."})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Activate Employment"}),(0,t.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!ei.activateEmploymentNow,onChange:e=>{en(t=>({...t,activateEmploymentNow:!!e.target.checked}))},className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Activate employment immediately after onboarding is created."]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Name"}),(0,t.jsxs)("select",{required:!0,value:ei.employeeRecordId,onChange:e=>{let t=e.target.value,a=eb.find(e=>e.id===t);en(e=>({...e,employeeRecordId:t,employee:a?.name||"",employeeEmail:a?.email||"",onboardingRole:a?.currentRole||"",onboardingDepartment:a?.currentDepartment||"",roleFrom:a?.currentRole||"",departmentFrom:a?.currentDepartment||""}))},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:ej?"Loading employee names...":"Select employee name"}),eb.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},`name-${e.id}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Email"}),(0,t.jsx)("input",{value:ei.employeeEmail,readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]})]}),I(ei.category)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Role"}),(0,t.jsx)("input",{value:R(M(ei.roleFrom)),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Role"}),(0,t.jsxs)("select",{required:!0,value:ei.roleTo,onChange:e7("roleTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select role"}),eW.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`role-to-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Effective Date"}),(0,t.jsx)("input",{value:ei.effectiveDate,onChange:e7("effectiveDate"),type:"date",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Department"}),(0,t.jsx)("input",{value:R(ei.departmentFrom),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Department"}),(0,t.jsxs)("select",{value:ei.departmentTo,onChange:e7("departmentTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select department"}),e_.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`department-to-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Role Change Justification"}),(0,t.jsx)("input",{value:ei.justification,onChange:e7("justification"),placeholder:"Enter justification",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]})]}):null,"disciplinary"===e2||"offboarding"===e2?(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsxs)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:["Upload ","disciplinary"===e2?"Disciplinary":"Offboarding"," Documents"]}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.xls,.xlsx,.csv,.txt",onChange:e=>{let t=Array.from(e.target.files||[]).slice(0,10);"disciplinary"===e2?eF(t):"offboarding"===e2&&eI(t)},className:"block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-2.5 file:py-1.5 file:text-xs file:font-semibold file:text-slate-700 hover:file:bg-slate-200"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Attach supporting files now (max 10 files, 10 MB each)."}),e3.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e3.map((e,a)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-[11px] text-slate-700",children:[(0,t.jsx)("span",{className:"max-w-[210px] truncate",children:e.name}),(0,t.jsxs)("span",{className:"text-slate-500",children:["(",D(e.size),")"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{"disciplinary"===e2?eF(e=>e.filter((e,t)=>t!==a)):"offboarding"===e2&&eI(e=>e.filter((e,t)=>t!==a))},className:"rounded px-1 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":`Remove ${e.name}`,children:"x"})]},`${e.name}-${e.size}-${e.lastModified}-${a}`))}):(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"No files selected."})]}):null,(0,t.jsxs)("div",{className:`space-y-1 ${I(ei.category)||$(ei.category)?"md:col-span-3":""}`,children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Notes"}),(0,t.jsx)("input",{value:ei.details,onChange:e7("details"),placeholder:$(ei.category)?"Onboarding notes":"Details / notes",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 z-10 mt-1 flex items-center justify-end gap-2 border-t border-slate-200 bg-white pt-3 md:col-span-3",children:[(0,t.jsx)("button",{type:"button",onClick:tl,disabled:es,className:"inline-flex h-9 items-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-70",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:es||ej||eS||($(ei.category)?!String(ei.employeeEmail||"").trim():0===eb.length||!ei.employeeRecordId),className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:es?"Saving...":"Create Workflow"})]})]})]})}):null,(0,t.jsx)(l.default,{title:eP.label,subtitle:eU,children:(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:e9.map(e=>(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:e.label}),(0,t.jsx)("p",{className:"mt-0.5 text-lg font-semibold text-slate-900",children:e.value})]},e.key))})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{title:"Lifecycle Records",subtitle:"Dedicated workflow records by lifecycle module with strict audit traceability",action:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[q?(0,t.jsx)("button",{type:"button",onClick:()=>{let e=eT||"Onboarding",t=$(e),a=!t&&(eb.find(e=>e.id===ei.employeeRecordId)||eb[0])||null;en(l=>({...k,employeeRecordId:t?"":a?.id||l.employeeRecordId||"",employee:t?"":a?.name||l.employee||"",employeeEmail:t?"":a?.email||l.employeeEmail||"",onboardingRole:t?"":a?.currentRole||l.onboardingRole||"",onboardingDepartment:t?"":a?.currentDepartment||l.onboardingDepartment||"",roleFrom:t?"":a?.currentRole||l.roleFrom||"",departmentFrom:t?"":a?.currentDepartment||l.departmentFrom||"",category:e,owner:H,status:"In Progress"})),eL([]),eF([]),eI([]),ed(!0)},className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700",children:"Create Lifecycle Workflow"}):null,(0,t.jsx)("input",{value:eu,onChange:e=>ef(e.target.value),placeholder:"Search workflow",className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none"}),(0,t.jsxs)("select",{value:ep,onChange:e=>ex(e.target.value),className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"in progress",children:"In Progress"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"approved",children:"Approved"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"rejected",children:"Rejected"}),(0,t.jsx)("option",{value:"revoked",children:"Access Revoked"})]})]}),children:V?(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Loading lifecycle records..."}):0===eq.length?(0,t.jsx)(s.default,{title:"No lifecycle workflows found",subtitle:"Create a workflow or change filters to view results."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-[1180px] w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:"onboarding"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee Number"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"role-changes"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Role From -> Role To"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Department From -> Department To"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"disciplinary-records"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Checklist"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"offboarding-access-revocation"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Access Revoked At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archive Until"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Category"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]})})}),(0,t.jsx)("tbody",{children:eK.map(e=>{let a,l={completed:(a=(Array.isArray(e?.workflow?.checklist)?e.workflow.checklist:[]).filter(e=>e?.required!==!1)).filter(e=>"completed"===A(e?.status)).length,total:a.length},s=ec&&eC===e.id;return(0,t.jsx)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:((e,{checklistProgress:a,rowSelected:l})=>{let s,r,n,o,d,c,m,p,x,u=(s=P(e),String(s?.effectiveDate||s?.startDate||"").trim()||""),f=String(e?.owner||"").trim(),h=function(e){let t=Array.isArray(e?.traceability)?e.traceability:[];for(let e=t.length-1;e>=0;e-=1){let a=t[e],l=A(a?.status);if(l.includes("approved")||l.includes("completed")||l.includes("rejected")){let e=String(a?.at||"").trim();if(e)return e}}let a=A(e?.status);return a.includes("approved")||a.includes("completed")||a.includes("rejected")?String(e?.updatedAt||e?.createdAt||"").trim():""}(e),g=(r=P(e),n=String(r?.roleFrom||"").trim(),o=String(r?.roleTo||r?.role||"").trim(),n||o?`${M(n||"-")} -> ${M(o||"-")}`:""),b=(d=P(e),c=String(d?.departmentFrom||"").trim(),m=String(d?.departmentTo||d?.department||"").trim(),c||m?`${c||"-"} -> ${m||"-"}`:""),y=(p=P(e),String(p?.employeeId||p?.employeeNumber||"").trim()||""),j=function(e){if((Array.isArray(e?.lastAutomationEffects)?e.lastAutomationEffects:[]).some(e=>"access-revocation"===A(e?.type)))return String(e?.lastAutomationAt||e?.updatedAt||"").trim();let t=A(e?.status);return t.includes("revoked")||t.includes("terminated")||t.includes("disabled")?String(e?.updatedAt||"").trim():""}(e),N=(x=(Array.isArray(e?.lastAutomationEffects)?e.lastAutomationEffects:[]).find(e=>"archive-policy"===A(e?.type)),String(x?.retentionDeleteAt||e?.retentionDeleteAt||"").trim()||"");return"onboarding"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:tr(e)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(y)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:S(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(i.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?E(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:E(e.updatedAt||e.createdAt)}),ti(e,l)]}):"role-changes"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:tr(e)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(g)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(b)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:S(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(i.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?E(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:E(e.updatedAt||e.createdAt)}),ti(e,l)]}):"disciplinary-records"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:tr(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:R(e?.workflow?.stage)}),(0,t.jsxs)("td",{className:"px-2 py-3 text-xs",children:[a.completed,"/",a.total]}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:S(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(i.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?E(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:E(e.updatedAt||e.createdAt)}),ti(e,l)]}):"offboarding-access-revocation"===K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:tr(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:R(e?.workflow?.stage)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(i.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:j?E(j):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:N?E(N):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:E(e.updatedAt||e.createdAt)}),ti(e,l)]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:tr(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:R(e.category)}),(0,t.jsx)("td",{className:"px-2 py-3",children:R(e?.workflow?.stage)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:S(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:R(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(i.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?E(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:E(e.updatedAt||e.createdAt)}),ti(e,l)]})})(e,{checklistProgress:l,rowSelected:s})},e.id)})})]})}),(0,t.jsx)(r.default,{pagination:eH,onPageChange:eg})]})}),ec?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 p-4",role:"dialog","aria-modal":"true","aria-label":"Workflow Console",onClick:ts,children:(0,t.jsxs)("div",{className:"w-full max-w-5xl rounded-2xl border border-slate-200 bg-white p-4 shadow-2xl sm:p-5",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Workflow Console"}),(0,t.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Checklist automation, stage control, and lifecycle evidence management"})]}),(0,t.jsx)("button",{type:"button",onClick:ts,disabled:es,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-60","aria-label":"Close workflow console",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsx)(l.default,{children:eJ?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:R(eJ.employee)}),(0,t.jsx)("p",{className:"text-xs text-slate-600",children:R(eJ.employeeEmail)})]}),q?(0,t.jsx)("select",{value:eV,onChange:e=>e6(eJ,Number.parseInt(e.target.value,10)||0),disabled:es,className:"h-8 rounded-md border border-slate-300 bg-white px-2.5 text-xs text-slate-700 focus:border-sky-400 focus:outline-none",children:eQ.map((e,a)=>(0,t.jsx)("option",{value:a,children:e},`${e}-${a}`))}):null]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[11px] text-slate-600",children:[(0,t.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["Stage: ",R(eJ?.workflow?.stage)]}),(0,t.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["SLA Due: ",S(eJ?.workflow?.slaDueAt)]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Checklist Automation"}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:0===eZ.length?(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"No checklist tasks generated yet."}):eZ.map(e=>{let a="completed"===A(e?.status);return(0,t.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-slate-800",children:R(e.label)}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-500",children:["Due: ",E(e.dueAt)," | Status: ",R(e.status)]})]}),q?(0,t.jsx)("button",{type:"button",onClick:()=>e8(eJ,e,!a),disabled:es,className:`inline-flex h-7 items-center rounded-md border px-2.5 text-[11px] font-semibold transition disabled:opacity-60 ${a?"border-amber-200 bg-amber-50 text-amber-700 hover:bg-amber-100":"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:a?"Set Pending":"Mark Complete"}):null]})},e.id)})})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Evidence Attachments"}),q?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e$.current?.click(),disabled:es,className:"inline-flex h-8 items-center rounded-md border border-slate-300 bg-white px-3 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-60",children:"Upload Evidence"}),(0,t.jsx)("input",{ref:e$,type:"file",className:"hidden",onChange:tt})]}):null]}),e0.required.length>0?(0,t.jsxs)("div",{className:"mt-2 rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Required Documents"}),(0,t.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:e0.required.map(e=>{let a=e0.matched.some(t=>t.id===e.id);return(0,t.jsx)("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] ${a?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:e.label},e.id)})}),e0.complete?(0,t.jsx)("p",{className:"mt-1.5 text-[11px] text-emerald-700",children:"Required evidence complete."}):(0,t.jsx)("p",{className:"mt-1.5 text-[11px] text-amber-700",children:"Final status is blocked until all required documents are attached."})]}):null,(0,t.jsx)("div",{className:"mt-2 space-y-2",children:0===eX.length?(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"No evidence files attached."}):eX.map(e=>(0,t.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-slate-800",children:R(e.name)}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-500",children:[D(e.sizeBytes)," | ",E(e.uploadedAt)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[String(e.ref||"").trim()?(0,t.jsx)("a",{href:String(e.ref),target:"_blank",rel:"noreferrer",className:"inline-flex h-7 items-center rounded-md border border-sky-200 bg-sky-50 px-2.5 text-[11px] font-semibold text-sky-700 transition hover:bg-sky-100",children:"Open"}):null,q?(0,t.jsx)("button",{type:"button",onClick:()=>ta(eJ,e),disabled:es,className:"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-[11px] font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Remove"}):null]})]})},e.id))})]})]}):(0,t.jsx)(s.default,{title:"No workflow selected",subtitle:"Open a lifecycle record from the table to continue."})})]})}):null]})]})}e.s(["default",()=>W])}]);