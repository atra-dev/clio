module.exports=[44801,e=>{"use strict";function r(e){return String(e??"").trim()}function t(e,{fallbackLabel:i="User",maxTokens:n=3}={}){let o=r(e).toLowerCase(),s=r(i)||"User";if(!o.includes("@"))return s;let a=(o.split("@")[0]||"").split(/[._-]+/g).map(e=>{let t;return(t=r(e).toLowerCase())?`${t.charAt(0).toUpperCase()}${t.slice(1)}`:""}).filter(Boolean).slice(0,Math.max(1,Number.isFinite(n)?n:3));return 0===a.length?s:a.join(" ")}function i({firstName:e,middleName:t,lastName:i,order:n}){let o=r(e),s=r(t),a=r(i);if("last-first"===n){let e=[o,s].filter(Boolean).join(" ");return a?`${a}${e?`, ${e}`:""}`:e}return[o,s,a].filter(Boolean).join(" ")}function n({fallback:e,fallbackEmail:i,fallbackLabel:n}){let o=r(e);if(o)return o;let s=r(i);return s?t(s,{fallbackLabel:n}):r(n)||"User"}function o({firstName:e,middleName:t,lastName:s,suffix:a,fallback:l="",fallbackEmail:c="",fallbackLabel:p="User"}={}){let f=[i({firstName:e,middleName:t,lastName:s,order:"first-last"}),r(a)].filter(Boolean).join(" ").trim();return f||n({fallback:l,fallbackEmail:c,fallbackLabel:p})}function s({firstName:e,middleName:t,lastName:o,suffix:a,fallback:l="",fallbackEmail:c="",fallbackLabel:p="Employee"}={}){let f=[i({firstName:e,middleName:t,lastName:o,order:"last-first"}),r(a)].filter(Boolean).join(" ").trim();return f||n({fallback:l,fallbackEmail:c,fallbackLabel:p})}e.s(["formatEmployeeName",()=>s,"formatNameFromEmail",()=>t,"formatPersonName",()=>o])},35110,e=>{"use strict";function r(e){let r=String(e||"").trim();return r?r.startsWith("http://")||r.startsWith("https://")?r.replace(/\/+$/,""):`https://${r.replace(/^\/+/,"").replace(/\/+$/,"")}`:""}function t(e){return String(e||"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}async function i({toEmail:e,verifyUrl:r}){let t=String("AIzaSyC-mWz29cK_wjvDsjhgbwYLAuJeygPohOI").trim();if(!t)throw Error("firebase_api_key_not_configured");let i=await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestType:"EMAIL_SIGNIN",email:e,continueUrl:r,canHandleCodeInApp:!0})}),n=await i.json().catch(()=>({}));if(!i.ok){let e;throw Error((e=String(n?.error?.message||"").trim())?"OPERATION_NOT_ALLOWED"===e?"firebase_email_provider_not_enabled":"MISSING_CONTINUE_URI"===e||"INVALID_CONTINUE_URI"===e?"firebase_continue_url_invalid":"INVALID_EMAIL"===e?"invalid_email":"PROJECT_NOT_FOUND"===e||"API_KEY_INVALID"===e?"firebase_api_key_not_configured":"email_delivery_failed":"email_delivery_failed")}return{provider:"firebase",status:"sent",messageId:`firebase-${Date.now()}`}}async function n({toEmail:e,subject:r,html:t,text:i}){let n=String(process.env.RESEND_API_KEY||"").trim(),o=String(process.env.CLIO_EMAIL_FROM||"").trim();if(!n||!o||!n.startsWith("re_"))throw Error("email_provider_not_configured");let s=await fetch("https://api.resend.com/emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({from:o,to:[e],subject:r,html:t,text:i})});if(!s.ok){let e=await s.json().catch(()=>({})),r="string"==typeof e?.message?e.message:"string"==typeof e?.error?.message?e.error.message:"";throw Error(r?`email_delivery_failed:${r}`:"email_delivery_failed")}let a=await s.json().catch(()=>({}));return{provider:"resend",status:"sent",messageId:"string"==typeof a?.id?a.id:`resend-${Date.now()}`}}async function o({toEmail:e,role:o,invitedBy:s,expiresAt:a,inviteToken:l,requestOrigin:c=""}){let p,f,u,m=function({requestOrigin:e}={}){let t=r(e),i=r("atracaas-platform-1fbeb.firebaseapp.com"),n=r(process.env.VERCEL_PROJECT_PRODUCTION_URL||process.env.VERCEL_URL);for(let e of[t,r(process.env.CLIO_APP_BASE_URL),r(process.env.NEXT_PUBLIC_APP_URL),n,i])if(e)return!function(e){let r;try{r=new URL(e)}catch{throw Error("app_base_url_not_configured")}let t=String(r.hostname||"").trim().toLowerCase();if("localhost"===t||"127.0.0.1"===t||"::1"===t||t.endsWith(".local"))throw Error("unsafe_app_base_url_for_production")}(e),e;throw Error("app_base_url_not_configured")}({requestOrigin:c}),d=function(e,r){let t,i=(t=String(process.env.CLIO_INVITE_VERIFY_PATH||"").trim())?t.startsWith("/")?t:`/${t}`:"/verify-invite",n=String(e||"").trim();if(!n)throw Error("invalid_invite_token");return`${r}${i}?token=${encodeURIComponent(n)}`}(l,m),_=`${m}${!(u=String(process.env.CLIO_LOGIN_PATH||"").trim())?"/login":u.startsWith("/")?u:`/${u}`}`,g=function({role:e,invitedBy:r,verifyUrl:i,loginUrl:n,expiresAt:o}){let s=new Date(o),a=Number.isNaN(s.getTime())?o:s.toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),l=String(e||"Employee").trim()||"Employee",c=String(r||"CLIO Administrator").trim()||"CLIO Administrator",p=String(process.env.CLIO_EMAIL_BRAND_DOMAIN||"cisoasaservice.io").trim()||"cisoasaservice.io",f=t(l),u=t(c),m=t(i),d=t(n),_=t(a),g=t(p);return{subject:"You're invited to verify your email and open your Clio account",text:`You have been invited to Clio Secured HRIS.

To open your account, please verify your email first.
Verify your Clio account: ${i}
Sign in after verification: ${n}

Assigned role: ${l}
Invited by: ${c}
Invitation expires: ${a}

For security, complete SMS OTP after email verification.
Use the same invited work email when signing in.

Domain: ${p}`,html:`<div style="font-family:Arial,sans-serif;line-height:1.6;color:#0f172a;max-width:620px"><p style="margin:0 0 12px 0">Hello,</p><p style="margin:0 0 12px 0">You have been invited to <strong>Clio Secured HRIS</strong>.</p><p style="margin:0 0 16px 0">To open your account, please verify your email and complete secure onboarding.</p><p style="margin:0 0 16px 0"><a href="${m}" style="display:inline-block;background:#0f6bcf;color:#ffffff;text-decoration:none;padding:10px 18px;border-radius:10px;font-weight:600">Verify Clio Account</a></p><p style="margin:0 0 12px 0"><strong>Assigned role:</strong> ${f}<br/><strong>Invited by:</strong> ${u}<br/><strong>Invitation expires:</strong> ${_}</p><p style="margin:0 0 12px 0">After verification, sign in here: <a href="${d}">${d}</a></p><p style="margin:0 0 12px 0">For security, complete SMS OTP after email verification and use the same invited work email.</p><p style="margin:0;color:#475569;font-size:12px">This invitation is intended for authorized recipients of ${g}.</p></div>`}}({role:o,invitedBy:s,verifyUrl:d,loginUrl:_,expiresAt:a}),h=(f=(p=String(process.env.CLIO_EMAIL_PROVIDER||"").trim().toLowerCase())?"firebase"===p||p.includes("firebase")?"firebase":"resend"===p||p.includes("resend")?"resend":"console"===p||"dev"===p||p.includes("console")?"console":p:"")||(String(process.env.RESEND_API_KEY||"").trim().startsWith("re_")&&String(process.env.CLIO_EMAIL_FROM||"").trim().length>0?"resend":"firebase");if("firebase"===h)return await i({toEmail:e,verifyUrl:d});if("resend"===h)return await n({toEmail:e,subject:g.subject,html:g.html,text:g.text});if("console"===h){if("true"!==String(process.env.CLIO_ALLOW_CONSOLE_EMAIL||"").trim().toLowerCase())throw Error("email_provider_not_configured");return function({toEmail:e,subject:r,verifyUrl:t,loginUrl:i}){return{provider:"console",status:"simulated",messageId:`console-${Date.now()}`,previewUrl:t,loginUrl:i}}({toEmail:e,subject:g.subject,verifyUrl:d,loginUrl:_})}throw Error("unsupported_email_provider")}e.s(["deliverInviteEmail",()=>o])}];

//# sourceMappingURL=src_lib_9a482084._.js.map