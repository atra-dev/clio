{"version":3,"sources":["../../../../src/components/hris/SurfaceCard.jsx","../../../../src/components/hris/UserManagementPanel.jsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\r\n\r\nexport default function SurfaceCard({ title, subtitle, className, children, action }) {\r\n  return (\r\n    <section\r\n      className={cn(\r\n        \"rounded-2xl border border-slate-200 bg-white p-5 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)]\",\r\n        className,\r\n      )}\r\n    >\r\n      {(title || subtitle || action) && (\r\n        <header className=\"mb-4 flex items-start justify-between gap-3\">\r\n          <div className=\"space-y-1\">\r\n            {title && <h2 className=\"text-base font-semibold text-slate-900\">{title}</h2>}\r\n            {subtitle && <p className=\"text-sm text-slate-600\">{subtitle}</p>}\r\n          </div>\r\n          {action}\r\n        </header>\r\n      )}\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\r\nimport { ROLES } from \"@/features/hris/constants\";\r\n\r\nconst EMPLOYEE_ACCOUNT_ROLE_ID = \"EMPLOYEE_L1\";\r\nconst EMPLOYEE_ROLE_IDS = new Set([\"EMPLOYEE\", \"EMPLOYEE_L1\", \"EMPLOYEE_L2\", \"EMPLOYEE_L3\"]);\r\nconst BASE_INVITE_ROLE_IDS = new Set([\"GRC\", \"HR\", \"EA\", EMPLOYEE_ACCOUNT_ROLE_ID]);\r\nconst ROLE_LABEL_BY_ID = new Map(ROLES.map((role) => [role.id, role.label]));\r\n\r\nfunction normalizeAccountRoleId(roleId) {\r\n  const normalized = String(roleId || \"\").trim().toUpperCase();\r\n  if (EMPLOYEE_ROLE_IDS.has(normalized)) {\r\n    return EMPLOYEE_ACCOUNT_ROLE_ID;\r\n  }\r\n  return normalized;\r\n}\r\n\r\nconst ACCOUNT_ROLE_OPTIONS = (() => {\r\n  const deduped = new Map();\r\n  for (const role of ROLES) {\r\n    const normalizedRole = normalizeAccountRoleId(role.id);\r\n    if (!BASE_INVITE_ROLE_IDS.has(normalizedRole) || deduped.has(normalizedRole)) {\r\n      continue;\r\n    }\r\n    deduped.set(normalizedRole, {\r\n      id: normalizedRole,\r\n      label: normalizedRole === EMPLOYEE_ACCOUNT_ROLE_ID ? \"Employee\" : role.label,\r\n    });\r\n  }\r\n  return Array.from(deduped.values());\r\n})();\r\n\r\nconst initialInviteForm = {\r\n  email: \"\",\r\n  role: \"HR\",\r\n};\r\n\r\nfunction formatDate(value) {\r\n  if (!value) {\r\n    return \"-\";\r\n  }\r\n\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n\r\n  return new Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"short\",\r\n    day: \"2-digit\",\r\n    year: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(date);\r\n}\r\n\r\nfunction statusBadgeClass(status) {\r\n  if (status === \"active\") {\r\n    return \"bg-emerald-100 text-emerald-700\";\r\n  }\r\n  if (status === \"disabled\") {\r\n    return \"bg-rose-100 text-rose-700\";\r\n  }\r\n  return \"bg-amber-100 text-amber-700\";\r\n}\r\n\r\nfunction getRowActionLabel(status) {\r\n  if (status === \"active\") {\r\n    return \"Disable\";\r\n  }\r\n  return \"Open account\";\r\n}\r\n\r\nfunction getNextStatus(status) {\r\n  if (status === \"active\") {\r\n    return \"disabled\";\r\n  }\r\n  return \"active\";\r\n}\r\n\r\nfunction formatRoleLabel(roleId) {\r\n  const normalized = normalizeAccountRoleId(roleId);\r\n  if (normalized === EMPLOYEE_ACCOUNT_ROLE_ID) {\r\n    return \"Employee\";\r\n  }\r\n  return ROLE_LABEL_BY_ID.get(normalized) || roleId;\r\n}\r\n\r\nexport default function UserManagementPanel() {\r\n  const [users, setUsers] = useState([]);\r\n  const [roleDraftByUserId, setRoleDraftByUserId] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isUpdatingId, setIsUpdatingId] = useState(\"\");\r\n  const [isUpdatingRoleId, setIsUpdatingRoleId] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [invitePreview, setInvitePreview] = useState(null);\r\n  const [inviteForm, setInviteForm] = useState(initialInviteForm);\r\n\r\n  const loadUsers = useCallback(async () => {\r\n    setErrorMessage(\"\");\r\n    try {\r\n      const response = await fetch(\"/api/admin/users\", { method: \"GET\" });\r\n      if (!response.ok) {\r\n        const payload = await response.json().catch(() => ({}));\r\n        throw new Error(payload.message || \"Unable to load user directory.\");\r\n      }\r\n\r\n      const payload = await response.json();\r\n      const nextUsers = Array.isArray(payload.users) ? payload.users : [];\r\n      setUsers(nextUsers);\r\n      setRoleDraftByUserId(\r\n        nextUsers.reduce((accumulator, user) => {\r\n          accumulator[user.id] = normalizeAccountRoleId(user.role);\r\n          return accumulator;\r\n        }, {}),\r\n      );\r\n    } catch (error) {\r\n      setErrorMessage(error.message || \"Unable to load user directory.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, [loadUsers]);\r\n\r\n  const handleInviteField = (field) => (event) => {\r\n    setInviteForm((current) => ({\r\n      ...current,\r\n      [field]: event.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleInviteSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setIsSubmitting(true);\r\n    setErrorMessage(\"\");\r\n    setSuccessMessage(\"\");\r\n    setInvitePreview(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/admin/users\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(inviteForm),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const payload = await response.json().catch(() => ({}));\r\n        throw new Error(payload.message || \"Unable to send invitation.\");\r\n      }\r\n\r\n      const payload = await response.json();\r\n      const deliveryStatus = typeof payload?.delivery?.status === \"string\" ? payload.delivery.status : \"\";\r\n      const warning = typeof payload?.warning === \"string\" ? payload.warning : \"\";\r\n      if (deliveryStatus === \"failed\") {\r\n        setSuccessMessage(\r\n          warning || `Invite created for ${payload.user.email}. Email delivery failed.`,\r\n        );\r\n      } else if (payload?.delivery?.provider === \"firebase\") {\r\n        setSuccessMessage(\r\n          `Invite sent to ${payload.user.email}. User must verify email to open a CLIO account, but current email text uses Firebase's default template.`,\r\n        );\r\n      } else {\r\n        setSuccessMessage(`Account opening email sent to ${payload.user.email}. Ask the user to verify email first to open their CLIO account.`);\r\n      }\r\n      setInvitePreview(payload.invite || null);\r\n      setInviteForm(initialInviteForm);\r\n      await loadUsers();\r\n    } catch (error) {\r\n      setErrorMessage(error.message || \"Unable to send invitation.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusToggle = async (user) => {\r\n    setIsUpdatingId(user.id);\r\n    setErrorMessage(\"\");\r\n    setSuccessMessage(\"\");\r\n\r\n    try {\r\n      const response = await fetch(`/api/admin/users/${encodeURIComponent(user.id)}/status`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          status: getNextStatus(user.status),\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const payload = await response.json().catch(() => ({}));\r\n        throw new Error(payload.message || \"Unable to update account status.\");\r\n      }\r\n\r\n      const payload = await response.json();\r\n      setUsers((current) =>\r\n        current.map((item) => (item.id === payload.user.id ? payload.user : item)),\r\n      );\r\n      setSuccessMessage(`Account status updated: ${payload.user.email} is ${payload.user.status}.`);\r\n    } catch (error) {\r\n      setErrorMessage(error.message || \"Unable to update account status.\");\r\n    } finally {\r\n      setIsUpdatingId(\"\");\r\n    }\r\n  };\r\n\r\n  const handleRoleDraftChange = (userId) => (event) => {\r\n    const nextRole = normalizeAccountRoleId(event.target.value);\r\n    setRoleDraftByUserId((current) => ({\r\n      ...current,\r\n      [userId]: nextRole,\r\n    }));\r\n  };\r\n\r\n  const handleRoleChange = async (user) => {\r\n    const requestedRole = normalizeAccountRoleId(roleDraftByUserId[user.id] || user.role);\r\n    const currentRole = normalizeAccountRoleId(user.role);\r\n    if (!requestedRole || requestedRole === currentRole) {\r\n      return;\r\n    }\r\n\r\n    setIsUpdatingRoleId(user.id);\r\n    setErrorMessage(\"\");\r\n    setSuccessMessage(\"\");\r\n\r\n    try {\r\n      const response = await fetch(`/api/admin/users/${encodeURIComponent(user.id)}/role`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          role: requestedRole,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const payload = await response.json().catch(() => ({}));\r\n        throw new Error(payload.message || \"Unable to update user role.\");\r\n      }\r\n\r\n      const payload = await response.json();\r\n      setUsers((current) =>\r\n        current.map((item) => (item.id === payload.user.id ? payload.user : item)),\r\n      );\r\n      setRoleDraftByUserId((current) => ({\r\n        ...current,\r\n        [payload.user.id]: normalizeAccountRoleId(payload.user.role),\r\n      }));\r\n      setSuccessMessage(`Role updated: ${payload.user.email} is now ${formatRoleLabel(payload.user.role)}.`);\r\n    } catch (error) {\r\n      setErrorMessage(error.message || \"Unable to update user role.\");\r\n    } finally {\r\n      setIsUpdatingRoleId(\"\");\r\n    }\r\n  };\r\n\r\n  const orderedUsers = useMemo(\r\n    () =>\r\n      [...users].sort(\r\n        (a, b) => new Date(b.updatedAt || b.invitedAt).getTime() - new Date(a.updatedAt || a.invitedAt).getTime(),\r\n      ),\r\n    [users],\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <SurfaceCard\r\n        title=\"Invite User\"\r\n        subtitle=\"No sign-up form. Send an invite so the user can verify email, complete SMS OTP, and open a CLIO account.\"\r\n      >\r\n        <form className=\"grid gap-3 sm:grid-cols-[minmax(0,1fr)_180px_auto]\" onSubmit={handleInviteSubmit}>\r\n          <label className=\"space-y-1\">\r\n            <span className=\"text-xs font-medium uppercase tracking-[0.08em] text-slate-600\">Work Email</span>\r\n            <input\r\n              type=\"email\"\r\n              required\r\n              value={inviteForm.email}\r\n              onChange={handleInviteField(\"email\")}\r\n              placeholder=\"employee@gmail.com\"\r\n              className=\"h-10 w-full rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-sky-400 focus:outline-none\"\r\n            />\r\n          </label>\r\n\r\n          <label className=\"space-y-1\">\r\n            <span className=\"text-xs font-medium uppercase tracking-[0.08em] text-slate-600\">Role</span>\r\n            <select\r\n              value={inviteForm.role}\r\n              onChange={handleInviteField(\"role\")}\r\n              className=\"h-10 w-full rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n            >\r\n              {ACCOUNT_ROLE_OPTIONS.map((role) => (\r\n                <option key={role.id} value={role.id}>\r\n                  {role.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </label>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className=\"mt-6 inline-flex h-10 items-center justify-center rounded-lg bg-sky-600 px-4 text-sm font-semibold text-white transition hover:bg-sky-700 disabled:cursor-not-allowed disabled:opacity-70\"\r\n          >\r\n            {isSubmitting ? \"Sending...\" : \"Send invite\"}\r\n          </button>\r\n        </form>\r\n\r\n        {invitePreview ? (\r\n          <div className=\"mt-4 rounded-xl border border-sky-200 bg-sky-50 px-4 py-3 text-xs text-sky-800\">\r\n            <p className=\"font-semibold\">Invite recorded for account opening</p>\r\n            <p className=\"mt-1\">Invite ID: {invitePreview.id || \"-\"}</p>\r\n            <p className=\"mt-1\">Expires: {formatDate(invitePreview.expiresAt)}</p>\r\n            <p className=\"mt-1\">Next step: User must verify email from invite email before Google login.</p>\r\n          </div>\r\n        ) : null}\r\n\r\n        {errorMessage ? (\r\n          <p className=\"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700\">\r\n            {errorMessage}\r\n          </p>\r\n        ) : null}\r\n\r\n        {successMessage ? (\r\n          <p className=\"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700\">\r\n            {successMessage}\r\n          </p>\r\n        ) : null}\r\n      </SurfaceCard>\r\n\r\n      <SurfaceCard\r\n        title=\"User Directory\"\r\n        subtitle=\"Review account states and manage access by role.\"\r\n      >\r\n        {isLoading ? (\r\n          <p className=\"text-sm text-slate-600\">Loading user accounts...</p>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-left text-sm\">\r\n              <thead>\r\n                <tr className=\"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500\">\r\n                  <th className=\"px-2 py-3 font-medium\">Email</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Role</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Status</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Invited</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Last Login</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Change Role</th>\r\n                  <th className=\"px-2 py-3 font-medium text-right\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {orderedUsers.map((user) => (\r\n                  <tr key={user.id} className=\"border-b border-slate-100 text-slate-700 last:border-b-0\">\r\n                    <td className=\"px-2 py-3\">\r\n                      <p className=\"font-medium text-slate-900\">{user.email}</p>\r\n                      <p className=\"text-xs text-slate-500\">By: {user.invitedBy}</p>\r\n                    </td>\r\n                    <td className=\"px-2 py-3\">{formatRoleLabel(user.role)}</td>\r\n                    <td className=\"px-2 py-3\">\r\n                      <span className={`rounded-md px-2 py-1 text-xs font-semibold ${statusBadgeClass(user.status)}`}>\r\n                        {user.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-2 py-3 text-xs text-slate-600\">{formatDate(user.invitedAt)}</td>\r\n                    <td className=\"px-2 py-3 text-xs text-slate-600\">{formatDate(user.lastLoginAt)}</td>\r\n                    <td className=\"px-2 py-3\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <select\r\n                          value={normalizeAccountRoleId(roleDraftByUserId[user.id] || user.role)}\r\n                          onChange={handleRoleDraftChange(user.id)}\r\n                          disabled={isUpdatingRoleId === user.id}\r\n                          className=\"h-8 min-w-[132px] rounded-lg border border-slate-300 bg-white px-2 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:opacity-70\"\r\n                        >\r\n                          {ACCOUNT_ROLE_OPTIONS.map((role) => (\r\n                            <option key={role.id} value={role.id}>\r\n                              {role.label}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleRoleChange(user)}\r\n                          disabled={\r\n                            isUpdatingRoleId === user.id ||\r\n                            !roleDraftByUserId[user.id] ||\r\n                            normalizeAccountRoleId(roleDraftByUserId[user.id]) === normalizeAccountRoleId(user.role)\r\n                          }\r\n                          className=\"rounded-lg border border-sky-300 bg-sky-50 px-2.5 py-1.5 text-xs font-medium text-sky-700 transition hover:bg-sky-100 disabled:cursor-not-allowed disabled:opacity-70\"\r\n                        >\r\n                          {isUpdatingRoleId === user.id ? \"Saving...\" : \"Change Role\"}\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-2 py-3 text-right\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleStatusToggle(user)}\r\n                        disabled={isUpdatingId === user.id || isUpdatingRoleId === user.id}\r\n                        className=\"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-70\"\r\n                      >\r\n                        {isUpdatingId === user.id ? \"Updating...\" : getRowActionLabel(user.status)}\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </SurfaceCard>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}