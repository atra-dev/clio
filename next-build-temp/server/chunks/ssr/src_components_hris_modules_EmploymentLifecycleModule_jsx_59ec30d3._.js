module.exports=[3756,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(44036),e=a.i(63824),f=a.i(93363),g=a.i(3427),h=a.i(98719),i=a.i(95312),j=a.i(51084),k=a.i(63609);a.i(68248);var l=a.i(74404);let m=[{id:"workflow-status-tracking",label:"Workflow Status Tracking"},{id:"onboarding",label:"Onboarding"},{id:"role-changes",label:"Role Changes"},{id:"disciplinary-records",label:"Disciplinary Records"},{id:"offboarding-access-revocation",label:"Offboarding + Access Revocation"}],n={onboarding:"Onboarding","role-changes":"Role Change","disciplinary-records":"Disciplinary","offboarding-access-revocation":"Offboarding"},o={"workflow-status-tracking":"Unified tracking view across onboarding, role changes, disciplinary actions, and offboarding.",onboarding:"Employee onboarding workflows with activation and completion tracking.","role-changes":"Role/department movement workflows with effectivity details.","disciplinary-records":"Disciplinary case workflows with controlled updates and timeline visibility.","offboarding-access-revocation":"Offboarding workflows with access revocation and account disablement trail."},p={disciplinary:[{id:"incident-report",label:"Incident Report",keywords:["incident","report"]},{id:"notice-to-explain",label:"Notice to Explain / Written Explanation",keywords:["notice","explain","written explanation","explanation"]},{id:"decision-memo",label:"Decision Memo",keywords:["decision","memo"]}],offboarding:[{id:"resignation-termination",label:"Resignation / Termination Document",keywords:["resignation","termination","termination notice"]},{id:"clearance-form",label:"Clearance Form",keywords:["clearance"]},{id:"handover-exit",label:"Handover / Exit Checklist",keywords:["handover","exit checklist","exit interview"]}]},q=[{value:"SUPER_ADMIN",label:"Super Admin"},{value:"GRC",label:"Governance, Risk, and Compliance (GRC)"},{value:"HR",label:"Human Resources (HR)"},{value:"EA",label:"Executive Assistant (EA)"},{value:"EMPLOYEE_L1",label:"Employee (L1)"},{value:"EMPLOYEE_L2",label:"Employee (L2)"},{value:"EMPLOYEE_L3",label:"Employee (L3)"}],r=new Map([["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"]]),s=[{value:"Governance, Risk, and Compliance (GRC)",label:"Governance, Risk, and Compliance (GRC)"},{value:"Research and Development (R&D)",label:"Research and Development (R&D)"},{value:"Cyber Security Operations Center (CSOC)",label:"Cyber Security Operations Center (CSOC)"},{value:"Threat Intelligence (TI)",label:"Threat Intelligence (TI)"}],t=["On-site","Hybrid","Remote"],u=new Map([["SUPER_ADMIN","Super Admin"],["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"],["EMPLOYEE","Employee (L1)"],["EMPLOYEE_L1","Employee (L1)"],["EMPLOYEE_L2","Employee (L2)"],["EMPLOYEE_L3","Employee (L3)"]]),v=new Set(["SUPER_ADMIN","GRC","HR","EA","EMPLOYEE","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),w=new Set(["GRC","HR","EA","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),x={employeeRecordId:"",employeeEmail:"",employee:"",category:"Onboarding",owner:"",status:"In Progress",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",roleTo:"",departmentFrom:"",departmentTo:"",effectiveDate:"",justification:"",details:""};function y(a){let b=new Date(a||"");return Number.isNaN(b.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(b)}function z(a){let b=new Date(a||"");return Number.isNaN(b.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(b)}function A(a){return String(a||"").trim().toLowerCase()}function B(a){let b=A(a);return b?b.includes("disciplin")?"disciplinary":b.includes("offboard")||b.includes("resign")||b.includes("terminate")?"offboarding":b.includes("role")||b.includes("promotion")?"role-change":"onboarding":"onboarding"}function C(a){return String(a||"").trim()||"-"}function D(a){let b=Number(a);return!Number.isFinite(b)||b<=0?"0 B":b<1024?`${b} B`:b<1048576?`${(b/1024).toFixed(1)} KB`:`${(b/1048576).toFixed(1)} MB`}function E(a){return String(a||"").trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,"")}function F(a){let b=E(a);return b?u.get(b)||a:"-"}function G(a){return Array.isArray(a)?a:[]}function H(a,b){let c=[],d=new Set;return[...G(a),...G(b)].forEach(a=>{let b,e,f=(b=String(a?.value||"").trim(),e=String(a?.label||b).trim(),b?{value:b,label:e||b}:null);if(!f)return;let g=A(`${f.value}::${f.label}`);!g||d.has(g)||(d.add(g),c.push(f))}),c}function I(a){return"role change"===A(a)}function J(a){return"onboarding"===A(a)}function K(a){return a?.details&&"object"==typeof a.details?a.details:{}}function L(a){return(0,j.formatEmployeeName)({firstName:a?.onboardingFirstName,middleName:a?.onboardingMiddleName,lastName:a?.onboardingLastName,suffix:a?.onboardingSuffix,fallback:a?.employee,fallbackEmail:a?.employeeEmail,fallbackLabel:"Employee"})}function M(a){return(Array.isArray(a)?a:[]).map(a=>"string"==typeof a?a.trim():String(a?.message||"").trim()).filter(Boolean).join(" ")}function N(a){let b=A(a?.category);return b.includes("offboard")||b.includes("resign")||b.includes("terminate")}function O(a){let b=p[B(a?.workflowType||a?.category)]||[];if(0===b.length)return{required:[],matched:[],missing:[],complete:!0};let c=(Array.isArray(a?.evidence)?a.evidence:[]).map(a=>A([a?.name,a?.type,a?.note].filter(Boolean).join(" "))),d=[],e=[];return b.forEach(a=>{let b=Array.isArray(a.keywords)?a.keywords.map(a=>A(a)).filter(Boolean):[],f=c.some(a=>b.some(b=>a.includes(b))),g={id:a.id,label:a.label};f?d.push(g):e.push(g)}),{required:b.map(a=>({id:a.id,label:a.label})),matched:d,missing:e,complete:0===e.length}}function P({session:a}){let u,G,P=(0,h.useToast)(),Q=(0,i.useConfirm)(),R=a?.role||"EMPLOYEE_L1",S=E(R),T=!String(R||"").trim().toUpperCase().startsWith("EMPLOYEE_"),U=(u=String(a?.email||"").trim().toLowerCase(),G=(0,j.formatPersonName)({firstName:a?.firstName,middleName:a?.middleName,lastName:a?.lastName,fallbackEmail:u,fallbackLabel:"System"}),u&&G.toLowerCase()!==u?`${G} (${u})`:G),[V,W]=(0,c.useState)("workflow-status-tracking"),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)(!0),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(x),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(1),[ar,as]=(0,c.useState)([]),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)(""),[ax,ay]=(0,c.useState)({roles:q,departments:s}),[az,aA]=(0,c.useState)(!1),[aB,aC]=(0,c.useState)(""),[aD,aE]=(0,c.useState)([]),[aF,aG]=(0,c.useState)([]),[aH,aI]=(0,c.useState)([]),aJ=(0,c.useRef)(null),aK=(0,c.useMemo)(()=>m.find(a=>a.id===V)||m[0],[V]),aL=n[V]||"",aM=o[V]||o["workflow-status-tracking"],aN=(0,c.useMemo)(()=>{let a=H(ax.roles,q),b=new Map;return a.forEach(a=>{let c=E(a?.value);if(!c)return;let d=r.get(c),e={value:String(a.value||"").trim(),label:d||String(a.label||a.value||"").trim()};b.has(c)||b.set(c,e)}),r.forEach((a,c)=>{b.has(c)||b.set(c,{value:c,label:a})}),Array.from(b.values())},[ax.roles]),aO=(0,c.useMemo)(()=>H(ax.departments,s),[ax.departments]),aP=(0,c.useMemo)(()=>aN.filter(a=>{let b,c=E(a.value);return!!c&&!!v.has(c)&&("SUPER_ADMIN"===S||("GRC"===S?w.has(c):"EMPLOYEE"===(b=E(a.value))||b.startsWith("EMPLOYEE_")))}),[S,aN]),aQ=(0,c.useCallback)(async()=>{$(!0),aa("");try{let a=await k.hrisApi.lifecycle.list();Y(Array.isArray(a.records)?a.records:[])}catch(a){aa(a.message||"Unable to load lifecycle records.")}finally{$(!1)}},[]);(0,c.useEffect)(()=>{aQ()},[aQ]);let aR=(0,c.useCallback)(async()=>{if(!T)return void ay({roles:q,departments:s});aA(!0);try{let a=await k.hrisApi.settings.referenceData.list();ay({roles:H(a?.catalogs?.roles,q),departments:H(a?.catalogs?.departments,s)})}catch{ay({roles:q,departments:s})}finally{aA(!1)}},[T]);(0,c.useEffect)(()=>{aR()},[aR]);let aS=(0,c.useCallback)(async()=>{if(T){au(!0),aw("");try{let a=await k.hrisApi.employees.list({page:1,pageSize:200}),b=Array.isArray(a?.records)?a.records:[],c=[],d=new Set;b.forEach(a=>{let b=function(a){let b=String(a?.id||"").trim(),c=String(a?.email||"").trim().toLowerCase();return b&&c?{id:b,email:c,name:(0,j.formatEmployeeName)({firstName:a?.firstName,middleName:a?.middleName,lastName:a?.lastName,suffix:a?.suffix,fallback:a?.name,fallbackEmail:a?.email,fallbackLabel:"Unnamed Employee"}),currentRole:String(a?.role||"").trim(),currentDepartment:String(a?.department||"").trim()}:null}(a);!b||d.has(b.id)||(d.add(b.id),c.push(b))}),as(c)}catch(a){as([]),aw(a.message||"Unable to load employee directory options.")}finally{au(!1)}}},[T]);(0,c.useEffect)(()=>{aS()},[aS]),(0,c.useEffect)(()=>{ag(a=>({...a,owner:U}))},[U]),(0,c.useEffect)(()=>{T&&0!==ar.length&&ag(a=>{if(J(a.category)||a.employeeRecordId&&ar.some(b=>b.id===a.employeeRecordId))return a;let b=ar[0];return{...a,employeeRecordId:b.id,employee:b.name,employeeEmail:b.email,onboardingRole:b.currentRole||"",onboardingDepartment:b.currentDepartment||"",roleFrom:b.currentRole||"",departmentFrom:b.currentDepartment||""}})},[T,ar]),(0,c.useEffect)(()=>{},[ah,ad]),(0,c.useEffect)(()=>{},[]);let aT=(0,c.useMemo)(()=>X.filter(a=>{let b="workflow-status-tracking"===V||A(a.category).includes(A(n[V])),c=!al||A(a.status).includes(A(al)),d=!an||[a.employee,a.employeeEmail,a.category,a.owner,a.status].map(a=>A(a)).some(a=>a.includes(A(an)));return b&&c&&d}),[X,V,al,an]),aU=(0,c.useMemo)(()=>{let a=aT.length,b=Math.max(1,Math.ceil(a/10));return{page:Math.min(Math.max(1,ap),b),pageSize:10,total:a,totalPages:b}},[aT.length,ap]),aV=(0,c.useMemo)(()=>{let a=(aU.page-1)*aU.pageSize;return aT.slice(a,a+aU.pageSize)},[aT,aU.page,aU.pageSize]);(0,c.useEffect)(()=>{aq(1)},[V,an,al]),(0,c.useEffect)(()=>{ap>aU.totalPages&&aq(aU.totalPages)},[ap,aU.totalPages]),(0,c.useEffect)(()=>{if(0===aT.length){aC(""),ak(!1);return}aB&&!aT.some(a=>a.id===aB)&&(aC(""),ak(!1))},[aT,aB]),(0,c.useEffect)(()=>{},[aj,ad]);let aW=(0,c.useMemo)(()=>X.find(a=>a.id===aB)||null,[X,aB]),aX=Array.isArray(aW?.workflow?.checklist)?aW.workflow.checklist:[],aY=Array.isArray(aW?.workflow?.stages)?aW.workflow.stages:[],aZ=Number.isFinite(Number(aW?.workflow?.stageIndex))?Number(aW.workflow.stageIndex):0,a$=Array.isArray(aW?.evidence)?aW.evidence:[],a_=(0,c.useMemo)(()=>O(aW),[aW]),a0=(0,c.useMemo)(()=>p[B(af.category)]||[],[af.category]),a1=(0,c.useMemo)(()=>B(af.category),[af.category]),a2=(0,c.useMemo)(()=>"disciplinary"===a1?aF:"offboarding"===a1?aH:aD,[a1,aF,aH,aD]),a3=(0,c.useMemo)(()=>{let a=aT.filter(a=>{let b=A(a.status);return b.includes("in progress")||b.includes("pending")}).length,b=aT.filter(a=>{let b=A(a.status);return b.includes("approved")||b.includes("completed")}).length;return{total:aT.length,inProgress:a,completed:b}},[aT]),a4=(0,c.useMemo)(()=>[{key:"total",label:"Total",value:a3.total},{key:"in-progress",label:"In Progress",value:a3.inProgress},{key:"completed",label:"Completed",value:a3.completed}],[a3]),a5=a=>b=>{ag(c=>({...c,[a]:b.target.value}))},a6=async b=>{if(b.preventDefault(),T){if(J(af.category)){if(!String(af.employeeEmail||"").trim())return void aa("Google account email is required for onboarding.");if(aD.find(a=>a.size>0xa00000)){aa("Each onboarding document must be 10MB or below."),P.error("Each onboarding document must be 10MB or below.");return}}if(("disciplinary"===a1||"offboarding"===a1)&&a2.find(a=>a.size>0xa00000)){let a="disciplinary"===a1?"disciplinary":"offboarding";aa(`Each ${a} document must be 10MB or below.`),P.error(`Each ${a} document must be 10MB or below.`);return}if(I(af.category)){let a=String(af.roleFrom||"").trim(),b=String(af.roleTo||"").trim();if(!a||!b)return void aa("Current role is missing on employee record. Set employee role first, then select new role.");if(!String(af.departmentFrom||"").trim())return void aa("Current department is missing on employee record. Set employee department first.")}if(await Q({title:"Create Lifecycle Workflow",message:`Create ${af.category} workflow for ${C(af.employeeEmail||af.employee)}?`,confirmText:"Create"})){ae(!0),aa(""),ac("");try{let b=J(af.category),c=b?L(af):af.employee,d=String(af.employeeEmail||"").trim(),e=b?af.activateEmploymentNow&&d?"Approved":"In Progress":af.status,f=await k.hrisApi.lifecycle.create({employeeEmail:af.employeeEmail,employee:c,category:af.category,owner:U,status:e,details:function(a){let b={note:String(a.details||"").trim()};if(J(a.category)){let c=String(a.onboardingStartDate||"").trim(),d=String(a.onboardingEmployeeId||"").trim(),e=String(a.onboardingFirstName||"").trim(),f=String(a.onboardingMiddleName||"").trim(),g=String(a.onboardingLastName||"").trim(),h=String(a.onboardingSuffix||"").trim(),i=String(a.onboardingRole||"").trim(),j=String(a.onboardingDepartment||"").trim();b.startDate=c,b.employeeId=d,b.firstName=e,b.middleName=f,b.lastName=g,b.suffix=h,b.role=i,b.roleTo=i,b.department=j,b.departmentTo=j,b.workSetup=String(a.workSetup||"").trim(),b.accountEmail=String(a.employeeEmail||"").trim().toLowerCase(),b.activateEmploymentNow=!!a.activateEmploymentNow}return I(a.category)&&(b.roleFrom=String(a.roleFrom||"").trim(),b.roleTo=String(a.roleTo||"").trim(),b.departmentFrom=String(a.departmentFrom||"").trim(),b.departmentTo=String(a.departmentTo||"").trim(),b.effectiveDate=String(a.effectiveDate||"").trim(),b.justification=String(a.justification||"").trim()),b}(af)}),g=String(f?.record?.id||"").trim(),h="onboarding"===a1?"Onboarding":"disciplinary"===a1?"Disciplinary":"offboarding"===a1?"Offboarding":"Evidence";if(g&&a2.length>0)for(let b of a2){let c=await (0,l.uploadLifecycleEvidenceToStorage)({file:b,lifecycleRecordId:g,employeeEmail:af.employeeEmail});await k.hrisApi.lifecycle.update(g,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:String(b.name||"").trim()||"Onboarding Document",type:h,ref:c.downloadUrl,storagePath:c.storagePath,contentType:c.contentType,sizeBytes:c.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:a?.email||"system@gmail.com"}}})}ag(x),aE([]),aG([]),aI([]),ai(!1);let i=M(f?.effects),j=a2.length>0?`${a2.length} ${h.toLowerCase()} document${a2.length>1?"s":""} uploaded. `:"",m=i?`${j}Lifecycle workflow created. ${i}`:`${j}Lifecycle workflow created.`,n=b&&af.activateEmploymentNow&&!d?" Saved as In Progress because account email is blank.":"",o=`${m}${n}`;ac(o),P.success(o),await aQ()}catch(b){let a=b.message||"Unable to create lifecycle workflow.";aa(a),P.error(a)}finally{ae(!1)}}}},a7=async(a,b,c)=>{if(a?.id&&b?.id&&T){ae(!0),aa(""),ac("");try{await k.hrisApi.lifecycle.update(a.id,{workflowAction:{type:"toggle-task",taskId:b.id,completed:c}});let d=c?"Checklist task marked as completed.":"Checklist task reverted to pending.";ac(d),P.success(d),await aQ()}catch(b){let a=b.message||"Unable to update checklist task.";aa(a),P.error(a)}finally{ae(!1)}}},a8=async(a,b)=>{if(a?.id&&T&&await Q({title:"Update Workflow Stage",message:"Update workflow stage for this case?",confirmText:"Update"})&&await Q({title:"Update Checklist Task",message:completed?`Mark "${C(task.label)}" as completed?`:`Set "${C(task.label)}" back to pending?`,confirmText:completed?"Mark Complete":"Set Pending"})){ae(!0),aa(""),ac("");try{await k.hrisApi.lifecycle.update(a.id,{workflowAction:{type:"set-stage",stageIndex:b}}),ac("Workflow stage updated."),P.success("Workflow stage updated."),await aQ()}catch(b){let a=b.message||"Unable to update workflow stage.";aa(a),P.error(a)}finally{ae(!1)}}},a9=async a=>{if(!a?.id||!T)return;let b=O(a);if(!b.complete){let a=`Required offboarding documents are missing: ${b.missing.map(a=>a.label).join(", ")}.`;aa(`Required offboarding documents are missing: ${b.missing.map(a=>a.label).join(", ")}.`),P.error(a),ac("");return}if(await Q({title:"Trigger Offboarding",message:"Trigger immediate offboarding and access revocation for this employee?",confirmText:"Offboard",tone:"danger"})){ae(!0),aa(""),ac("");try{let b=await k.hrisApi.lifecycle.offboard(a.id,{reason:"Resignation"}),c=M(b?.effects);ac(c?`Offboarding completed. ${c}`:"Offboarding completed. Access revocation has been triggered."),P.success("Offboarding completed."),await aQ()}catch(b){let a=b.message||"Unable to complete offboarding.";aa(a),P.error(a)}finally{ae(!1)}}},ba=async b=>{let c=b.target.files?.[0];if(!c||!aW||!T){b.target.value="";return}if(c.size>0xa00000){aa("Evidence upload is limited to 10MB per file."),P.error("Evidence upload is limited to 10MB per file."),b.target.value="";return}if(!await Q({title:"Upload Evidence",message:`Upload evidence file "${c.name}" to this workflow?`,confirmText:"Upload"})){b.target.value="";return}ae(!0),aa(""),ac("");try{let b=await (0,l.uploadLifecycleEvidenceToStorage)({file:c,lifecycleRecordId:aW.id,employeeEmail:aW.employeeEmail});await k.hrisApi.lifecycle.update(aW.id,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}`,name:String(c.name||"").trim()||"Evidence File",ref:b.downloadUrl,storagePath:b.storagePath,contentType:b.contentType,sizeBytes:b.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:a?.email||"system@gmail.com"}}}),ac("Evidence file uploaded."),P.success("Evidence file uploaded."),await aQ()}catch(b){let a=b.message||"Unable to upload evidence file.";aa(a),P.error(a)}finally{ae(!1),b.target.value=""}},bb=async(a,b)=>{if(!a?.id||!b?.id||!T)return;let c=String(b?.name||"evidence file").trim();if(await Q({title:"Remove Evidence",message:`Remove evidence "${c}" from this workflow?`,confirmText:"Remove",tone:"danger"})){ae(!0),aa(""),ac("");try{await k.hrisApi.lifecycle.update(a.id,{workflowAction:{type:"remove-evidence",evidenceId:b.id}});let c=String(b?.storagePath||"").trim();c&&(0,l.removeStorageObjectByPath)(c).catch(()=>null),ac("Evidence file removed."),P.success("Evidence file removed."),await aQ()}catch(b){let a=b.message||"Unable to remove evidence file.";aa(a),P.error(a)}finally{ae(!1)}}},bc=()=>{ad||(aE([]),aG([]),aI([]),ai(!1))},bd=()=>{ad||ak(!1)},be=a=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"font-medium text-slate-900",children:C(a.employee)}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:C(a.employeeEmail)})]}),bf=(a,c)=>{let d,e;return(0,b.jsx)("td",{className:"px-2 py-3 text-right",children:(d=O(a),e=N(a)&&!d.complete,(0,b.jsxs)("div",{className:"inline-flex flex-wrap items-center justify-end gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{var b;(b=a.id)&&(aC(b),ak(!0))},className:`rounded-lg border px-2.5 py-1.5 text-xs font-medium transition ${c?"border-sky-300 bg-sky-50 text-sky-700":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:c?"Opened":"Open Workflow"}),T&&N(a)?(0,b.jsx)("button",{type:"button",onClick:()=>a9(a),disabled:ad||e,title:e?"Attach required offboarding evidence first.":void 0,className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Offboard"}):null]}))})};return(0,b.jsxs)("div",{className:"space-y-4",children:[_?(0,b.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:_}):null,av?(0,b.jsx)("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-700",children:av}):null,ab?(0,b.jsx)("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:ab}):null,T&&ah?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-slate-900/45 p-4 sm:items-center",role:"dialog","aria-modal":"true","aria-label":"Create Lifecycle Workflow",onClick:bc,children:(0,b.jsxs)("div",{className:"my-4 flex max-h-[calc(100vh-2rem)] w-full max-w-5xl flex-col rounded-2xl border border-slate-200 bg-white p-5 shadow-2xl sm:p-6",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Create Lifecycle Workflow"}),(0,b.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Onboarding, role change, disciplinary, and offboarding actions"})]}),(0,b.jsx)("button",{type:"button",onClick:bc,disabled:ad,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-70","aria-label":"Close create workflow modal",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,b.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,b.jsxs)("form",{className:"mt-4 grid flex-1 gap-3 overflow-y-auto pr-1 md:grid-cols-3",onSubmit:a6,children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Lifecycle Category"}),(0,b.jsxs)("select",{value:af.category,onChange:a=>{let b=a.target.value,c=B(b),d=J(b);"onboarding"!==c&&aE([]),"disciplinary"!==c&&aG([]),"offboarding"!==c&&aI([]),ag(a=>{if(d)return{...a,category:b,employeeRecordId:"",employee:L(a),employeeEmail:"",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",departmentFrom:""};let c=ar.find(b=>b.id===a.employeeRecordId)||ar[0]||null;return{...a,category:b,employeeRecordId:c?.id||a.employeeRecordId||"",employee:c?.name||a.employee||"",employeeEmail:c?.email||a.employeeEmail||"",onboardingRole:c?.currentRole||a.onboardingRole||"",onboardingDepartment:c?.currentDepartment||a.onboardingDepartment||"",roleFrom:c?.currentRole||a.roleFrom||"",departmentFrom:c?.currentDepartment||a.departmentFrom||""}})},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{children:"Onboarding"}),(0,b.jsx)("option",{children:"Role Change"}),(0,b.jsx)("option",{children:"Disciplinary"}),(0,b.jsx)("option",{children:"Offboarding"})]})]}),J(af.category)?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,b.jsx)("input",{value:af.activateEmploymentNow?"Approved (auto on create)":"In Progress",readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}):(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,b.jsxs)("select",{value:af.status,onChange:a5("status"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{children:"In Progress"}),(0,b.jsx)("option",{children:"Completed"}),(0,b.jsx)("option",{children:"Approved"}),(0,b.jsx)("option",{children:"Rejected"})]})]}),a0.length>0?(0,b.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 md:col-span-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-amber-700",children:"Required Documents For Final Status"}),(0,b.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:a0.map(a=>(0,b.jsx)("span",{className:"inline-flex rounded-md border border-amber-200 bg-white px-2 py-1 text-[11px] font-medium text-amber-700",children:a.label},a.id))}),(0,b.jsx)("p",{className:"mt-1.5 text-[11px] text-amber-700",children:"You cannot set this workflow to Approved/Completed/Access Revoked until all required documents are attached."})]}):null,J(af.category)?(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 md:col-span-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Steps"}),(0,b.jsxs)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:[(0,b.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"1. Encode Employee Details"}),(0,b.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"2. Upload Documents"}),(0,b.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"3. Create Account"}),(0,b.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"4. Activate Employment"})]})]}):null,J(af.category)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Number"}),(0,b.jsx)("input",{value:af.onboardingEmployeeId,onChange:a5("onboardingEmployeeId"),placeholder:"Employee number",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Last Name"}),(0,b.jsx)("input",{value:af.onboardingLastName,onChange:a5("onboardingLastName"),placeholder:"Last name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"First Name"}),(0,b.jsx)("input",{value:af.onboardingFirstName,onChange:a5("onboardingFirstName"),placeholder:"First name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Middle Name"}),(0,b.jsx)("input",{value:af.onboardingMiddleName,onChange:a5("onboardingMiddleName"),placeholder:"Middle name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Suffix"}),(0,b.jsx)("input",{value:af.onboardingSuffix,onChange:a5("onboardingSuffix"),placeholder:"Suffix (optional)",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Account Email (Google Sign-In)"}),(0,b.jsx)("input",{required:!0,value:af.employeeEmail,onChange:a5("employeeEmail"),type:"email",placeholder:"employee@gmail.com",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Role"}),(0,b.jsxs)("select",{value:af.onboardingRole,onChange:a5("onboardingRole"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select role"}),aP.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},`onboarding-role-${a.value}`))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Department"}),(0,b.jsxs)("select",{value:af.onboardingDepartment,onChange:a5("onboardingDepartment"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select department"}),aO.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},`onboarding-department-${a.value}`))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Work Setup"}),(0,b.jsx)("select",{value:af.workSetup,onChange:a5("workSetup"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:t.map(a=>(0,b.jsx)("option",{value:a,children:a},`work-setup-${a}`))})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Start Date"}),(0,b.jsx)("input",{type:"date",value:af.onboardingStartDate,onChange:a5("onboardingStartDate"),className:"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Generated Employee Display Name"}),(0,b.jsx)("input",{value:L(af),readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,b.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Upload Onboarding Documents"}),(0,b.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:a=>{aE(Array.from(a.target.files||[]).slice(0,10))},className:"block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-2.5 file:py-1.5 file:text-xs file:font-semibold file:text-slate-700 hover:file:bg-slate-200"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"Add contracts, IDs, NDA, and other onboarding files (max 10 files, 10 MB each)."}),aD.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:aD.map((a,c)=>(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-[11px] text-slate-700",children:[(0,b.jsx)("span",{className:"max-w-[210px] truncate",children:a.name}),(0,b.jsxs)("span",{className:"text-slate-500",children:["(",D(a.size),")"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{aE(a=>a.filter((a,b)=>b!==c))},className:"rounded px-1 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":`Remove ${a.name}`,children:"x"})]},`${a.name}-${a.size}-${a.lastModified}-${c}`))}):(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"No files selected."})]}),(0,b.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Activate Employment"}),(0,b.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:[(0,b.jsx)("input",{type:"checkbox",checked:!!af.activateEmploymentNow,onChange:a=>{ag(b=>({...b,activateEmploymentNow:!!a.target.checked}))},className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Activate employment immediately after onboarding is created."]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Name"}),(0,b.jsxs)("select",{required:!0,value:af.employeeRecordId,onChange:a=>{let b=a.target.value,c=ar.find(a=>a.id===b);ag(a=>({...a,employeeRecordId:b,employee:c?.name||"",employeeEmail:c?.email||"",onboardingRole:c?.currentRole||"",onboardingDepartment:c?.currentDepartment||"",roleFrom:c?.currentRole||"",departmentFrom:c?.currentDepartment||""}))},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:at?"Loading employee names...":"Select employee name"}),ar.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},`name-${a.id}`))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Email"}),(0,b.jsx)("input",{value:af.employeeEmail,readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]})]}),I(af.category)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Role"}),(0,b.jsx)("input",{value:C(F(af.roleFrom)),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Role"}),(0,b.jsxs)("select",{required:!0,value:af.roleTo,onChange:a5("roleTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select role"}),aP.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},`role-to-${a.value}`))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Effective Date"}),(0,b.jsx)("input",{value:af.effectiveDate,onChange:a5("effectiveDate"),type:"date",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Department"}),(0,b.jsx)("input",{value:C(af.departmentFrom),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Department"}),(0,b.jsxs)("select",{value:af.departmentTo,onChange:a5("departmentTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select department"}),aO.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},`department-to-${a.value}`))]})]}),(0,b.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Role Change Justification"}),(0,b.jsx)("input",{value:af.justification,onChange:a5("justification"),placeholder:"Enter justification",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]})]}):null,"disciplinary"===a1||"offboarding"===a1?(0,b.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,b.jsxs)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:["Upload ","disciplinary"===a1?"Disciplinary":"Offboarding"," Documents"]}),(0,b.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.xls,.xlsx,.csv,.txt",onChange:a=>{let b=Array.from(a.target.files||[]).slice(0,10);"disciplinary"===a1?aG(b):"offboarding"===a1&&aI(b)},className:"block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-2.5 file:py-1.5 file:text-xs file:font-semibold file:text-slate-700 hover:file:bg-slate-200"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"Attach supporting files now (max 10 files, 10 MB each)."}),a2.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a2.map((a,c)=>(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-[11px] text-slate-700",children:[(0,b.jsx)("span",{className:"max-w-[210px] truncate",children:a.name}),(0,b.jsxs)("span",{className:"text-slate-500",children:["(",D(a.size),")"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{"disciplinary"===a1?aG(a=>a.filter((a,b)=>b!==c)):"offboarding"===a1&&aI(a=>a.filter((a,b)=>b!==c))},className:"rounded px-1 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":`Remove ${a.name}`,children:"x"})]},`${a.name}-${a.size}-${a.lastModified}-${c}`))}):(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"No files selected."})]}):null,(0,b.jsxs)("div",{className:`space-y-1 ${I(af.category)||J(af.category)?"md:col-span-3":""}`,children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Notes"}),(0,b.jsx)("input",{value:af.details,onChange:a5("details"),placeholder:J(af.category)?"Onboarding notes":"Details / notes",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 z-10 mt-1 flex items-center justify-end gap-2 border-t border-slate-200 bg-white pt-3 md:col-span-3",children:[(0,b.jsx)("button",{type:"button",onClick:bc,disabled:ad,className:"inline-flex h-9 items-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-70",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:ad||at||az||(J(af.category)?!String(af.employeeEmail||"").trim():0===ar.length||!af.employeeRecordId),className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:ad?"Saving...":"Create Workflow"})]})]})]})}):null,(0,b.jsx)(d.default,{title:aK.label,subtitle:aM,children:(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:a4.map(a=>(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:a.label}),(0,b.jsx)("p",{className:"mt-0.5 text-lg font-semibold text-slate-900",children:a.value})]},a.key))})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.default,{title:"Lifecycle Records",subtitle:"Dedicated workflow records by lifecycle module with strict audit traceability",action:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[T?(0,b.jsx)("button",{type:"button",onClick:()=>{let a=aL||"Onboarding",b=J(a),c=!b&&(ar.find(a=>a.id===af.employeeRecordId)||ar[0])||null;ag(d=>({...x,employeeRecordId:b?"":c?.id||d.employeeRecordId||"",employee:b?"":c?.name||d.employee||"",employeeEmail:b?"":c?.email||d.employeeEmail||"",onboardingRole:b?"":c?.currentRole||d.onboardingRole||"",onboardingDepartment:b?"":c?.currentDepartment||d.onboardingDepartment||"",roleFrom:b?"":c?.currentRole||d.roleFrom||"",departmentFrom:b?"":c?.currentDepartment||d.departmentFrom||"",category:a,owner:U,status:"In Progress"})),aE([]),aG([]),aI([]),ai(!0)},className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700",children:"Create Lifecycle Workflow"}):null,(0,b.jsx)("input",{value:an,onChange:a=>ao(a.target.value),placeholder:"Search workflow",className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none"}),(0,b.jsxs)("select",{value:al,onChange:a=>am(a.target.value),className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"in progress",children:"In Progress"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"rejected",children:"Rejected"}),(0,b.jsx)("option",{value:"revoked",children:"Access Revoked"})]})]}),children:Z?(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Loading lifecycle records..."}):0===aT.length?(0,b.jsx)(e.default,{title:"No lifecycle workflows found",subtitle:"Create a workflow or change filters to view results."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-[1180px] w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:"onboarding"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee Number"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"role-changes"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Role From -> Role To"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Department From -> Department To"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"disciplinary-records"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Checklist"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"offboarding-access-revocation"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Access Revoked At"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archive Until"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Category"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]})})}),(0,b.jsx)("tbody",{children:aV.map(a=>{let c,d={completed:(c=(Array.isArray(a?.workflow?.checklist)?a.workflow.checklist:[]).filter(a=>a?.required!==!1)).filter(a=>"completed"===A(a?.status)).length,total:c.length},e=aj&&aB===a.id;return(0,b.jsx)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:((a,{checklistProgress:c,rowSelected:d})=>{let e,f,h,i,j,k,l,m,n,o=(e=K(a),String(e?.effectiveDate||e?.startDate||"").trim()||""),p=String(a?.owner||"").trim(),q=function(a){let b=Array.isArray(a?.traceability)?a.traceability:[];for(let a=b.length-1;a>=0;a-=1){let c=b[a],d=A(c?.status);if(d.includes("approved")||d.includes("completed")||d.includes("rejected")){let a=String(c?.at||"").trim();if(a)return a}}let c=A(a?.status);return c.includes("approved")||c.includes("completed")||c.includes("rejected")?String(a?.updatedAt||a?.createdAt||"").trim():""}(a),r=(f=K(a),h=String(f?.roleFrom||"").trim(),i=String(f?.roleTo||f?.role||"").trim(),h||i?`${F(h||"-")} -> ${F(i||"-")}`:""),s=(j=K(a),k=String(j?.departmentFrom||"").trim(),l=String(j?.departmentTo||j?.department||"").trim(),k||l?`${k||"-"} -> ${l||"-"}`:""),t=(m=K(a),String(m?.employeeId||m?.employeeNumber||"").trim()||""),u=function(a){if((Array.isArray(a?.lastAutomationEffects)?a.lastAutomationEffects:[]).some(a=>"access-revocation"===A(a?.type)))return String(a?.lastAutomationAt||a?.updatedAt||"").trim();let b=A(a?.status);return b.includes("revoked")||b.includes("terminated")||b.includes("disabled")?String(a?.updatedAt||"").trim():""}(a),v=(n=(Array.isArray(a?.lastAutomationEffects)?a.lastAutomationEffects:[]).find(a=>"archive-policy"===A(a?.type)),String(n?.retentionDeleteAt||a?.retentionDeleteAt||"").trim()||"");return"onboarding"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-2 py-3",children:be(a)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(t)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:z(o)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(p)}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:q?y(q):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:y(a.updatedAt||a.createdAt)}),bf(a,d)]}):"role-changes"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-2 py-3",children:be(a)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(r)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(s)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:z(o)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(p)}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:q?y(q):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:y(a.updatedAt||a.createdAt)}),bf(a,d)]}):"disciplinary-records"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-2 py-3",children:be(a)}),(0,b.jsx)("td",{className:"px-2 py-3",children:C(a?.workflow?.stage)}),(0,b.jsxs)("td",{className:"px-2 py-3 text-xs",children:[c.completed,"/",c.total]}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:z(o)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(p)}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:q?y(q):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:y(a.updatedAt||a.createdAt)}),bf(a,d)]}):"offboarding-access-revocation"===V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-2 py-3",children:be(a)}),(0,b.jsx)("td",{className:"px-2 py-3",children:C(a?.workflow?.stage)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(p)}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:u?y(u):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:v?y(v):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:y(a.updatedAt||a.createdAt)}),bf(a,d)]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-2 py-3",children:be(a)}),(0,b.jsx)("td",{className:"px-2 py-3",children:C(a.category)}),(0,b.jsx)("td",{className:"px-2 py-3",children:C(a?.workflow?.stage)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:z(o)}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:C(p)}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs",children:q?y(q):"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:y(a.updatedAt||a.createdAt)}),bf(a,d)]})})(a,{checklistProgress:d,rowSelected:e})},a.id)})})]})}),(0,b.jsx)(f.default,{pagination:aU,onPageChange:aq})]})}),aj?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 p-4",role:"dialog","aria-modal":"true","aria-label":"Workflow Console",onClick:bd,children:(0,b.jsxs)("div",{className:"w-full max-w-5xl rounded-2xl border border-slate-200 bg-white p-4 shadow-2xl sm:p-5",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Workflow Console"}),(0,b.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Checklist automation, stage control, and lifecycle evidence management"})]}),(0,b.jsx)("button",{type:"button",onClick:bd,disabled:ad,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-60","aria-label":"Close workflow console",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,b.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,b.jsx)(d.default,{children:aW?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:C(aW.employee)}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:C(aW.employeeEmail)})]}),T?(0,b.jsx)("select",{value:aZ,onChange:a=>a8(aW,Number.parseInt(a.target.value,10)||0),disabled:ad,className:"h-8 rounded-md border border-slate-300 bg-white px-2.5 text-xs text-slate-700 focus:border-sky-400 focus:outline-none",children:aY.map((a,c)=>(0,b.jsx)("option",{value:c,children:a},`${a}-${c}`))}):null]}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[11px] text-slate-600",children:[(0,b.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["Stage: ",C(aW?.workflow?.stage)]}),(0,b.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["SLA Due: ",z(aW?.workflow?.slaDueAt)]})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Checklist Automation"}),(0,b.jsx)("div",{className:"mt-2 space-y-2",children:0===aX.length?(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"No checklist tasks generated yet."}):aX.map(a=>{let c="completed"===A(a?.status);return(0,b.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-slate-800",children:C(a.label)}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-500",children:["Due: ",y(a.dueAt)," | Status: ",C(a.status)]})]}),T?(0,b.jsx)("button",{type:"button",onClick:()=>a7(aW,a,!c),disabled:ad,className:`inline-flex h-7 items-center rounded-md border px-2.5 text-[11px] font-semibold transition disabled:opacity-60 ${c?"border-amber-200 bg-amber-50 text-amber-700 hover:bg-amber-100":"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:c?"Set Pending":"Mark Complete"}):null]})},a.id)})})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Evidence Attachments"}),T?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>aJ.current?.click(),disabled:ad,className:"inline-flex h-8 items-center rounded-md border border-slate-300 bg-white px-3 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-60",children:"Upload Evidence"}),(0,b.jsx)("input",{ref:aJ,type:"file",className:"hidden",onChange:ba})]}):null]}),a_.required.length>0?(0,b.jsxs)("div",{className:"mt-2 rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Required Documents"}),(0,b.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:a_.required.map(a=>{let c=a_.matched.some(b=>b.id===a.id);return(0,b.jsx)("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] ${c?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:a.label},a.id)})}),a_.complete?(0,b.jsx)("p",{className:"mt-1.5 text-[11px] text-emerald-700",children:"Required evidence complete."}):(0,b.jsx)("p",{className:"mt-1.5 text-[11px] text-amber-700",children:"Final status is blocked until all required documents are attached."})]}):null,(0,b.jsx)("div",{className:"mt-2 space-y-2",children:0===a$.length?(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"No evidence files attached."}):a$.map(a=>(0,b.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-slate-800",children:C(a.name)}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-500",children:[D(a.sizeBytes)," | ",y(a.uploadedAt)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[String(a.ref||"").trim()?(0,b.jsx)("a",{href:String(a.ref),target:"_blank",rel:"noreferrer",className:"inline-flex h-7 items-center rounded-md border border-sky-200 bg-sky-50 px-2.5 text-[11px] font-semibold text-sky-700 transition hover:bg-sky-100",children:"Open"}):null,T?(0,b.jsx)("button",{type:"button",onClick:()=>bb(aW,a),disabled:ad,className:"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-[11px] font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Remove"}):null]})]})},a.id))})]})]}):(0,b.jsx)(e.default,{title:"No workflow selected",subtitle:"Open a lifecycle record from the table to continue."})})]})}):null]})]})}a.s(["default",()=>P])}];

//# sourceMappingURL=src_components_hris_modules_EmploymentLifecycleModule_jsx_59ec30d3._.js.map