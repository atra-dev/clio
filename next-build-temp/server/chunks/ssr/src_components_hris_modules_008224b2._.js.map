{"version":3,"sources":["../../../../src/components/hris/modules/SettingsMfaModule.jsx","../../../../src/components/hris/modules/SettingsReferenceDataModule.jsx","../../../../src/components/hris/modules/SettingsRecentActivityPanel.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\r\nimport { useToast } from \"@/components/ui/ToastProvider\";\r\n\r\nfunction formatDateTime(value) {\r\n  const parsed = value ? new Date(value) : null;\r\n  if (!parsed || Number.isNaN(parsed.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return new Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"short\",\r\n    day: \"2-digit\",\r\n    year: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(parsed);\r\n}\r\n\r\nfunction normalizeProfile(payload) {\r\n  return {\r\n    firstName: String(payload?.firstName || \"\"),\r\n    middleName: String(payload?.middleName || \"\"),\r\n    lastName: String(payload?.lastName || \"\"),\r\n    profilePhotoDataUrl: String(payload?.profilePhotoDataUrl || \"\"),\r\n    profilePhotoStoragePath: String(payload?.profilePhotoStoragePath || \"\"),\r\n    phoneVerifiedAt: String(payload?.phoneVerifiedAt || \"\"),\r\n    phoneLast4: String(payload?.phoneLast4 || \"\"),\r\n    smsMfaEnabled: Boolean(payload?.smsMfaEnabled),\r\n  };\r\n}\r\n\r\nexport default function SettingsMfaModule() {\r\n  const toast = useToast();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [profile, setProfile] = useState(() => normalizeProfile({}));\r\n  const [draftEnabled, setDraftEnabled] = useState(false);\r\n\r\n  const loadProfile = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setErrorMessage(\"\");\r\n    try {\r\n      const response = await fetch(\"/api/auth/profile\", { method: \"GET\", cache: \"no-store\" });\r\n      const payload = await response.json().catch(() => ({}));\r\n      if (!response.ok) {\r\n        throw new Error(payload?.message || \"Unable to load account security settings.\");\r\n      }\r\n      const normalized = normalizeProfile(payload);\r\n      setProfile(normalized);\r\n      setDraftEnabled(Boolean(normalized.smsMfaEnabled));\r\n    } catch (error) {\r\n      setErrorMessage(error?.message || \"Unable to load account security settings.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadProfile();\r\n  }, [loadProfile]);\r\n\r\n  const isPhoneVerified = Boolean(profile.phoneVerifiedAt);\r\n  const hasChanges = draftEnabled !== Boolean(profile.smsMfaEnabled);\r\n  const canToggle = isPhoneVerified || draftEnabled;\r\n  const statusLabel = draftEnabled ? \"Enabled\" : \"Disabled\";\r\n\r\n  const handleSave = async () => {\r\n    if (isSaving || !hasChanges) {\r\n      return;\r\n    }\r\n    if (draftEnabled && !isPhoneVerified) {\r\n      toast.error(\"Verify a mobile number first before enabling SMS MFA.\");\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    setErrorMessage(\"\");\r\n    try {\r\n      const response = await fetch(\"/api/auth/profile\", {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          firstName: profile.firstName,\r\n          middleName: profile.middleName,\r\n          lastName: profile.lastName,\r\n          profilePhotoDataUrl: profile.profilePhotoDataUrl || null,\r\n          profilePhotoStoragePath: profile.profilePhotoStoragePath || null,\r\n          smsMfaEnabled: draftEnabled,\r\n        }),\r\n      });\r\n      const payload = await response.json().catch(() => ({}));\r\n      if (!response.ok) {\r\n        throw new Error(payload?.message || \"Unable to save account security settings.\");\r\n      }\r\n\r\n      const nextProfile = normalizeProfile(payload?.profile || profile);\r\n      setProfile(nextProfile);\r\n      setDraftEnabled(Boolean(nextProfile.smsMfaEnabled));\r\n      toast.success(\"MFA preference updated.\");\r\n    } catch (error) {\r\n      setErrorMessage(error?.message || \"Unable to save account security settings.\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleToggle = () => {\r\n    if (isSaving || !canToggle) {\r\n      return;\r\n    }\r\n    setDraftEnabled((current) => !current);\r\n  };\r\n\r\n  return (\r\n    <SurfaceCard\r\n      title=\"Account Security\"\r\n      subtitle=\"Enable SMS MFA for your account sign-in\"\r\n    >\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-4\">\r\n          <span className=\"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600\" aria-hidden=\"true\" />\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {errorMessage ? (\r\n            <p className=\"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700\">\r\n              {errorMessage}\r\n            </p>\r\n          ) : null}\r\n\r\n          <div className=\"grid gap-3 sm:grid-cols-2\">\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50/80 p-3\">\r\n              <p className=\"text-xs uppercase tracking-[0.08em] text-slate-500\">MFA Status</p>\r\n              <div className=\"mt-2 flex items-center justify-between\">\r\n                <p className=\"text-sm font-semibold text-slate-900\">{statusLabel}</p>\r\n                <span\r\n                  className={`inline-flex rounded-full border px-2 py-0.5 text-[11px] font-semibold ${\r\n                    draftEnabled\r\n                      ? \"border-emerald-200 bg-emerald-50 text-emerald-700\"\r\n                      : \"border-slate-200 bg-white text-slate-600\"\r\n                  }`}\r\n                >\r\n                  {draftEnabled ? \"Protected\" : \"Standard\"}\r\n                </span>\r\n              </div>\r\n              <p className=\"mt-2 text-xs text-slate-600\">\r\n                {draftEnabled\r\n                  ? \"A code will be required on every sign-in.\"\r\n                  : \"Sign-in uses standard workspace verification.\"}\r\n              </p>\r\n            </article>\r\n\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50/80 p-3\">\r\n              <p className=\"text-xs uppercase tracking-[0.08em] text-slate-500\">Mobile Verification</p>\r\n              <p className=\"mt-2 text-sm font-semibold text-slate-900\">\r\n                {isPhoneVerified\r\n                  ? `Verified mobile ending in ${profile.phoneLast4 || \"****\"}`\r\n                  : \"No verified mobile number yet\"}\r\n              </p>\r\n              <p className=\"mt-2 text-xs text-slate-600\">\r\n                {isPhoneVerified\r\n                  ? `Verified at ${formatDateTime(profile.phoneVerifiedAt)}`\r\n                  : \"Complete one login SMS verification first, then enable MFA.\"}\r\n              </p>\r\n            </article>\r\n          </div>\r\n\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4\">\r\n            <div className=\"flex items-center justify-between gap-3\">\r\n              <div className=\"space-y-1\">\r\n                <p className=\"text-sm font-semibold text-slate-900\">Enable SMS MFA for every sign-in</p>\r\n                <p className=\"text-xs text-slate-600\">\r\n                  Add an OTP checkpoint each time this account signs in.\r\n                </p>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                role=\"switch\"\r\n                aria-checked={draftEnabled}\r\n                onClick={handleToggle}\r\n                disabled={isSaving || !canToggle}\r\n                className={`relative inline-flex h-7 w-12 items-center rounded-full transition ${\r\n                  draftEnabled ? \"bg-sky-600\" : \"bg-slate-300\"\r\n                } disabled:cursor-not-allowed disabled:opacity-60`}\r\n              >\r\n                <span\r\n                  className={`inline-block h-5 w-5 transform rounded-full bg-white transition ${\r\n                    draftEnabled ? \"translate-x-6\" : \"translate-x-1\"\r\n                  }`}\r\n                />\r\n              </button>\r\n            </div>\r\n            {!isPhoneVerified ? (\r\n              <p className=\"mt-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800\">\r\n                Mobile verification is required before enabling MFA.\r\n              </p>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between gap-3\">\r\n            <p className=\"text-xs text-slate-500\">\r\n              {hasChanges ? \"Unsaved security changes.\" : \"No pending changes.\"}\r\n            </p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSave}\r\n              disabled={isSaving || !hasChanges}\r\n              className=\"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n            >\r\n              {isSaving ? \"Saving...\" : \"Save MFA Setting\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\r\nimport ModuleTabs from \"@/components/hris/shared/ModuleTabs\";\r\nimport EmptyState from \"@/components/hris/shared/EmptyState\";\r\nimport { useToast } from \"@/components/ui/ToastProvider\";\r\nimport { useConfirm } from \"@/components/ui/ConfirmProvider\";\r\nimport { hrisApi } from \"@/services/hris-api-client\";\r\n\r\nconst SECTION_TABS = [\r\n  { id: \"roles\", label: \"Role Catalog\" },\r\n  { id: \"departments\", label: \"Department Catalog\" },\r\n];\r\n\r\nfunction asArray(value) {\r\n  return Array.isArray(value) ? value : [];\r\n}\r\n\r\nfunction normalizeLabel(value) {\r\n  return String(value || \"\")\r\n    .trim()\r\n    .replace(/\\s+/g, \" \");\r\n}\r\n\r\nfunction valueOrDash(value) {\r\n  const normalized = String(value || \"\").trim();\r\n  return normalized || \"-\";\r\n}\r\n\r\nexport default function SettingsReferenceDataModule() {\r\n  const toast = useToast();\r\n  const confirmAction = useConfirm();\r\n  const [section, setSection] = useState(\"roles\");\r\n  const [catalogs, setCatalogs] = useState({\r\n    roles: [],\r\n    departments: [],\r\n  });\r\n  const [draftBySection, setDraftBySection] = useState({\r\n    roles: \"\",\r\n    departments: \"\",\r\n  });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const loadCatalogs = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const payload = await hrisApi.settings.referenceData.list();\r\n      setCatalogs({\r\n        roles: asArray(payload?.catalogs?.roles),\r\n        departments: asArray(payload?.catalogs?.departments),\r\n      });\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to load reference catalog.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [toast]);\r\n\r\n  useEffect(() => {\r\n    loadCatalogs();\r\n  }, [loadCatalogs]);\r\n\r\n  const activeRows = useMemo(() => {\r\n    if (section === \"departments\") {\r\n      return asArray(catalogs.departments);\r\n    }\r\n    return asArray(catalogs.roles);\r\n  }, [catalogs.departments, catalogs.roles, section]);\r\n\r\n  const activeKind = section === \"departments\" ? \"department\" : \"role\";\r\n\r\n  const handleDraftChange = (event) => {\r\n    const nextValue = event.target.value;\r\n    setDraftBySection((current) => ({\r\n      ...current,\r\n      [section]: nextValue,\r\n    }));\r\n  };\r\n\r\n  const handleAdd = async (event) => {\r\n    event.preventDefault();\r\n    const label = normalizeLabel(draftBySection[section]);\r\n    if (!label) {\r\n      toast.error(`Enter a ${activeKind} value first.`);\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = await hrisApi.settings.referenceData.create({\r\n        kind: activeKind,\r\n        label,\r\n      });\r\n      setCatalogs({\r\n        roles: asArray(payload?.catalogs?.roles),\r\n        departments: asArray(payload?.catalogs?.departments),\r\n      });\r\n      setDraftBySection((current) => ({\r\n        ...current,\r\n        [section]: \"\",\r\n      }));\r\n      toast.success(`${section === \"roles\" ? \"Role\" : \"Department\"} added to catalog.`);\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to add reference value.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleRemove = async (entry) => {\r\n    if (!entry || entry.isSystem) {\r\n      return;\r\n    }\r\n\r\n    const valueLabel = valueOrDash(entry.label || entry.value);\r\n    const confirmed = await confirmAction({\r\n      title: `Remove ${section === \"roles\" ? \"Role\" : \"Department\"}`,\r\n      message: `Remove \"${valueLabel}\" from ${section === \"roles\" ? \"role\" : \"department\"} catalog?`,\r\n      confirmText: \"Remove\",\r\n      tone: \"danger\",\r\n    });\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = await hrisApi.settings.referenceData.remove({\r\n        kind: activeKind,\r\n        recordId: String(entry.id || \"\").trim(),\r\n      });\r\n      setCatalogs({\r\n        roles: asArray(payload?.catalogs?.roles),\r\n        departments: asArray(payload?.catalogs?.departments),\r\n      });\r\n      toast.success(\"Reference value removed.\");\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to remove reference value.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <SurfaceCard\r\n      title=\"Reference Data Catalog\"\r\n      subtitle=\"Centralized role and department options used across employee and lifecycle modules\"\r\n    >\r\n      <div className=\"space-y-3\">\r\n        <ModuleTabs tabs={SECTION_TABS} value={section} onChange={setSection} />\r\n\r\n        <form className=\"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto]\" onSubmit={handleAdd}>\r\n          <input\r\n            value={draftBySection[section]}\r\n            onChange={handleDraftChange}\r\n            placeholder={section === \"roles\" ? \"Add role option\" : \"Add department option\"}\r\n            className=\"h-9 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className=\"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n          >\r\n            Add {section === \"roles\" ? \"Role\" : \"Department\"}\r\n          </button>\r\n        </form>\r\n\r\n        {isLoading ? (\r\n          <div className=\"flex min-h-[120px] items-center justify-center\">\r\n            <div className=\"h-7 w-7 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600\" />\r\n          </div>\r\n        ) : activeRows.length === 0 ? (\r\n          <EmptyState\r\n            title={`No ${section} configured`}\r\n            subtitle={`Add ${section === \"roles\" ? \"roles\" : \"departments\"} to populate select options in modules.`}\r\n          />\r\n        ) : (\r\n          <div className=\"overflow-x-auto rounded-lg border border-slate-200\">\r\n            <table className=\"min-w-full text-left text-sm\">\r\n              <thead>\r\n                <tr className=\"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.08em] text-slate-500\">\r\n                  <th className=\"px-3 py-2 font-medium\">Value</th>\r\n                  <th className=\"px-3 py-2 font-medium\">Type</th>\r\n                  <th className=\"px-3 py-2 font-medium\">Source</th>\r\n                  <th className=\"px-3 py-2 font-medium text-right\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {activeRows.map((entry) => (\r\n                  <tr key={`${section}-${entry.id}-${entry.key || entry.value}`} className=\"border-b border-slate-100 last:border-b-0\">\r\n                    <td className=\"px-3 py-2 text-slate-900\">{valueOrDash(entry.label || entry.value)}</td>\r\n                    <td className=\"px-3 py-2 text-slate-600\">{section === \"roles\" ? \"Role\" : \"Department\"}</td>\r\n                    <td className=\"px-3 py-2\">\r\n                      <span\r\n                        className={`inline-flex rounded-full px-2 py-0.5 text-[11px] font-medium ${\r\n                          entry.isSystem\r\n                            ? \"border border-slate-200 bg-slate-100 text-slate-700\"\r\n                            : \"border border-sky-200 bg-sky-50 text-sky-700\"\r\n                        }`}\r\n                      >\r\n                        {entry.isSystem ? \"System default\" : \"Custom\"}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-3 py-2 text-right\">\r\n                      {entry.isSystem ? (\r\n                        <span className=\"text-xs text-slate-400\">Locked</span>\r\n                      ) : (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleRemove(entry)}\r\n                          disabled={isSubmitting}\r\n                          className=\"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-70\"\r\n                        >\r\n                          Remove\r\n                        </button>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </SurfaceCard>\r\n  );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\r\n\r\nfunction formatDateTime(value) {\r\n  const date = value ? new Date(value) : null;\r\n  if (!date || Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return new Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"short\",\r\n    day: \"2-digit\",\r\n    year: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(date);\r\n}\r\n\r\nfunction getStatusTone(value) {\r\n  const normalized = String(value || \"\").trim().toLowerCase();\r\n  if (normalized === \"failed\" || normalized === \"rejected\") {\r\n    return \"border-rose-200 bg-rose-50 text-rose-700\";\r\n  }\r\n  if (normalized === \"pending\") {\r\n    return \"border-amber-200 bg-amber-50 text-amber-700\";\r\n  }\r\n  return \"border-emerald-200 bg-emerald-50 text-emerald-700\";\r\n}\r\n\r\nexport default function SettingsRecentActivityPanel() {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [recentActivity, setRecentActivity] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const loadActivity = async () => {\r\n      setIsLoading(true);\r\n      setErrorMessage(\"\");\r\n      try {\r\n        const response = await fetch(\"/api/auth/profile/activity\", { method: \"GET\", cache: \"no-store\" });\r\n        const payload = await response.json().catch(() => ({}));\r\n        if (!response.ok) {\r\n          throw new Error(payload?.message || \"Unable to load recent account activity.\");\r\n        }\r\n        if (!isMounted) {\r\n          return;\r\n        }\r\n        setRecentActivity(Array.isArray(payload?.recentActivity) ? payload.recentActivity : []);\r\n      } catch (error) {\r\n        if (isMounted) {\r\n          setErrorMessage(error?.message || \"Unable to load recent account activity.\");\r\n        }\r\n      } finally {\r\n        if (isMounted) {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadActivity();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <SurfaceCard\r\n      title=\"Recent Account Activity\"\r\n      subtitle=\"Latest security and session events for this account\"\r\n    >\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-4\">\r\n          <span className=\"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600\" aria-hidden=\"true\" />\r\n        </div>\r\n      ) : errorMessage ? (\r\n        <p className=\"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700\">\r\n          {errorMessage}\r\n        </p>\r\n      ) : recentActivity.length === 0 ? (\r\n        <p className=\"text-xs text-slate-500\">No recent account activity.</p>\r\n      ) : (\r\n        <ul className=\"space-y-2.5\">\r\n          {recentActivity.map((item) => (\r\n            <li\r\n              key={item?.id || `${item?.activityName}-${item?.loggedAt}`}\r\n              className=\"rounded-xl border border-slate-200 bg-slate-50/80 px-3 py-2.5\"\r\n            >\r\n              <div className=\"flex items-start justify-between gap-3\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-xs font-semibold text-slate-900\">{String(item?.activityName || \"Activity\")}</p>\r\n                  <p className=\"text-[11px] text-slate-600\">\r\n                    {String(item?.module || \"System\")} | {item?.relativeTime || formatDateTime(item?.loggedAt)}\r\n                  </p>\r\n                </div>\r\n                <span\r\n                  className={`inline-flex rounded-full border px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.06em] ${getStatusTone(\r\n                    item?.status,\r\n                  )}`}\r\n                >\r\n                  {String(item?.status || \"Completed\")}\r\n                </span>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAgBA,SAAS,EAAiB,CAAO,EAC/B,MAAO,CACL,UAAW,OAAO,GAAS,WAAa,IACxC,WAAY,OAAO,GAAS,YAAc,IAC1C,SAAU,OAAO,GAAS,UAAY,IACtC,oBAAqB,OAAO,GAAS,qBAAuB,IAC5D,wBAAyB,OAAO,GAAS,yBAA2B,IACpE,gBAAiB,OAAO,GAAS,iBAAmB,IACpD,WAAY,OAAO,GAAS,YAAc,IAC1C,cAAe,EAAQ,GAAS,aAClC,CACF,CAEe,SAAS,UACtB,MAAM,EAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,IAChB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAAM,EAAiB,CAAC,IACzD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAE3C,EAAc,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC9B,GAAa,GACb,EAAgB,IAChB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAAE,OAAQ,MAAO,MAAO,UAAW,GAC/E,EAAU,MAAM,EAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EACrD,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,GAAS,SAAW,6CAEtC,IAAM,EAAa,EAAiB,GACpC,EAAW,GACX,GAAgB,CAAQ,EAAW,aAAa,CAClD,CAAE,MAAO,EAAO,CACd,EAAgB,GAAO,SAAW,4CACpC,QAAU,CACR,GAAa,EACf,CACF,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAY,EAEhB,IAAM,GAAkB,CAAQ,EAAQ,eAAe,CACjD,EAAa,AAAiB,EAAQ,EAAQ,aAAa,KAC3D,EAAY,GAAmB,EAC/B,EAAc,EAAe,UAAY,WAEzC,EAAa,UACjB,IAAI,GAAa,GAGjB,GAAI,GAHY,AAGI,CAAC,EAHQ,AAGS,YACpC,EAAM,KAAK,CAAC,yDAId,GAAY,GACZ,EAAgB,IAChB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAChD,OAAQ,MACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,UAAW,EAAQ,SAAS,CAC5B,WAAY,EAAQ,UAAU,CAC9B,SAAU,EAAQ,QAAQ,CAC1B,oBAAqB,EAAQ,mBAAmB,EAAI,KACpD,wBAAyB,EAAQ,uBAAuB,EAAI,KAC5D,cAAe,CACjB,EACF,GACM,EAAU,MAAM,EAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC,GACrD,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,GAAS,SAAW,6CAGtC,IAAM,EAAc,EAAiB,GAAS,SAAW,GACzD,EAAW,GACX,GAAgB,CAAQ,EAAY,aAAa,EACjD,EAAM,OAAO,CAAC,0BAChB,CAAE,MAAO,EAAO,CACd,EAAgB,GAAO,SAAW,4CACpC,QAAU,CACR,GAAY,EACd,EACF,EASA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CACV,MAAM,mBACN,SAAS,mDAER,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2FAA2F,cAAY,WAGzH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wFACV,IAED,KAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kEACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8DAAqD,eAClE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDAAwC,IACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,sEAAsE,EAChF,EACI,oDACA,2CAAA,CACJ,UAED,EAAe,YAAc,gBAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCACV,EACG,4CACA,qDAIR,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kEACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8DAAqD,wBAClE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDACV,EACG,CAAC,0BAA0B,EAAE,EAAQ,UAAU,EAAI,OAAA,CAAQ,CAC3D,kCAEN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCACV,EACG,CAAC,YAAY,EAAE,AA9J7B,CAAC,CADC,EAAS,CADO,EAgK0B,EAAQ,CAhK7B,cAgK4C,EA/JhD,IAAI,KAAK,GAAS,OAC1B,OAAO,KAAK,CAAC,EAAO,OAAO,IACjC,CADsC,GAGxC,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,MAAO,QACP,IAAK,UACL,KAAM,UACN,KAAM,UACN,OAAQ,SACV,GAAG,MAAM,CAAC,GAqJ6D,CAAG,CACxD,sEAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDAAuC,qCACpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,8DAIxC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,KAAK,SACL,eAAc,EACd,QAzEO,CAyEE,KAxEjB,GAAa,GAGjB,EAAiB,AAAD,GAAa,CAAC,AAHd,EAAY,AAI9B,EAqEc,SAAU,GAAY,CAAC,EACvB,UAAW,CAAC,mEAAmE,EAC7E,EAAe,aAAe,eAC/B,gDAAgD,CAAC,UAElD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,gEAAgE,EAC1E,EAAe,gBAAkB,gBAAA,CACjC,QAIP,AAAC,EAIE,KAHF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gGAAuF,4DAMxG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCACV,EAAa,4BAA8B,wBAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,SAAU,GAAY,CAAC,EACvB,UAAU,mKAET,EAAW,YAAc,4BAOxC,iEC3NA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAe,CACnB,CAAE,GAAI,QAAS,MAAO,cAAe,EACrC,CAAE,GAAI,cAAe,MAAO,oBAAqB,EAClD,CAED,SAAS,EAAQ,CAAK,EACpB,OAAO,MAAM,OAAO,CAAC,GAAS,EAAQ,EAAE,AAC1C,CAQA,SAAS,EAAY,CAAK,EAExB,OADmB,AACZ,OADmB,GAAS,IAAI,IAAI,IACtB,GACvB,CAEe,SAAS,IACtB,IAAM,EAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,IAChB,EAAgB,CAAA,EAAA,EAAA,UAAA,AAAU,IAC1B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,SACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,MAAO,EAAE,CACT,YAAa,EAAE,AACjB,GACM,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACnD,MAAO,GACP,YAAa,EACf,GACM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAE3C,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC/B,GAAa,GACb,GAAI,CACF,IAAM,EAAU,MAAM,EAAA,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,GACzD,EAAY,CACV,MAAO,EAAQ,GAAS,UAAU,OAClC,YAAa,EAAQ,GAAS,UAAU,YAC1C,EACF,CAAE,MAAO,EAAO,CACd,EAAM,KAAK,CAAC,EAAM,OAAO,EAAI,oCAC/B,QAAU,CACR,GAAa,EACf,CACF,EAAG,CAAC,EAAM,EAEV,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAa,EAEjB,IAAM,EAAa,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IACzB,AAAgB,eAAe,CAA3B,EACK,EAAQ,EAAS,WAAW,EAE9B,EAAQ,EAAS,KAAK,EAC5B,CAAC,EAAS,WAAW,CAAE,EAAS,KAAK,CAAE,EAAQ,EAE5C,EAAyB,gBAAZ,EAA4B,aAAe,OAUxD,EAAY,MAAO,IACvB,EAAM,cAAc,GACpB,IAAM,EA/DD,MA+DS,CA/DF,AA+DiB,CAAc,CAAC,EAAQ,EA/D/B,IACpB,IAAI,GACJ,OAAO,CAAC,OAAQ,KA8DjB,GAAI,CAAC,EAAO,YACV,EAAM,KAAK,CAAC,CAAC,QAAQ,EAAE,EAAW,aAAa,CAAC,EAIlD,GAAgB,GAChB,GAAI,CACF,IAAM,EAAU,MAAM,EAAA,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAC1D,KAAM,QACN,CACF,GACA,EAAY,CACV,MAAO,EAAQ,GAAS,UAAU,OAClC,YAAa,EAAQ,GAAS,UAAU,YAC1C,GACA,EAAkB,AAAC,IAAa,CAC9B,GAAG,CAAO,CADmB,AAE7B,CAAC,EAAQ,CAAE,GACb,CAAC,EACD,EAAM,OAAO,CAAC,CAAA,EAAe,UAAZ,EAAsB,OAAS,aAAa,kBAAkB,CAAC,CAClF,CAAE,MAAO,EAAO,CACd,EAAM,KAAK,CAAC,EAAM,OAAO,EAAI,iCAC/B,QAAU,CACR,GAAgB,EAClB,CACF,EAEM,EAAe,MAAO,IAC1B,GAAI,CAAC,GAAS,EAAM,QAAQ,CAC1B,CAD4B,MAI9B,IAAM,EAAa,EAAY,EAAM,KAAK,EAAI,EAAM,KAAK,EAOzD,GANkB,CAMd,CAAC,IANmB,EAAc,CACpC,IAKc,EALP,CAAC,OAAO,EAAc,UAAZ,EAAsB,OAAS,aAAA,CAAc,CAC9D,QAAS,CAAC,QAAQ,EAAE,EAAW,OAAO,EAAc,UAAZ,EAAsB,OAAS,aAAa,SAAS,CAAC,CAC9F,YAAa,SACb,KAAM,QACR,IAKA,GAAgB,GAChB,GAAI,CACF,IAAM,EAAU,MAAM,EAAA,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAC1D,KAAM,EACN,SAAU,OAAO,EAAM,EAAE,EAAI,IAAI,IAAI,EACvC,GACA,EAAY,CACV,MAAO,EAAQ,GAAS,UAAU,OAClC,YAAa,EAAQ,GAAS,UAAU,YAC1C,GACA,EAAM,OAAO,CAAC,2BAChB,CAAE,MAAO,EAAO,CACd,EAAM,KAAK,CAAC,EAAM,OAAO,EAAI,oCAC/B,QAAU,CACR,GAAgB,EAClB,EACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CACV,MAAM,yBACN,SAAS,8FAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,KAAM,EAAc,MAAO,EAAS,SAAU,IAE1D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+CAA+C,SAAU,YACvE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,CAAc,CAAC,EAAQ,CAC9B,SAnFgB,AAAC,CAmFP,GAlFlB,IAAM,EAAY,EAAM,MAAM,CAAC,KAAK,CACpC,EAAkB,AAAC,GAAa,EAC9B,GAAG,CAAO,CADmB,AAE7B,CAAC,EAAQ,CAAE,EACb,CAAC,CACH,EA8EU,YAAyB,UAAZ,EAAsB,kBAAoB,wBACvD,UAAU,wHAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,oKACX,OACkB,UAAZ,EAAsB,OAAS,mBAIvC,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFAEO,IAAtB,EAAW,MAAM,CACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CACT,MAAO,CAAC,GAAG,EAAE,EAAQ,WAAW,CAAC,CACjC,SAAU,CAAC,IAAI,EAAc,UAAZ,EAAsB,QAAU,cAAc,uCAAuC,CAAC,GAGzG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,yCACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,qGACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,UACtC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,SACtC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,WACtC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CAAmC,gBAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAA8D,UAAU,sDACvE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA4B,EAAY,EAAM,KAAK,EAAI,EAAM,KAAK,IAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAAwC,UAAZ,EAAsB,OAAS,eACzE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,6DAA6D,EACvE,EAAM,QAAQ,CACV,sDACA,+CAAA,CACJ,UAED,EAAM,QAAQ,CAAG,iBAAmB,aAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gCACX,EAAM,QAAQ,CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kCAAyB,WAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAa,GAC5B,SAAU,EACV,UAAU,+KACX,eAvBE,CAAA,EAAG,EAAQ,CAAC,EAAE,EAAM,EAAE,CAAC,CAAC,EAAE,EAAM,GAAG,EAAI,EAAM,KAAK,CAAA,CAAE,cAqC/E,iEClOA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OA2Be,SAAS,IACtB,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC3C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EAkCvD,MAhCA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAI,EAAY,GA0BhB,MADA,CAxBqB,UACnB,GAAa,GACb,EAAgB,IAChB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,6BAA8B,CAAE,OAAQ,MAAO,MAAO,UAAW,GACxF,EAAU,MAAM,EAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EACrD,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,GAAS,SAAW,2CAEtC,GAAI,CAAC,EACH,OAEF,EAHgB,AAGE,MAAM,OAAO,CAAC,GAAS,gBAAkB,EAAQ,cAAc,CAAG,EAAE,CACxF,CAAE,MAAO,EAAO,CACV,GACF,EAAgB,GAAO,GADV,MACqB,0CAEtC,QAAU,CACJ,GACF,EAAa,GAEjB,CACF,EAJmB,GAOZ,KACL,GAAY,CACd,CACF,EAAG,EAAE,EAGH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CACV,MAAM,0BACN,SAAS,+DAER,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2FAA2F,cAAY,WAEvH,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wFACV,IAEyB,IAA1B,EAAe,MAAM,CACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,gCAEtC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBACX,EAAe,GAAG,CAAC,AAAC,wBACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAEC,UAAU,yEAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDAAwC,OAAO,GAAM,cAAgB,cAClF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCACV,OAAO,GAAM,QAAU,UAAU,MAAI,GAAM,eAtF1D,CAsF0E,AAtFzE,CADC,EAAO,CADS,EAwFuE,GAxFlE,AAwFwE,UAvF9E,IAAI,KAAK,GAAS,OAC1B,OAAO,KAAK,CAAC,EAAK,OAAO,IAC7B,CADkC,GAGpC,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,MAAO,QACP,IAAK,UACL,KAAM,UACN,KAAM,UACN,OAAQ,SACV,GAAG,MAAM,CAAC,UAgFI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,kGAAkG,EA5E1H,AAAe,AA4E6G,YA7E1H,EAAa,OAAO,AA8ER,GAAM,QA9EW,IAAI,IAAI,GAAG,WAAW,KACX,YAAY,CAA3B,EACtB,2CAEU,WAAW,CAA1B,EACK,8CAEF,oDAuEiB,CACL,UAEF,OAAO,GAAM,QAAU,mBAfvB,GAAM,IAAM,CAAA,EAAG,GAAM,aAAa,CAAC,EAAE,GAAM,SAAA,CAAU,OAwBxE"}