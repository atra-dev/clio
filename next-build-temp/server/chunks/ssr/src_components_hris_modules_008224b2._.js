module.exports=[87015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(44036),e=a.i(98719);function f(a){return{firstName:String(a?.firstName||""),middleName:String(a?.middleName||""),lastName:String(a?.lastName||""),profilePhotoDataUrl:String(a?.profilePhotoDataUrl||""),profilePhotoStoragePath:String(a?.profilePhotoStoragePath||""),phoneVerifiedAt:String(a?.phoneVerifiedAt||""),phoneLast4:String(a?.phoneLast4||""),smsMfaEnabled:!!a?.smsMfaEnabled}}function g(){var a;let g,h=(0,e.useToast)(),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(()=>f({})),[q,r]=(0,c.useState)(!1),s=(0,c.useCallback)(async()=>{j(!0),n("");try{let a=await fetch("/api/auth/profile",{method:"GET",cache:"no-store"}),b=await a.json().catch(()=>({}));if(!a.ok)throw Error(b?.message||"Unable to load account security settings.");let c=f(b);p(c),r(!!c.smsMfaEnabled)}catch(a){n(a?.message||"Unable to load account security settings.")}finally{j(!1)}},[]);(0,c.useEffect)(()=>{s()},[s]);let t=!!o.phoneVerifiedAt,u=!!o.smsMfaEnabled!==q,v=t||q,w=q?"Enabled":"Disabled",x=async()=>{if(!k&&u){if(q&&!t)return void h.error("Verify a mobile number first before enabling SMS MFA.");l(!0),n("");try{let a=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:o.firstName,middleName:o.middleName,lastName:o.lastName,profilePhotoDataUrl:o.profilePhotoDataUrl||null,profilePhotoStoragePath:o.profilePhotoStoragePath||null,smsMfaEnabled:q})}),b=await a.json().catch(()=>({}));if(!a.ok)throw Error(b?.message||"Unable to save account security settings.");let c=f(b?.profile||o);p(c),r(!!c.smsMfaEnabled),h.success("MFA preference updated.")}catch(a){n(a?.message||"Unable to save account security settings.")}finally{l(!1)}}};return(0,b.jsx)(d.default,{title:"Account Security",subtitle:"Enable SMS MFA for your account sign-in",children:i?(0,b.jsx)("div",{className:"flex justify-center py-4",children:(0,b.jsx)("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600","aria-hidden":"true"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[m?(0,b.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:m}):null,(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("article",{className:"rounded-xl border border-slate-200 bg-slate-50/80 p-3",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"MFA Status"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:w}),(0,b.jsx)("span",{className:`inline-flex rounded-full border px-2 py-0.5 text-[11px] font-semibold ${q?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600"}`,children:q?"Protected":"Standard"})]}),(0,b.jsx)("p",{className:"mt-2 text-xs text-slate-600",children:q?"A code will be required on every sign-in.":"Sign-in uses standard workspace verification."})]}),(0,b.jsxs)("article",{className:"rounded-xl border border-slate-200 bg-slate-50/80 p-3",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-[0.08em] text-slate-500",children:"Mobile Verification"}),(0,b.jsx)("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:t?`Verified mobile ending in ${o.phoneLast4||"****"}`:"No verified mobile number yet"}),(0,b.jsx)("p",{className:"mt-2 text-xs text-slate-600",children:t?`Verified at ${!(g=(a=o.phoneVerifiedAt)?new Date(a):null)||Number.isNaN(g.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g)}`:"Complete one login SMS verification first, then enable MFA."})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Enable SMS MFA for every sign-in"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Add an OTP checkpoint each time this account signs in."})]}),(0,b.jsx)("button",{type:"button",role:"switch","aria-checked":q,onClick:()=>{!k&&v&&r(a=>!a)},disabled:k||!v,className:`relative inline-flex h-7 w-12 items-center rounded-full transition ${q?"bg-sky-600":"bg-slate-300"} disabled:cursor-not-allowed disabled:opacity-60`,children:(0,b.jsx)("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${q?"translate-x-6":"translate-x-1"}`})})]}),t?null:(0,b.jsx)("p",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Mobile verification is required before enabling MFA."})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("p",{className:"text-xs text-slate-500",children:u?"Unsaved security changes.":"No pending changes."}),(0,b.jsx)("button",{type:"button",onClick:x,disabled:k||!u,className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:k?"Saving...":"Save MFA Setting"})]})]})})}a.s(["default",()=>g])},22886,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(44036),e=a.i(38014),f=a.i(63824),g=a.i(98719),h=a.i(95312),i=a.i(63609);let j=[{id:"roles",label:"Role Catalog"},{id:"departments",label:"Department Catalog"}];function k(a){return Array.isArray(a)?a:[]}function l(a){return String(a||"").trim()||"-"}function m(){let a=(0,g.useToast)(),m=(0,h.useConfirm)(),[n,o]=(0,c.useState)("roles"),[p,q]=(0,c.useState)({roles:[],departments:[]}),[r,s]=(0,c.useState)({roles:"",departments:""}),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),x=(0,c.useCallback)(async()=>{u(!0);try{let a=await i.hrisApi.settings.referenceData.list();q({roles:k(a?.catalogs?.roles),departments:k(a?.catalogs?.departments)})}catch(b){a.error(b.message||"Unable to load reference catalog.")}finally{u(!1)}},[a]);(0,c.useEffect)(()=>{x()},[x]);let y=(0,c.useMemo)(()=>"departments"===n?k(p.departments):k(p.roles),[p.departments,p.roles,n]),z="departments"===n?"department":"role",A=async b=>{b.preventDefault();let c=String(r[n]||"").trim().replace(/\s+/g," ");if(!c)return void a.error(`Enter a ${z} value first.`);w(!0);try{let b=await i.hrisApi.settings.referenceData.create({kind:z,label:c});q({roles:k(b?.catalogs?.roles),departments:k(b?.catalogs?.departments)}),s(a=>({...a,[n]:""})),a.success(`${"roles"===n?"Role":"Department"} added to catalog.`)}catch(b){a.error(b.message||"Unable to add reference value.")}finally{w(!1)}},B=async b=>{if(!b||b.isSystem)return;let c=l(b.label||b.value);if(await m({title:`Remove ${"roles"===n?"Role":"Department"}`,message:`Remove "${c}" from ${"roles"===n?"role":"department"} catalog?`,confirmText:"Remove",tone:"danger"})){w(!0);try{let c=await i.hrisApi.settings.referenceData.remove({kind:z,recordId:String(b.id||"").trim()});q({roles:k(c?.catalogs?.roles),departments:k(c?.catalogs?.departments)}),a.success("Reference value removed.")}catch(b){a.error(b.message||"Unable to remove reference value.")}finally{w(!1)}}};return(0,b.jsx)(d.default,{title:"Reference Data Catalog",subtitle:"Centralized role and department options used across employee and lifecycle modules",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(e.default,{tabs:j,value:n,onChange:o}),(0,b.jsxs)("form",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto]",onSubmit:A,children:[(0,b.jsx)("input",{value:r[n],onChange:a=>{let b=a.target.value;s(a=>({...a,[n]:b}))},placeholder:"roles"===n?"Add role option":"Add department option",className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsxs)("button",{type:"submit",disabled:v,className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:["Add ","roles"===n?"Role":"Department"]})]}),t?(0,b.jsx)("div",{className:"flex min-h-[120px] items-center justify-center",children:(0,b.jsx)("div",{className:"h-7 w-7 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600"})}):0===y.length?(0,b.jsx)(f.default,{title:`No ${n} configured`,subtitle:`Add ${"roles"===n?"roles":"departments"} to populate select options in modules.`}):(0,b.jsx)("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:(0,b.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.08em] text-slate-500",children:[(0,b.jsx)("th",{className:"px-3 py-2 font-medium",children:"Value"}),(0,b.jsx)("th",{className:"px-3 py-2 font-medium",children:"Type"}),(0,b.jsx)("th",{className:"px-3 py-2 font-medium",children:"Source"}),(0,b.jsx)("th",{className:"px-3 py-2 font-medium text-right",children:"Action"})]})}),(0,b.jsx)("tbody",{children:y.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-100 last:border-b-0",children:[(0,b.jsx)("td",{className:"px-3 py-2 text-slate-900",children:l(a.label||a.value)}),(0,b.jsx)("td",{className:"px-3 py-2 text-slate-600",children:"roles"===n?"Role":"Department"}),(0,b.jsx)("td",{className:"px-3 py-2",children:(0,b.jsx)("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-medium ${a.isSystem?"border border-slate-200 bg-slate-100 text-slate-700":"border border-sky-200 bg-sky-50 text-sky-700"}`,children:a.isSystem?"System default":"Custom"})}),(0,b.jsx)("td",{className:"px-3 py-2 text-right",children:a.isSystem?(0,b.jsx)("span",{className:"text-xs text-slate-400",children:"Locked"}):(0,b.jsx)("button",{type:"button",onClick:()=>B(a),disabled:v,className:"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-70",children:"Remove"})})]},`${n}-${a.id}-${a.key||a.value}`))})]})})]})})}a.s(["default",()=>m])},62746,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(44036);function e(){let[a,e]=(0,c.useState)(!0),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)([]);return(0,c.useEffect)(()=>{let a=!0;return(async()=>{e(!0),g("");try{let b=await fetch("/api/auth/profile/activity",{method:"GET",cache:"no-store"}),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.message||"Unable to load recent account activity.");if(!a)return;i(Array.isArray(c?.recentActivity)?c.recentActivity:[])}catch(b){a&&g(b?.message||"Unable to load recent account activity.")}finally{a&&e(!1)}})(),()=>{a=!1}},[]),(0,b.jsx)(d.default,{title:"Recent Account Activity",subtitle:"Latest security and session events for this account",children:a?(0,b.jsx)("div",{className:"flex justify-center py-4",children:(0,b.jsx)("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-sky-600","aria-hidden":"true"})}):f?(0,b.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:f}):0===h.length?(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"No recent account activity."}):(0,b.jsx)("ul",{className:"space-y-2.5",children:h.map(a=>{var c;let d,e;return(0,b.jsx)("li",{className:"rounded-xl border border-slate-200 bg-slate-50/80 px-3 py-2.5",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-900",children:String(a?.activityName||"Activity")}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-600",children:[String(a?.module||"System")," | ",a?.relativeTime||(!(d=(c=a?.loggedAt)?new Date(c):null)||Number.isNaN(d.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(d))]})]}),(0,b.jsx)("span",{className:`inline-flex rounded-full border px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.06em] ${"failed"===(e=String(a?.status||"").trim().toLowerCase())||"rejected"===e?"border-rose-200 bg-rose-50 text-rose-700":"pending"===e?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:String(a?.status||"Completed")})]})},a?.id||`${a?.activityName}-${a?.loggedAt}`)})})})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_components_hris_modules_008224b2._.js.map