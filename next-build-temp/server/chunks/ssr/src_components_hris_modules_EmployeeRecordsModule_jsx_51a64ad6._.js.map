{"version":3,"sources":["../../../../src/components/hris/modules/EmployeeRecordsModule.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport SurfaceCard from \"@/components/hris/SurfaceCard\";\r\nimport EmptyState from \"@/components/hris/shared/EmptyState\";\r\nimport ModuleTabs from \"@/components/hris/shared/ModuleTabs\";\r\nimport PaginationControls from \"@/components/hris/shared/PaginationControls\";\r\nimport StatusBadge from \"@/components/hris/shared/StatusBadge\";\r\nimport { useToast } from \"@/components/ui/ToastProvider\";\r\nimport { useConfirm } from \"@/components/ui/ConfirmProvider\";\r\nimport { formatEmployeeName, formatNameFromEmail } from \"@/lib/name-utils\";\r\nimport {\r\n  removeStorageObjectByPath,\r\n  uploadEmployeeDocumentToStorage,\r\n} from \"@/services/firebase-storage-client\";\r\nimport { hrisApi } from \"@/services/hris-api-client\";\r\nimport { toSubTabAnchor } from \"@/lib/subtab-anchor\";\r\n\r\nconst DETAIL_TABS = [\r\n  { id: \"profile\", label: \"Employee Profile\" },\r\n  { id: \"compliance\", label: \"Government & Compliance IDs\" },\r\n  { id: \"payroll\", label: \"Payroll Information\" },\r\n  { id: \"documents\", label: \"Employee Attached Documents\" },\r\n  { id: \"activity\", label: \"Recent Activity\" },\r\n];\r\n\r\nconst EMPLOYMENT_STATUS_OPTIONS = [\"Active Employee\", \"Probation\", \"On Leave\", \"Resigned\", \"Terminated\"];\r\nconst RECORD_STATUS_OPTIONS = [\"Active\", \"Probation\", \"Inactive\", \"Archived\"];\r\nconst ONBOARDING_WORK_SETUP_OPTIONS = [\"On-site\", \"Hybrid\", \"Remote\"];\r\nconst DEFAULT_ROLE_OPTIONS = [\r\n  { value: \"SUPER_ADMIN\", label: \"Super Admin\" },\r\n  { value: \"GRC\", label: \"GRC\" },\r\n  { value: \"HR\", label: \"HR\" },\r\n  { value: \"EA\", label: \"EA\" },\r\n  { value: \"EMPLOYEE_L1\", label: \"Employee (L1)\" },\r\n  { value: \"EMPLOYEE_L2\", label: \"Employee (L2)\" },\r\n  { value: \"EMPLOYEE_L3\", label: \"Employee (L3)\" },\r\n];\r\nconst DEFAULT_DEPARTMENT_OPTIONS = [\r\n  {\r\n    value: \"Governance, Risk, and Compliance (GRC)\",\r\n    label: \"Governance, Risk, and Compliance (GRC)\",\r\n  },\r\n  {\r\n    value: \"Research and Development (R&D)\",\r\n    label: \"Research and Development (R&D)\",\r\n  },\r\n  {\r\n    value: \"Cyber Security Operations Center (CSOC)\",\r\n    label: \"Cyber Security Operations Center (CSOC)\",\r\n  },\r\n  {\r\n    value: \"Threat Intelligence (TI)\",\r\n    label: \"Threat Intelligence (TI)\",\r\n  },\r\n];\r\nconst GOVERNMENT_ID_FIELDS = [\r\n  { key: \"primaryId\", label: \"Primary Government ID\" },\r\n  { key: \"sss\", label: \"SSS\" },\r\n  { key: \"tin\", label: \"TIN\" },\r\n  { key: \"philhealth\", label: \"PhilHealth\" },\r\n  { key: \"pagibig\", label: \"Pag-IBIG\" },\r\n  { key: \"passport\", label: \"Passport\" },\r\n];\r\nconst PAYROLL_FIELDS = [\r\n  { key: \"compensationType\", label: \"Compensation Type\", placeholder: \"Monthly\" },\r\n  { key: \"baseSalary\", label: \"Base Salary\", placeholder: \"e.g. 45000\" },\r\n  { key: \"bankName\", label: \"Bank Name\", placeholder: \"e.g. BPI\" },\r\n  { key: \"accountName\", label: \"Account Name\", placeholder: \"Employee Name\" },\r\n  { key: \"accountNumber\", label: \"Account Number\", placeholder: \"XXXX-XXXX\" },\r\n  { key: \"taxCode\", label: \"Tax Code\", placeholder: \"S/ME1\" },\r\n];\r\n\r\nconst initialCreateForm = {\r\n  employeeId: \"\",\r\n  lastName: \"\",\r\n  firstName: \"\",\r\n  middleName: \"\",\r\n  suffix: \"\",\r\n  email: \"\",\r\n  role: \"EMPLOYEE_L1\",\r\n  department: \"\",\r\n  workSetup: \"On-site\",\r\n  hireDate: \"\",\r\n};\r\n\r\nconst initialMasterDraft = {\r\n  employeeId: \"\",\r\n  lastName: \"\",\r\n  firstName: \"\",\r\n  middleName: \"\",\r\n  suffix: \"\",\r\n  email: \"\",\r\n  department: \"\",\r\n  hireDate: \"\",\r\n};\r\n\r\nconst initialEmploymentDraft = {\r\n  role: \"EMPLOYEE_L1\",\r\n  workSetup: \"On-site\",\r\n};\r\n\r\nconst initialContactDraft = {\r\n  contact: \"\",\r\n  address: \"\",\r\n  emergencyContact: \"\",\r\n};\r\n\r\nconst initialGovernmentDraft = {\r\n  primaryId: \"\",\r\n  sss: \"\",\r\n  tin: \"\",\r\n  philhealth: \"\",\r\n  pagibig: \"\",\r\n  passport: \"\",\r\n};\r\n\r\nconst initialPayrollDraft = {\r\n  payrollGroup: \"\",\r\n  compensationType: \"\",\r\n  baseSalary: \"\",\r\n  bankName: \"\",\r\n  accountName: \"\",\r\n  accountNumber: \"\",\r\n  taxCode: \"\",\r\n};\r\n\r\nconst initialAccessDraft = {\r\n  role: \"EMPLOYEE_L1\",\r\n  status: \"Active\",\r\n  managerEmail: \"\",\r\n};\r\n\r\nconst initialSelfRecordForm = {\r\n  firstName: \"\",\r\n  middleName: \"\",\r\n  lastName: \"\",\r\n  suffix: \"\",\r\n  contact: \"\",\r\n  address: \"\",\r\n  emergencyContact: \"\",\r\n};\r\n\r\nfunction isEmployeeRole(role) {\r\n  return String(role || \"\")\r\n    .trim()\r\n    .toUpperCase()\r\n    .startsWith(\"EMPLOYEE_\");\r\n}\r\n\r\nfunction formatDate(value) {\r\n  const date = new Date(value || \"\");\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return new Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"short\",\r\n    day: \"2-digit\",\r\n    year: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(date);\r\n}\r\n\r\nfunction normalizeEmail(value) {\r\n  return String(value || \"\").trim().toLowerCase();\r\n}\r\n\r\nfunction normalizeRecordId(value) {\r\n  return String(value || \"\").trim();\r\n}\r\n\r\nfunction ensureArray(value) {\r\n  return Array.isArray(value) ? value : [];\r\n}\r\n\r\nfunction ensureObject(value) {\r\n  if (value && typeof value === \"object\" && !Array.isArray(value)) {\r\n    return value;\r\n  }\r\n  return {};\r\n}\r\n\r\nfunction toCatalogOption(entry) {\r\n  const value = String(entry?.value || \"\").trim();\r\n  const label = String(entry?.label || value).trim();\r\n  if (!value) {\r\n    return null;\r\n  }\r\n  return {\r\n    value,\r\n    label: label || value,\r\n  };\r\n}\r\n\r\nfunction mergeCatalogOptions(primary, fallback) {\r\n  const merged = [];\r\n  const seen = new Set();\r\n\r\n  [...ensureArray(primary), ...ensureArray(fallback)].forEach((entry) => {\r\n    const option = toCatalogOption(entry);\r\n    if (!option) {\r\n      return;\r\n    }\r\n    const key = `${option.value}::${option.label}`.toLowerCase();\r\n    if (seen.has(key)) {\r\n      return;\r\n    }\r\n    seen.add(key);\r\n    merged.push(option);\r\n  });\r\n\r\n  return merged;\r\n}\r\n\r\nfunction valueOrDash(value) {\r\n  const normalized = String(value ?? \"\").trim();\r\n  return normalized || \"-\";\r\n}\r\n\r\nfunction asInputValue(value) {\r\n  const normalized = String(value ?? \"\").trim();\r\n  return normalized === \"-\" ? \"\" : normalized;\r\n}\r\n\r\nfunction formatActorName(nameValue, emailValue) {\r\n  const explicitName = String(nameValue || \"\").trim();\r\n  if (explicitName) {\r\n    return explicitName;\r\n  }\r\n\r\n  const email = String(emailValue || \"\").trim().toLowerCase();\r\n  if (!email.includes(\"@\")) {\r\n    return valueOrDash(emailValue);\r\n  }\r\n\r\n  return formatNameFromEmail(email, { fallbackLabel: \"User\" });\r\n}\r\n\r\nfunction formatActorEmail(emailValue, fallbackValue) {\r\n  const explicitEmail = String(emailValue || \"\").trim();\r\n  if (explicitEmail.includes(\"@\")) {\r\n    return explicitEmail.toLowerCase();\r\n  }\r\n\r\n  const fallback = String(fallbackValue || \"\").trim();\r\n  if (fallback.includes(\"@\")) {\r\n    return fallback.toLowerCase();\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nfunction getActorAvatarUrl(avatarValue) {\r\n  const avatar = String(avatarValue || \"\").trim();\r\n  return avatar || \"/avatars/default-user.svg\";\r\n}\r\n\r\nfunction toLabel(value) {\r\n  const normalized = String(value || \"\").trim();\r\n  if (!normalized) {\r\n    return \"-\";\r\n  }\r\n  const normalizedUpper = normalized.toUpperCase();\r\n  const roleLabelMap = {\r\n    EMPLOYEE: \"Employee (L1)\",\r\n    EMPLOYEE_L1: \"Employee (L1)\",\r\n    EMPLOYEE_L2: \"Employee (L2)\",\r\n    EMPLOYEE_L3: \"Employee (L3)\",\r\n  };\r\n  if (roleLabelMap[normalizedUpper]) {\r\n    return roleLabelMap[normalizedUpper];\r\n  }\r\n  if (!normalized.includes(\"_\")) {\r\n    return normalized;\r\n  }\r\n  return normalized\r\n    .split(\"_\")\r\n    .map((token) => token.charAt(0).toUpperCase() + token.slice(1).toLowerCase())\r\n    .join(\" \");\r\n}\r\n\r\nfunction splitLegacyName(rawName) {\r\n  const name = String(rawName || \"\")\r\n    .trim()\r\n    .replace(/\\s+/g, \" \");\r\n  if (!name) {\r\n    return {\r\n      lastName: \"\",\r\n      firstName: \"\",\r\n      middleName: \"\",\r\n      suffix: \"\",\r\n    };\r\n  }\r\n\r\n  const suffixes = new Set([\"JR\", \"JR.\", \"SR\", \"SR.\", \"I\", \"II\", \"III\", \"IV\", \"V\"]);\r\n\r\n  if (name.includes(\",\")) {\r\n    const [left, right] = name.split(\",\", 2);\r\n    const tokens = String(right || \"\")\r\n      .trim()\r\n      .split(/\\s+/)\r\n      .filter(Boolean);\r\n    let suffix = \"\";\r\n    if (tokens.length > 0 && suffixes.has(tokens[tokens.length - 1].toUpperCase())) {\r\n      suffix = tokens.pop() || \"\";\r\n    }\r\n    const firstName = tokens.shift() || \"\";\r\n    const middleName = tokens.join(\" \");\r\n    return {\r\n      lastName: String(left || \"\").trim(),\r\n      firstName,\r\n      middleName,\r\n      suffix,\r\n    };\r\n  }\r\n\r\n  const tokens = name.split(/\\s+/).filter(Boolean);\r\n  if (tokens.length === 1) {\r\n    return {\r\n      lastName: \"\",\r\n      firstName: tokens[0],\r\n      middleName: \"\",\r\n      suffix: \"\",\r\n    };\r\n  }\r\n\r\n  let suffix = \"\";\r\n  if (suffixes.has(tokens[tokens.length - 1].toUpperCase())) {\r\n    suffix = tokens.pop() || \"\";\r\n  }\r\n\r\n  if (tokens.length === 2) {\r\n    return {\r\n      lastName: tokens[1],\r\n      firstName: tokens[0],\r\n      middleName: \"\",\r\n      suffix,\r\n    };\r\n  }\r\n\r\n  return {\r\n    lastName: tokens[tokens.length - 1] || \"\",\r\n    firstName: tokens[0] || \"\",\r\n    middleName: tokens.slice(1, -1).join(\" \"),\r\n    suffix,\r\n  };\r\n}\r\n\r\nfunction composeRecordDisplayName(record) {\r\n  return formatEmployeeName({\r\n    lastName: record?.lastName,\r\n    firstName: record?.firstName,\r\n    middleName: record?.middleName,\r\n    suffix: record?.suffix,\r\n    fallback: record?.name,\r\n    fallbackEmail: record?.email,\r\n    fallbackLabel: \"Employee\",\r\n  });\r\n}\r\n\r\nfunction buildMasterDraft(record) {\r\n  if (!record) {\r\n    return initialMasterDraft;\r\n  }\r\n  const legacy = splitLegacyName(record.name);\r\n  return {\r\n    employeeId: String(record.employeeId || \"\"),\r\n    lastName: String(record.lastName || legacy.lastName || \"\"),\r\n    firstName: String(record.firstName || legacy.firstName || \"\"),\r\n    middleName: String(record.middleName || legacy.middleName || \"\"),\r\n    suffix: String(record.suffix || legacy.suffix || \"\"),\r\n    email: String(record.email || \"\"),\r\n    department: String(record.department || \"\"),\r\n    hireDate: String(record.hireDate || \"\"),\r\n  };\r\n}\r\n\r\nfunction buildEmploymentDraft(record) {\r\n  if (!record) {\r\n    return initialEmploymentDraft;\r\n  }\r\n  return {\r\n    role: String(record.role || \"EMPLOYEE_L1\"),\r\n    workSetup: String(record.workSetup || \"On-site\"),\r\n  };\r\n}\r\n\r\nfunction buildContactDraft(record) {\r\n  if (!record) {\r\n    return initialContactDraft;\r\n  }\r\n  const contactInfo = ensureObject(record.contactInformation);\r\n  return {\r\n    contact: String(record.contact || contactInfo.primaryPhone || \"\"),\r\n    address: String(record.address || contactInfo.address || \"\"),\r\n    emergencyContact: String(record.emergencyContact || contactInfo.emergencyContact || \"\"),\r\n  };\r\n}\r\n\r\nfunction buildGovernmentDraft(record) {\r\n  if (!record) {\r\n    return initialGovernmentDraft;\r\n  }\r\n  const governmentIds = ensureObject(record.governmentIds);\r\n  return {\r\n    primaryId: String(record.govId || governmentIds.primaryId || \"\"),\r\n    sss: String(governmentIds.sss || \"\"),\r\n    tin: String(governmentIds.tin || \"\"),\r\n    philhealth: String(governmentIds.philhealth || \"\"),\r\n    pagibig: String(governmentIds.pagibig || \"\"),\r\n    passport: String(governmentIds.passport || \"\"),\r\n  };\r\n}\r\n\r\nfunction buildPayrollDraft(record) {\r\n  if (!record) {\r\n    return initialPayrollDraft;\r\n  }\r\n  const payroll = ensureObject(record.payrollInformation);\r\n  return {\r\n    payrollGroup: String(record.payrollGroup || \"\"),\r\n    compensationType: String(payroll.compensationType || \"\"),\r\n    baseSalary: String(payroll.baseSalary || \"\"),\r\n    bankName: String(payroll.bankName || \"\"),\r\n    accountName: String(payroll.accountName || \"\"),\r\n    accountNumber: String(payroll.accountNumber || \"\"),\r\n    taxCode: String(payroll.taxCode || \"\"),\r\n  };\r\n}\r\n\r\nfunction buildAccessDraft(record) {\r\n  if (!record) {\r\n    return initialAccessDraft;\r\n  }\r\n  return {\r\n    role: String(record.role || \"EMPLOYEE_L1\"),\r\n    status: String(record.status || \"Active\"),\r\n    managerEmail: String(record.managerEmail || \"\"),\r\n  };\r\n}\r\n\r\nfunction buildGovernmentIdsPayload(draft, existingGovernmentIds) {\r\n  const next = {\r\n    ...ensureObject(existingGovernmentIds),\r\n  };\r\n  GOVERNMENT_ID_FIELDS.forEach(({ key }) => {\r\n    const value = String(draft?.[key] || \"\").trim();\r\n    if (value) {\r\n      next[key] = value;\r\n    } else {\r\n      delete next[key];\r\n    }\r\n  });\r\n  return next;\r\n}\r\n\r\nfunction buildPayrollPayload(draft, existingPayroll) {\r\n  const next = {\r\n    ...ensureObject(existingPayroll),\r\n  };\r\n  PAYROLL_FIELDS.forEach(({ key }) => {\r\n    const value = String(draft?.[key] || \"\").trim();\r\n    if (value) {\r\n      next[key] = value;\r\n    } else {\r\n      delete next[key];\r\n    }\r\n  });\r\n  return next;\r\n}\r\n\r\nfunction detailsRow(label, value, rowKey) {\r\n  return (\r\n    <div key={rowKey} className=\"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2\">\r\n      <p className=\"text-[11px] font-medium uppercase tracking-[0.08em] text-slate-500\">{label}</p>\r\n      <p className=\"mt-1 text-sm text-slate-800\">{valueOrDash(value)}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction inferDocumentType(file) {\r\n  const mimeType = String(file?.type || \"\").trim().toLowerCase();\r\n  if (mimeType.includes(\"pdf\")) {\r\n    return \"PDF\";\r\n  }\r\n  if (mimeType.includes(\"image\")) {\r\n    return \"Image\";\r\n  }\r\n  if (mimeType.includes(\"sheet\") || mimeType.includes(\"excel\") || mimeType.includes(\"csv\")) {\r\n    return \"Spreadsheet\";\r\n  }\r\n  if (mimeType.includes(\"word\") || mimeType.includes(\"document\")) {\r\n    return \"Document\";\r\n  }\r\n  const fileName = String(file?.name || \"\").trim();\r\n  const extension = fileName.includes(\".\") ? fileName.split(\".\").pop() : \"\";\r\n  return extension ? extension.toUpperCase() : \"General\";\r\n}\r\n\r\nfunction formatFileSize(value) {\r\n  const size = Number(value);\r\n  if (!Number.isFinite(size) || size <= 0) {\r\n    return \"-\";\r\n  }\r\n  if (size < 1024) {\r\n    return `${size} B`;\r\n  }\r\n  if (size < 1024 * 1024) {\r\n    return `${(size / 1024).toFixed(1)} KB`;\r\n  }\r\n  return `${(size / (1024 * 1024)).toFixed(1)} MB`;\r\n}\r\n\r\nexport default function EmployeeRecordsModule({ session }) {\r\n  const toast = useToast();\r\n  const confirmAction = useConfirm();\r\n  const actorRole = session?.role || \"EMPLOYEE_L1\";\r\n  const actorEmail = session?.email || \"\";\r\n  const employeeRole = isEmployeeRole(actorRole);\r\n  const canManageRecords = !employeeRole;\r\n  const [referenceCatalog, setReferenceCatalog] = useState({\r\n    roles: DEFAULT_ROLE_OPTIONS,\r\n    departments: DEFAULT_DEPARTMENT_OPTIONS,\r\n  });\r\n\r\n  const [detailTab, setDetailTab] = useState(\"profile\");\r\n  const [records, setRecords] = useState([]);\r\n  const [pagination, setPagination] = useState(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [debouncedQuery, setDebouncedQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"\");\r\n  const [roleFilter, setRoleFilter] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedId, setSelectedId] = useState(\"\");\r\n  const [selectedRecord, setSelectedRecord] = useState(null);\r\n  const [createForm, setCreateForm] = useState(initialCreateForm);\r\n  const [masterDraft, setMasterDraft] = useState(initialMasterDraft);\r\n  const [employmentDraft, setEmploymentDraft] = useState(initialEmploymentDraft);\r\n  const [contactDraft, setContactDraft] = useState(initialContactDraft);\r\n  const [governmentDraft, setGovernmentDraft] = useState(initialGovernmentDraft);\r\n  const [payrollDraft, setPayrollDraft] = useState(initialPayrollDraft);\r\n  const [accessDraft, setAccessDraft] = useState(initialAccessDraft);\r\n  const [selfRecordForm, setSelfRecordForm] = useState(initialSelfRecordForm);\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [showDetailsPanel, setShowDetailsPanel] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const detailsPanelRef = useRef(null);\r\n  const documentInputRef = useRef(null);\r\n  const selectedIdRef = useRef(\"\");\r\n  const recordCacheRef = useRef(new Map());\r\n  const detailTabs = useMemo(\r\n    () => (employeeRole ? DETAIL_TABS.filter((tab) => tab.id === \"profile\" || tab.id === \"documents\") : DETAIL_TABS),\r\n    [employeeRole],\r\n  );\r\n  const roleCatalogOptions = useMemo(\r\n    () => mergeCatalogOptions(referenceCatalog.roles, DEFAULT_ROLE_OPTIONS),\r\n    [referenceCatalog.roles],\r\n  );\r\n  const departmentCatalogOptions = useMemo(\r\n    () => mergeCatalogOptions(referenceCatalog.departments, DEFAULT_DEPARTMENT_OPTIONS),\r\n    [referenceCatalog.departments],\r\n  );\r\n\r\n  const openRecord = useCallback((row) => {\r\n    const recordId = normalizeRecordId(row?.id || row?.recordId);\r\n    if (!recordId) {\r\n      toast.error(\"Unable to open employee details. Missing record identifier.\");\r\n      return;\r\n    }\r\n\r\n    setSelectedId(recordId);\r\n    setDetailTab(\"profile\");\r\n    setShowDetailsPanel(true);\r\n\r\n    if (typeof window !== \"undefined\" && window.innerWidth < 1280) {\r\n      window.requestAnimationFrame(() => {\r\n        detailsPanelRef.current?.scrollIntoView({\r\n          behavior: \"smooth\",\r\n          block: \"start\",\r\n        });\r\n      });\r\n    }\r\n  }, [toast]);\r\n\r\n  useEffect(() => {\r\n    if (!showCreateForm || typeof window === \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    const previousOverflow = document.body.style.overflow;\r\n    const onKeyDown = (event) => {\r\n      if (event.key === \"Escape\") {\r\n        setShowCreateForm(false);\r\n      }\r\n    };\r\n\r\n    document.body.style.overflow = \"hidden\";\r\n    window.addEventListener(\"keydown\", onKeyDown);\r\n\r\n    return () => {\r\n      document.body.style.overflow = previousOverflow;\r\n      window.removeEventListener(\"keydown\", onKeyDown);\r\n    };\r\n  }, [showCreateForm]);\r\n\r\n  useEffect(() => {\r\n    selectedIdRef.current = selectedId;\r\n  }, [selectedId]);\r\n\r\n  useEffect(() => {\r\n    const timer = window.setTimeout(() => {\r\n      setDebouncedQuery(query);\r\n    }, 300);\r\n    return () => {\r\n      window.clearTimeout(timer);\r\n    };\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    if (employeeRole) {\r\n      setReferenceCatalog({\r\n        roles: DEFAULT_ROLE_OPTIONS,\r\n        departments: DEFAULT_DEPARTMENT_OPTIONS,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let isMounted = true;\r\n    (async () => {\r\n      try {\r\n        const payload = await hrisApi.settings.referenceData.list();\r\n        if (!isMounted) {\r\n          return;\r\n        }\r\n        setReferenceCatalog({\r\n          roles: mergeCatalogOptions(payload?.catalogs?.roles, DEFAULT_ROLE_OPTIONS),\r\n          departments: mergeCatalogOptions(payload?.catalogs?.departments, DEFAULT_DEPARTMENT_OPTIONS),\r\n        });\r\n      } catch {\r\n        if (!isMounted) {\r\n          return;\r\n        }\r\n        setReferenceCatalog({\r\n          roles: DEFAULT_ROLE_OPTIONS,\r\n          departments: DEFAULT_DEPARTMENT_OPTIONS,\r\n        });\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [employeeRole]);\r\n\r\n  const loadDirectory = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const payload = await hrisApi.employees.list({\r\n        q: debouncedQuery,\r\n        status: statusFilter,\r\n        role: roleFilter,\r\n        page,\r\n        pageSize: 10,\r\n        includeDocuments: employeeRole ? true : undefined,\r\n      });\r\n      const rows = ensureArray(payload.records)\r\n        .map((record) => ({\r\n          ...record,\r\n          id: normalizeRecordId(record?.id || record?.recordId),\r\n          name: composeRecordDisplayName(record),\r\n        }))\r\n        .filter((record) => Boolean(record.id));\r\n      setRecords(rows);\r\n      setPagination(payload.pagination || null);\r\n      if (employeeRole) {\r\n        const ownRecordId = rows[0]?.id || \"\";\r\n        if (selectedIdRef.current !== ownRecordId) {\r\n          setSelectedId(ownRecordId);\r\n        }\r\n        setShowDetailsPanel(Boolean(ownRecordId));\r\n        return;\r\n      }\r\n      if (!selectedIdRef.current && rows[0]?.id) {\r\n        setSelectedId(rows[0].id);\r\n      }\r\n      if (selectedIdRef.current && !rows.some((item) => item.id === selectedIdRef.current)) {\r\n        setSelectedId(rows[0]?.id || \"\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to load employee directory.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [debouncedQuery, employeeRole, page, roleFilter, statusFilter, toast]);\r\n\r\n  const loadSelectedRecord = useCallback(async () => {\r\n    const targetRecordId = normalizeRecordId(selectedId);\r\n    if (!targetRecordId) {\r\n      setSelectedRecord(null);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const cached = recordCacheRef.current.get(targetRecordId);\r\n      if (cached && Date.now() - cached.at < 60000) {\r\n        setSelectedRecord(cached.record);\r\n        return;\r\n      }\r\n      const payload = await hrisApi.employees.get(targetRecordId);\r\n      const record = payload.record ? { ...payload.record, name: composeRecordDisplayName(payload.record) } : null;\r\n      setSelectedRecord(record);\r\n      if (record) {\r\n        recordCacheRef.current.set(targetRecordId, { record, at: Date.now() });\r\n      }\r\n    } catch (error) {\r\n      if (String(error?.message || \"\").toLowerCase().includes(\"invalid record identifier\")) {\r\n        setSelectedId(\"\");\r\n        setShowDetailsPanel(false);\r\n      }\r\n      recordCacheRef.current.delete(targetRecordId);\r\n      setSelectedRecord(null);\r\n      toast.error(error.message || \"Unable to load employee profile.\");\r\n    }\r\n  }, [selectedId, toast]);\r\n\r\n  useEffect(() => {\r\n    loadDirectory();\r\n  }, [loadDirectory]);\r\n\r\n  useEffect(() => {\r\n    loadSelectedRecord();\r\n  }, [loadSelectedRecord]);\r\n\r\n  useEffect(() => {\r\n    const allowedTabs = new Set(detailTabs.map((tab) => tab.id));\r\n    if (allowedTabs.has(detailTab)) {\r\n      return;\r\n    }\r\n    setDetailTab(detailTabs[0]?.id || \"profile\");\r\n  }, [detailTab, detailTabs]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    const allowedTabs = new Set(detailTabs.map((tab) => tab.id));\r\n    const syncDetailTabFromHash = (rawHash = window.location.hash) => {\r\n      const hash = String(rawHash || \"\")\r\n        .replace(/^#/, \"\")\r\n        .trim()\r\n        .toLowerCase();\r\n      if (!hash) {\r\n        return;\r\n      }\r\n\r\n      const matched = DETAIL_TABS.find((tab) => toSubTabAnchor(tab.id) === hash);\r\n      if (matched && allowedTabs.has(matched.id)) {\r\n        setDetailTab(matched.id);\r\n        if (selectedId) {\r\n          setShowDetailsPanel(true);\r\n        }\r\n      }\r\n    };\r\n\r\n    const onSubTabAnchor = (event) => {\r\n      if (event?.detail?.moduleId && event.detail.moduleId !== \"employees\") {\r\n        return;\r\n      }\r\n      const nextAnchor = event?.detail?.anchor;\r\n      if (!nextAnchor) {\r\n        syncDetailTabFromHash();\r\n        return;\r\n      }\r\n      syncDetailTabFromHash(`#${nextAnchor}`);\r\n    };\r\n\r\n    syncDetailTabFromHash();\r\n    window.addEventListener(\"hashchange\", syncDetailTabFromHash);\r\n    window.addEventListener(\"popstate\", syncDetailTabFromHash);\r\n    window.addEventListener(\"clio:subtab-anchor\", onSubTabAnchor);\r\n    return () => {\r\n      window.removeEventListener(\"hashchange\", syncDetailTabFromHash);\r\n      window.removeEventListener(\"popstate\", syncDetailTabFromHash);\r\n      window.removeEventListener(\"clio:subtab-anchor\", onSubTabAnchor);\r\n    };\r\n  }, [detailTabs, selectedId]);\r\n\r\n  const selectedRow = useMemo(() => {\r\n    const selectedDirectoryRow = records.find((item) => item.id === selectedId) || null;\r\n    const selectedDetailId = normalizeRecordId(selectedRecord?.id || selectedRecord?.recordId);\r\n\r\n    if (selectedDirectoryRow && selectedRecord && selectedDetailId === selectedDirectoryRow.id) {\r\n      const merged = {\r\n        ...selectedDirectoryRow,\r\n        ...selectedRecord,\r\n        id: selectedDirectoryRow.id,\r\n      };\r\n      return {\r\n        ...merged,\r\n        name: composeRecordDisplayName(merged),\r\n      };\r\n    }\r\n\r\n    if (selectedDirectoryRow) {\r\n      return selectedDirectoryRow;\r\n    }\r\n\r\n    if (selectedRecord) {\r\n      const normalizedId = normalizeRecordId(selectedRecord.id || selectedRecord.recordId);\r\n      return {\r\n        ...selectedRecord,\r\n        id: normalizedId,\r\n        name: composeRecordDisplayName(selectedRecord),\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }, [records, selectedId, selectedRecord]);\r\n\r\n  const roleOptions = useMemo(() => {\r\n    const options = [...roleCatalogOptions];\r\n    const currentRole = String(selectedRow?.role || \"\").trim();\r\n    if (currentRole && !options.some((option) => option.value === currentRole)) {\r\n      options.push({ value: currentRole, label: toLabel(currentRole) });\r\n    }\r\n    return options;\r\n  }, [roleCatalogOptions, selectedRow?.role]);\r\n\r\n  useEffect(() => {\r\n    if (roleCatalogOptions.length === 0) {\r\n      return;\r\n    }\r\n    setCreateForm((current) => {\r\n      const currentRole = String(current.role || \"\").trim();\r\n      if (currentRole && roleCatalogOptions.some((option) => option.value === currentRole)) {\r\n        return current;\r\n      }\r\n      const preferredRole =\r\n        roleCatalogOptions.find((option) => option.value === \"EMPLOYEE_L1\")?.value ||\r\n        roleCatalogOptions.find((option) => option.value === \"Employee\")?.value ||\r\n        roleCatalogOptions[0].value;\r\n      return {\r\n        ...current,\r\n        role: preferredRole,\r\n      };\r\n    });\r\n  }, [roleCatalogOptions]);\r\n\r\n  useEffect(() => {\r\n    if (!selectedRow) {\r\n      setMasterDraft(initialMasterDraft);\r\n      setEmploymentDraft(initialEmploymentDraft);\r\n      setContactDraft(initialContactDraft);\r\n      setGovernmentDraft(initialGovernmentDraft);\r\n      setPayrollDraft(initialPayrollDraft);\r\n      setAccessDraft(initialAccessDraft);\r\n      return;\r\n    }\r\n\r\n    setMasterDraft(buildMasterDraft(selectedRow));\r\n    setEmploymentDraft(buildEmploymentDraft(selectedRow));\r\n    setContactDraft(buildContactDraft(selectedRow));\r\n    setGovernmentDraft(buildGovernmentDraft(selectedRow));\r\n    setPayrollDraft(buildPayrollDraft(selectedRow));\r\n    setAccessDraft(buildAccessDraft(selectedRow));\r\n  }, [selectedRow]);\r\n\r\n  const handleCreateField = (field) => (event) => {\r\n    setCreateForm((current) => ({\r\n      ...current,\r\n      [field]: event.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleCreate = async (event) => {\r\n    event.preventDefault();\r\n    if (!canManageRecords) {\r\n      return;\r\n    }\r\n    const composedName = formatEmployeeName({\r\n      lastName: createForm.lastName,\r\n      firstName: createForm.firstName,\r\n      middleName: createForm.middleName,\r\n      suffix: createForm.suffix,\r\n      fallback: createForm.email,\r\n      fallbackEmail: createForm.email,\r\n      fallbackLabel: \"Employee\",\r\n    });\r\n    const targetName = composedName || String(createForm.employeeId || \"\").trim() || \"this employee\";\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Create Employee Record\",\r\n        message: `Create employee record for ${targetName}?`,\r\n        confirmText: \"Create\",\r\n      }))\r\n    ) {\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      await hrisApi.employees.create({\r\n        employeeId: String(createForm.employeeId || \"\").trim(),\r\n        name: composedName,\r\n        lastName: String(createForm.lastName || \"\").trim(),\r\n        firstName: String(createForm.firstName || \"\").trim(),\r\n        middleName: String(createForm.middleName || \"\").trim(),\r\n        suffix: String(createForm.suffix || \"\").trim(),\r\n        email: normalizeEmail(createForm.email),\r\n        role: String(createForm.role || \"\").trim(),\r\n        department: String(createForm.department || \"\").trim(),\r\n        workSetup: String(createForm.workSetup || \"\").trim(),\r\n        hireDate: String(createForm.hireDate || \"\").trim(),\r\n        employmentStatus: \"Active Employee\",\r\n        status: \"Active\",\r\n      });\r\n      setCreateForm(initialCreateForm);\r\n      setShowCreateForm(false);\r\n      toast.success(\"Employee record created.\");\r\n      await loadDirectory();\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to create employee record.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleSelfRecordField = (field) => (event) => {\r\n    setSelfRecordForm((current) => ({\r\n      ...current,\r\n      [field]: event.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleCreateSelfRecord = async (event) => {\r\n    event.preventDefault();\r\n    if (!employeeRole) {\r\n      return;\r\n    }\r\n\r\n    const firstName = String(selfRecordForm.firstName || \"\").trim();\r\n    const lastName = String(selfRecordForm.lastName || \"\").trim();\r\n    if (!firstName || !lastName) {\r\n      toast.error(\"First name and last name are required.\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Submit Employee Record\",\r\n        message: \"Submit your employee record details?\",\r\n        confirmText: \"Submit\",\r\n      }))\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const response = await hrisApi.employees.create({\r\n        firstName,\r\n        middleName: String(selfRecordForm.middleName || \"\").trim(),\r\n        lastName,\r\n        suffix: String(selfRecordForm.suffix || \"\").trim(),\r\n        contact: String(selfRecordForm.contact || \"\").trim(),\r\n        address: String(selfRecordForm.address || \"\").trim(),\r\n        emergencyContact: String(selfRecordForm.emergencyContact || \"\").trim(),\r\n      });\r\n\r\n      setSelfRecordForm(initialSelfRecordForm);\r\n      toast.success(\"Your employee record has been created.\");\r\n      await loadDirectory();\r\n\r\n      const createdRecordId = normalizeRecordId(response?.record?.id || response?.record?.recordId);\r\n      if (createdRecordId) {\r\n        setSelectedId(createdRecordId);\r\n        setDetailTab(\"profile\");\r\n        setShowDetailsPanel(true);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to create your employee record.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const updateRecord = async (\r\n    payload,\r\n    successText,\r\n    confirmationText = \"Save changes to this employee record?\",\r\n  ) => {\r\n    const targetRecordId = normalizeRecordId(selectedId) || normalizeRecordId(selectedRow?.id);\r\n    if (!targetRecordId) {\r\n      toast.error(\"Employee record reference is missing. Please reopen the employee details.\");\r\n      return false;\r\n    }\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Confirm Update\",\r\n        message: confirmationText,\r\n        confirmText: \"Save\",\r\n      }))\r\n    ) {\r\n      return false;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      await hrisApi.employees.update(targetRecordId, payload);\r\n      toast.success(successText);\r\n      await Promise.all([loadDirectory(), loadSelectedRecord()]);\r\n      return true;\r\n    } catch (error) {\r\n      if (String(error?.message || \"\").toLowerCase().includes(\"invalid record identifier\")) {\r\n        setSelectedId(\"\");\r\n        setShowDetailsPanel(false);\r\n      }\r\n      toast.error(error.message || \"Unable to update employee profile.\");\r\n      return false;\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleArchive = async (recordId) => {\r\n    if (!recordId || !canManageRecords) {\r\n      return;\r\n    }\r\n    const targetRow = records.find((row) => row.id === recordId);\r\n    const targetLabel = valueOrDash(targetRow?.name || targetRow?.employeeId || recordId);\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Archive Employee Record\",\r\n        message: `Archive employee record: ${targetLabel}?`,\r\n        confirmText: \"Archive\",\r\n        tone: \"danger\",\r\n      }))\r\n    ) {\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      await hrisApi.employees.archive(recordId);\r\n      if (recordId === selectedId) {\r\n        setSelectedId(\"\");\r\n      }\r\n      toast.success(\"Employee record archived.\");\r\n      await loadDirectory();\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to archive employee record.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDocumentFileChange = async (event) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) {\r\n      return;\r\n    }\r\n\r\n    const targetRecordId = normalizeRecordId(selectedId) || normalizeRecordId(selectedRow?.id);\r\n    if (!targetRecordId || !selectedRow?.id || !canManageRecords) {\r\n      event.target.value = \"\";\r\n      return;\r\n    }\r\n\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      toast.error(\"Document upload is limited to 10MB per file.\");\r\n      event.target.value = \"\";\r\n      return;\r\n    }\r\n\r\n    const confirmationText = `Upload document \"${file.name}\" to this employee record?`;\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Upload Document\",\r\n        message: confirmationText,\r\n        confirmText: \"Upload\",\r\n      }))\r\n    ) {\r\n      event.target.value = \"\";\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const uploaded = await uploadEmployeeDocumentToStorage({\r\n        file,\r\n        employeeRecordId: targetRecordId,\r\n        employeeEmail: selectedRow.email,\r\n      });\r\n      const currentDocs = ensureArray(selectedRow.documents);\r\n      const nextDoc = {\r\n        name: String(file.name || \"\").trim() || \"Employee Document\",\r\n        type: inferDocumentType(file),\r\n        ref: uploaded.downloadUrl,\r\n        storagePath: uploaded.storagePath,\r\n        contentType: uploaded.contentType || null,\r\n        sizeBytes: uploaded.sizeBytes,\r\n        uploadedAt: new Date().toISOString(),\r\n        uploadedBy: actorEmail,\r\n      };\r\n      await hrisApi.employees.update(targetRecordId, {\r\n        documents: [...currentDocs, nextDoc],\r\n      });\r\n      toast.success(\"Employee document uploaded to secure storage.\");\r\n      await Promise.all([loadDirectory(), loadSelectedRecord()]);\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to upload employee document.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      event.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  const removeDocument = async (index) => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    const targetRecordId = normalizeRecordId(selectedId) || normalizeRecordId(selectedRow?.id);\r\n    if (!targetRecordId) {\r\n      toast.error(\"Employee record reference is missing. Please reopen the employee details.\");\r\n      return;\r\n    }\r\n    const currentDocs = ensureArray(selectedRow.documents);\r\n    const targetDocument = currentDocs[index];\r\n    if (!targetDocument) {\r\n      return;\r\n    }\r\n    const documentName = String(targetDocument?.name || \"\").trim() || \"this document\";\r\n    if (\r\n      !(await confirmAction({\r\n        title: \"Remove Document\",\r\n        message: `Remove document \"${documentName}\" from this employee record?`,\r\n        confirmText: \"Remove\",\r\n        tone: \"danger\",\r\n      }))\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await hrisApi.employees.update(targetRecordId, {\r\n        documents: currentDocs.filter((_, currentIndex) => currentIndex !== index),\r\n      });\r\n      const storagePath = String(targetDocument?.storagePath || \"\").trim();\r\n      if (storagePath) {\r\n        removeStorageObjectByPath(storagePath).catch(() => null);\r\n      }\r\n      toast.success(\"Employee document removed.\");\r\n      await Promise.all([loadDirectory(), loadSelectedRecord()]);\r\n    } catch (error) {\r\n      toast.error(error.message || \"Unable to remove employee document.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const openDocument = async (document, index) => {\n    const targetRecordId = normalizeRecordId(selectedId) || normalizeRecordId(selectedRow?.id);\n    if (!targetRecordId) {\n      return;\n    }\n\n    const documentRef = String(document?.ref || \"\").trim();\n    const documentStoragePath = String(document?.storagePath || \"\").trim();\n    if (!documentRef && !documentStoragePath) {\n      return;\n    }\n\n    try {\n      const result = await hrisApi.employees.logDocumentAccess(targetRecordId, {\n        documentId: String(document?.id || document?.recordId || index).trim(),\n        documentName: String(document?.name || \"\").trim(),\n        documentType: String(document?.type || \"\").trim(),\n        documentRef,\n        documentStoragePath,\n      });\n      const accessUrl = String(result?.accessUrl || \"\").trim();\n      if (!accessUrl) {\n        throw new Error(\"Document access URL is unavailable.\");\n      }\n      window.open(accessUrl, \"_blank\", \"noopener,noreferrer\");\n    } catch (error) {\n      toast.error(error?.message || \"Document access is blocked by security policy.\");\n    }\n  };\n\r\n  const saveMasterData = async () => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    const composedName = formatEmployeeName({\r\n      lastName: masterDraft.lastName,\r\n      firstName: masterDraft.firstName,\r\n      middleName: masterDraft.middleName,\r\n      suffix: masterDraft.suffix,\r\n      fallback: selectedRow?.name || masterDraft.email,\r\n      fallbackEmail: masterDraft.email,\r\n      fallbackLabel: \"Employee\",\r\n    });\r\n    await updateRecord(\r\n      {\r\n        employeeId: String(masterDraft.employeeId || \"\").trim(),\r\n        name: composedName,\r\n        lastName: String(masterDraft.lastName || \"\").trim(),\r\n        firstName: String(masterDraft.firstName || \"\").trim(),\r\n        middleName: String(masterDraft.middleName || \"\").trim(),\r\n        suffix: String(masterDraft.suffix || \"\").trim(),\r\n        email: normalizeEmail(masterDraft.email),\r\n        department: String(masterDraft.department || \"\").trim(),\r\n        hireDate: String(masterDraft.hireDate || \"\").trim(),\r\n        role: String(employmentDraft.role || \"\").trim(),\r\n        workSetup: String(employmentDraft.workSetup || \"\").trim(),\r\n      },\r\n      \"Employee master data updated.\",\r\n      \"Save employee master data changes?\",\r\n    );\r\n  };\r\n\r\n  const saveEmployment = async () => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    await updateRecord(\r\n      {\r\n        role: String(employmentDraft.role || \"\").trim(),\r\n        workSetup: String(employmentDraft.workSetup || \"\").trim(),\r\n      },\r\n      \"Employment assignment updated.\",\r\n      \"Save role and work setup changes?\",\r\n    );\r\n  };\r\n\r\n  const saveContacts = async () => {\r\n    if (!selectedRow?.id) {\r\n      return;\r\n    }\r\n    const payload = {\r\n      contact: String(contactDraft.contact || \"\").trim(),\r\n      address: String(contactDraft.address || \"\").trim(),\r\n    };\r\n    if (canManageRecords) {\r\n      payload.emergencyContact = String(contactDraft.emergencyContact || \"\").trim();\r\n    }\r\n    await updateRecord(\r\n      payload,\r\n      \"Contact information updated.\",\r\n      canManageRecords ? \"Save contact information changes?\" : \"Save your contact information changes?\",\r\n    );\r\n  };\r\n\r\n  const saveFullProfile = async () => {\r\n    if (!selectedRow?.id) {\r\n      return;\r\n    }\r\n\r\n    if (!canManageRecords) {\r\n      await saveContacts();\r\n      return;\r\n    }\r\n    const composedName = formatEmployeeName({\r\n      lastName: masterDraft.lastName,\r\n      firstName: masterDraft.firstName,\r\n      middleName: masterDraft.middleName,\r\n      suffix: masterDraft.suffix,\r\n      fallback: selectedRow?.name || masterDraft.email,\r\n      fallbackEmail: masterDraft.email,\r\n      fallbackLabel: \"Employee\",\r\n    });\r\n\r\n    await updateRecord(\r\n      {\r\n        employeeId: String(masterDraft.employeeId || \"\").trim(),\r\n        name: composedName,\r\n        lastName: String(masterDraft.lastName || \"\").trim(),\r\n        firstName: String(masterDraft.firstName || \"\").trim(),\r\n        middleName: String(masterDraft.middleName || \"\").trim(),\r\n        suffix: String(masterDraft.suffix || \"\").trim(),\r\n        email: normalizeEmail(masterDraft.email),\r\n        department: String(masterDraft.department || \"\").trim(),\r\n        hireDate: String(masterDraft.hireDate || \"\").trim(),\r\n        role: String(employmentDraft.role || \"\").trim(),\r\n        workSetup: String(employmentDraft.workSetup || \"\").trim(),\r\n        contact: String(contactDraft.contact || \"\").trim(),\r\n        address: String(contactDraft.address || \"\").trim(),\r\n        emergencyContact: String(contactDraft.emergencyContact || \"\").trim(),\r\n      },\r\n      \"Full profile information updated.\",\r\n      \"Save all profile updates for this employee?\",\r\n    );\r\n  };\r\n\r\n  const saveCompliance = async () => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    await updateRecord(\r\n      {\r\n        govId: String(governmentDraft.primaryId || \"\").trim(),\r\n        governmentIds: buildGovernmentIdsPayload(governmentDraft, selectedRow.governmentIds),\r\n      },\r\n      \"Government and compliance IDs updated.\",\r\n      \"Save government and compliance ID changes?\",\r\n    );\r\n  };\r\n\r\n  const savePayroll = async () => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    await updateRecord(\r\n      {\r\n        payrollGroup: String(payrollDraft.payrollGroup || \"\").trim(),\r\n        payrollInformation: buildPayrollPayload(payrollDraft, selectedRow.payrollInformation),\r\n      },\r\n      \"Payroll information updated.\",\r\n      \"Save payroll information changes?\",\r\n    );\r\n  };\r\n\r\n  const saveAccess = async () => {\r\n    if (!selectedRow?.id || !canManageRecords) {\r\n      return;\r\n    }\r\n    await updateRecord(\r\n      {\r\n        role: String(accessDraft.role || \"\").trim(),\r\n        status: String(accessDraft.status || \"\").trim(),\r\n        managerEmail: normalizeEmail(accessDraft.managerEmail),\r\n      },\r\n      \"Access role assignment updated.\",\r\n      \"Save access role assignment changes?\",\r\n    );\r\n  };\r\n\r\n  const renderDirectory = () => (\r\n    <SurfaceCard\r\n      title={employeeRole ? \"My Employee Record\" : \"Employee Directory\"}\r\n      subtitle={\r\n        employeeRole\r\n          ? \"Provide and maintain your personal employee profile details.\"\r\n          : \"Centralized employee master data with search, filters, and profile routing\"\r\n      }\r\n      className=\"p-3 sm:p-4 [&>header]:mb-2 [&>header>div>h2]:text-sm [&>header>div>p]:text-xs\"\r\n      action={\r\n        employeeRole ? (\r\n          <span className=\"inline-flex h-9 items-center rounded-lg border border-sky-200 bg-sky-50 px-3 text-xs font-medium text-sky-700\">\r\n            Own profile access only\r\n          </span>\r\n        ) : (\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <input\r\n              value={query}\r\n              onChange={(event) => {\r\n                setPage(1);\r\n                setQuery(event.target.value);\r\n              }}\r\n              placeholder=\"Search by name, ID, email\"\r\n              className=\"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none\"\r\n            />\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(event) => {\r\n                setPage(1);\r\n                setStatusFilter(event.target.value);\r\n              }}\r\n              className=\"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none\"\r\n            >\r\n              <option value=\"\">All Status</option>\r\n              {RECORD_STATUS_OPTIONS.map((statusOption) => (\r\n                <option key={statusOption.toLowerCase()} value={statusOption.toLowerCase()}>\r\n                  {statusOption}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <select\r\n              value={roleFilter}\r\n              onChange={(event) => {\r\n                setPage(1);\r\n                setRoleFilter(event.target.value);\r\n              }}\r\n              className=\"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none\"\r\n            >\r\n              <option value=\"\">All Roles</option>\r\n              {roleCatalogOptions.map((roleOption) => (\r\n                <option key={roleOption.value} value={roleOption.value.toLowerCase()}>\r\n                  {roleOption.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {canManageRecords ? (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowCreateForm(true)}\r\n                className=\"h-9 rounded-lg border border-sky-200 bg-sky-50 px-3 text-xs font-semibold text-sky-700 transition hover:bg-sky-100\"\r\n              >\r\n                Add Employee\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        )\r\n      }\r\n    >\r\n      {isLoading ? (\r\n        <div className=\"flex min-h-[160px] items-center justify-center\">\r\n          <span className=\"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white\">\r\n            <svg\r\n              viewBox=\"0 0 24 24\"\r\n              className=\"h-5 w-5 animate-spin text-sky-600\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path d=\"M12 3a9 9 0 1 0 9 9\" />\r\n            </svg>\r\n          </span>\r\n          <span className=\"sr-only\">Loading employee directory...</span>\r\n        </div>\r\n      ) : records.length === 0 ? (\r\n        employeeRole ? (\r\n          <div className=\"mx-auto w-full max-w-4xl rounded-2xl border border-sky-100 bg-gradient-to-b from-sky-50/80 to-white p-5\">\r\n            <div className=\"mb-4\">\r\n              <p className=\"text-base font-semibold text-slate-900\">Complete My Employee Record</p>\r\n              <p className=\"mt-1 text-sm text-slate-600\">\r\n                This form is for your own employee profile only. Fill in your details to continue.\r\n              </p>\r\n            </div>\r\n            <form onSubmit={handleCreateSelfRecord} className=\"grid gap-3 md:grid-cols-2\">\r\n              <input\r\n                value={selfRecordForm.lastName}\r\n                onChange={handleSelfRecordField(\"lastName\")}\r\n                placeholder=\"Last name\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.firstName}\r\n                onChange={handleSelfRecordField(\"firstName\")}\r\n                placeholder=\"First name\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.middleName}\r\n                onChange={handleSelfRecordField(\"middleName\")}\r\n                placeholder=\"Middle name\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.suffix}\r\n                onChange={handleSelfRecordField(\"suffix\")}\r\n                placeholder=\"Suffix (optional)\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={actorEmail}\r\n                disabled\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-slate-100 px-3 text-sm text-slate-700 md:col-span-2\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.contact}\r\n                onChange={handleSelfRecordField(\"contact\")}\r\n                placeholder=\"Contact number\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.address}\r\n                onChange={handleSelfRecordField(\"address\")}\r\n                placeholder=\"Address\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n              />\r\n              <input\r\n                value={selfRecordForm.emergencyContact}\r\n                onChange={handleSelfRecordField(\"emergencyContact\")}\r\n                placeholder=\"Emergency contact\"\r\n                className=\"h-10 rounded-lg border border-slate-300 bg-white px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none md:col-span-2\"\r\n              />\r\n              <div className=\"md:col-span-2 mt-1 flex justify-end\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                  className=\"inline-flex h-10 items-center rounded-lg bg-sky-600 px-4 text-sm font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n                >\r\n                  {isSubmitting ? \"Saving...\" : \"Submit My Record\"}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        ) : (\r\n          <EmptyState\r\n            title=\"No employee records yet\"\r\n            subtitle=\"Add a record to initialize the employee directory.\"\r\n          />\r\n        )\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full text-left text-sm\">\r\n              <thead>\r\n                <tr className=\"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500\">\r\n                  <th className=\"px-2 py-3 font-medium\">Employee ID</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Name</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Email</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Department</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Role</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Status</th>\r\n                  <th className=\"px-2 py-3 font-medium\">Employment</th>\r\n                  <th className=\"px-2 py-3 font-medium text-right\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {records.map((row) => (\r\n                  <tr\r\n                    key={row.id}\r\n                    className={`border-b border-slate-100 text-slate-700 last:border-b-0 ${\r\n                      row.id === selectedId ? \"bg-sky-50/50\" : \"\"\r\n                    }`}\r\n                  >\r\n                    <td className=\"px-2 py-3 font-mono text-xs\">{row.employeeId || \"-\"}</td>\r\n                    <td className=\"px-2 py-3 font-medium text-slate-900\">{row.name || \"-\"}</td>\r\n                    <td className=\"px-2 py-3\">{row.email || \"-\"}</td>\r\n                    <td className=\"px-2 py-3\">{valueOrDash(row.department)}</td>\r\n                    <td className=\"px-2 py-3\">{toLabel(row.role)}</td>\r\n                    <td className=\"px-2 py-3\">\r\n                      <StatusBadge value={row.status || \"-\"} />\r\n                    </td>\r\n                    <td className=\"px-2 py-3\">{row.employmentStatus || \"-\"}</td>\r\n                    <td className=\"px-2 py-3 text-right\">\r\n                      <div className=\"inline-flex items-center gap-2\">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => openRecord(row)}\r\n                          className=\"rounded-lg border border-slate-300 bg-white px-2.5 py-1.5 text-xs font-medium text-slate-700 transition hover:bg-slate-50\"\r\n                        >\r\n                          Open\r\n                        </button>\r\n                        {canManageRecords ? (\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleArchive(row.id)}\r\n                            disabled={isSubmitting}\r\n                            className=\"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-60\"\r\n                          >\r\n                            Archive\r\n                          </button>\r\n                        ) : null}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <PaginationControls pagination={pagination} onPageChange={setPage} />\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderCreateForm = canManageRecords && showCreateForm ? (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 p-4\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-label=\"Add Employee\"\r\n      onClick={() => setShowCreateForm(false)}\r\n    >\r\n      <div\r\n        className=\"max-h-[90vh] w-full max-w-5xl overflow-y-auto rounded-2xl border border-slate-200 bg-white p-5 shadow-2xl sm:p-6\"\r\n        onClick={(event) => event.stopPropagation()}\r\n      >\r\n        <div className=\"mb-4 flex items-start justify-between gap-3\">\r\n          <div>\r\n            <h2 className=\"text-base font-semibold text-slate-900\">Add Employee</h2>\r\n            <p className=\"text-sm text-slate-600\">\r\n              Provision employee master data with employment, contact, and restricted PII references\r\n            </p>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowCreateForm(false)}\r\n            className=\"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 hover:text-slate-900\"\r\n            aria-label=\"Close add employee modal\"\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.9\" className=\"h-4 w-4\" aria-hidden=\"true\">\r\n              <path d=\"m6 6 12 12M18 6 6 18\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <form className=\"grid gap-3 md:grid-cols-3\" onSubmit={handleCreate}>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Employee Number</span>\r\n          <input\r\n            required\r\n            value={createForm.employeeId}\r\n            onChange={handleCreateField(\"employeeId\")}\r\n            placeholder=\"Employee number\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Last Name</span>\r\n          <input\r\n            required\r\n            value={createForm.lastName}\r\n            onChange={handleCreateField(\"lastName\")}\r\n            placeholder=\"Last name\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">First Name</span>\r\n          <input\r\n            required\r\n            value={createForm.firstName}\r\n            onChange={handleCreateField(\"firstName\")}\r\n            placeholder=\"First name\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Middle Name</span>\r\n          <input\r\n            value={createForm.middleName}\r\n            onChange={handleCreateField(\"middleName\")}\r\n            placeholder=\"Middle name\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Suffix</span>\r\n          <input\r\n            value={createForm.suffix}\r\n            onChange={handleCreateField(\"suffix\")}\r\n            placeholder=\"Suffix (optional)\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1 md:col-span-2\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">\r\n            Account Email (Google Sign-In)\r\n          </span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            value={createForm.email}\r\n            onChange={handleCreateField(\"email\")}\r\n            placeholder=\"employee@gmail.com\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Assigned Role</span>\r\n          <select\r\n            required\r\n            value={createForm.role}\r\n            onChange={handleCreateField(\"role\")}\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          >\r\n            <option value=\"\">Select role</option>\r\n            {roleCatalogOptions.map((roleOption) => (\r\n              <option key={roleOption.value} value={roleOption.value}>\r\n                {roleOption.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Assigned Department</span>\r\n          <select\r\n            required\r\n            value={createForm.department}\r\n            onChange={handleCreateField(\"department\")}\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          >\r\n            <option value=\"\">Select department</option>\r\n            {departmentCatalogOptions.map((departmentOption) => (\r\n              <option key={`create-department-${departmentOption.value}`} value={departmentOption.value}>\r\n                {departmentOption.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Work Setup</span>\r\n          <select\r\n            value={createForm.workSetup}\r\n            onChange={handleCreateField(\"workSetup\")}\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          >\r\n            {ONBOARDING_WORK_SETUP_OPTIONS.map((workSetup) => (\r\n              <option key={`create-work-${workSetup}`} value={workSetup}>\r\n                {workSetup}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label className=\"space-y-1\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">\r\n            Employment Start Date\r\n          </span>\r\n          <input\r\n            type=\"date\"\r\n            required\r\n            value={createForm.hireDate}\r\n            onChange={handleCreateField(\"hireDate\")}\r\n            className=\"h-10 w-full rounded-lg border border-slate-300 px-3 text-sm text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n          />\r\n        </label>\r\n        <label className=\"space-y-1 md:col-span-2\">\r\n          <span className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">\r\n            Generated Employee Display Name\r\n          </span>\r\n          <input\r\n            value={formatEmployeeName({\r\n              lastName: createForm.lastName,\r\n              firstName: createForm.firstName,\r\n              middleName: createForm.middleName,\r\n              suffix: createForm.suffix,\r\n              fallback: createForm.email,\r\n              fallbackEmail: createForm.email,\r\n              fallbackLabel: \"Employee\",\r\n            })}\r\n            readOnly\r\n            aria-readonly=\"true\"\r\n            className=\"h-10 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-sm font-medium text-slate-700\"\r\n          />\r\n        </label>\r\n        <div className=\"md:col-span-3 flex flex-wrap items-center justify-between gap-3\">\r\n          <p className=\"text-xs text-slate-500\">Data classification: Restricted PII</p>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowCreateForm(false)}\r\n              className=\"inline-flex h-10 items-center justify-center rounded-lg border border-slate-300 bg-white px-4 text-sm font-semibold text-slate-700 transition hover:bg-slate-50\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"inline-flex h-10 items-center justify-center rounded-lg bg-sky-600 px-4 text-sm font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n            >\r\n              {isSubmitting ? \"Saving...\" : \"Create Employee\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  const renderProfile = () => (\r\n    <SurfaceCard\r\n      title={employeeRole ? \"My Profile\" : \"Employee Profile\"}\r\n      subtitle={\r\n        employeeRole\r\n          ? \"View your employment snapshot and update personal contact details.\"\r\n          : \"Full employee information in one consolidated view\"\r\n      }\r\n      className=\"p-3 sm:p-4 [&>header]:mb-2 [&>header>div>h2]:text-sm [&>header>div>p]:text-xs\"\r\n    >\r\n      {!selectedRow ? (\r\n        <EmptyState\r\n          title=\"No employee selected\"\r\n          subtitle=\"Select a record from the directory to manage employee profile data.\"\r\n        />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2\">\r\n            <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-semibold text-slate-900\">\r\n                  {valueOrDash(\r\n                    formatEmployeeName({\r\n                      lastName: selectedRow.lastName,\r\n                      firstName: selectedRow.firstName,\r\n                      middleName: selectedRow.middleName,\r\n                      suffix: selectedRow.suffix,\r\n                      fallback: selectedRow.name,\r\n                      fallbackEmail: selectedRow.email,\r\n                      fallbackLabel: \"Employee\",\r\n                    }),\r\n                  )}\r\n                </p>\r\n                <p className=\"text-[11px] text-slate-600\">\r\n                  {valueOrDash(selectedRow.employeeId)} | {valueOrDash(selectedRow.email)}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex flex-wrap items-center gap-2\">\r\n                <StatusBadge value={selectedRow.status || \"-\"} />\r\n                <span className=\"rounded-lg border border-slate-300 bg-white px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-600\">\r\n                  Restricted PII\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"rounded-xl border border-slate-200 bg-white p-3\">\r\n            {canManageRecords ? (\r\n              <>\r\n                <div className=\"grid gap-2 sm:grid-cols-2 lg:grid-cols-3\">\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Employee Number</span>\r\n                    <input\r\n                      value={masterDraft.employeeId}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, employeeId: event.target.value }))}\r\n                      placeholder=\"Employee number\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Last Name</span>\r\n                    <input\r\n                      value={masterDraft.lastName}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, lastName: event.target.value }))}\r\n                      placeholder=\"Last name\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">First Name</span>\r\n                    <input\r\n                      value={masterDraft.firstName}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, firstName: event.target.value }))}\r\n                      placeholder=\"First name\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Middle Name</span>\r\n                    <input\r\n                      value={masterDraft.middleName}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, middleName: event.target.value }))}\r\n                      placeholder=\"Middle name\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Suffix</span>\r\n                    <input\r\n                      value={masterDraft.suffix}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, suffix: event.target.value }))}\r\n                      placeholder=\"Suffix (e.g. Jr.)\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Account Email</span>\r\n                    <input\r\n                      value={masterDraft.email}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, email: event.target.value }))}\r\n                      placeholder=\"Account email (Google Sign-In)\"\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Assigned Role</span>\r\n                    <select\r\n                      value={employmentDraft.role}\r\n                      onChange={(event) => setEmploymentDraft((current) => ({ ...current, role: event.target.value }))}\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    >\r\n                      <option value=\"\">Assigned role</option>\r\n                      {roleOptions.map((roleOption) => (\r\n                        <option key={`profile-role-${roleOption.value}`} value={roleOption.value}>\r\n                          {roleOption.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Department</span>\r\n                    <select\r\n                      value={masterDraft.department}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, department: event.target.value }))}\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    >\r\n                      <option value=\"\">Department</option>\r\n                      {departmentCatalogOptions.map((departmentOption) => (\r\n                        <option key={`profile-department-${departmentOption.value}`} value={departmentOption.value}>\r\n                          {departmentOption.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Work Setup</span>\r\n                    <select\r\n                      value={employmentDraft.workSetup}\r\n                      onChange={(event) => setEmploymentDraft((current) => ({ ...current, workSetup: event.target.value }))}\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    >\r\n                      {ONBOARDING_WORK_SETUP_OPTIONS.map((workSetup) => (\r\n                        <option key={`profile-work-${workSetup}`} value={workSetup}>\r\n                          {workSetup}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </label>\r\n                  <label className=\"space-y-1\">\r\n                    <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Employment Start Date</span>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={masterDraft.hireDate}\r\n                      onChange={(event) => setMasterDraft((current) => ({ ...current, hireDate: event.target.value }))}\r\n                      disabled={!canManageRecords}\r\n                      className=\"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none disabled:bg-slate-100\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3\">\r\n                  <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500\">\r\n                    Contact Details (Optional)\r\n                  </p>\r\n                  <div className=\"mt-2 grid gap-2 sm:grid-cols-2\">\r\n                    <label className=\"space-y-1\">\r\n                      <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Contact Number</span>\r\n                      <input\r\n                        value={contactDraft.contact}\r\n                        placeholder=\"Contact number\"\r\n                        className=\"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                        onChange={(event) => setContactDraft((current) => ({ ...current, contact: event.target.value }))}\r\n                      />\r\n                    </label>\r\n                    <label className=\"space-y-1\">\r\n                      <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Address</span>\r\n                      <input\r\n                        value={contactDraft.address}\r\n                        placeholder=\"Address\"\r\n                        className=\"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                        onChange={(event) => setContactDraft((current) => ({ ...current, address: event.target.value }))}\r\n                      />\r\n                    </label>\r\n                    <label className=\"space-y-1 sm:col-span-2\">\r\n                      <span className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-slate-500\">Emergency Contact</span>\r\n                      <input\r\n                        value={contactDraft.emergencyContact}\r\n                        placeholder=\"Emergency contact\"\r\n                        className=\"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                        onChange={(event) =>\r\n                          setContactDraft((current) => ({ ...current, emergencyContact: event.target.value }))\r\n                        }\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                  <p className=\"text-xs text-slate-500\">You can update full profile info in one action.</p>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={saveFullProfile}\r\n                    disabled={isSubmitting}\r\n                    className=\"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n                  >\r\n                    Save Full Profile\r\n                  </button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"space-y-2 sm:hidden\">\r\n                  {[\r\n                    [\"Employee Number\", valueOrDash(masterDraft.employeeId)],\r\n                    [\"Last Name\", valueOrDash(masterDraft.lastName)],\r\n                    [\"First Name\", valueOrDash(masterDraft.firstName)],\r\n                    [\"Middle Name\", valueOrDash(masterDraft.middleName)],\r\n                    [\"Suffix\", valueOrDash(masterDraft.suffix)],\r\n                    [\"Account Email\", valueOrDash(masterDraft.email)],\r\n                    [\"Assigned Role\", toLabel(selectedRow.role || employmentDraft.role || \"EMPLOYEE_L1\")],\r\n                    [\"Assigned Department\", valueOrDash(masterDraft.department)],\r\n                    [\"Work Setup\", valueOrDash(employmentDraft.workSetup)],\r\n                    [\"Employment Start Date\", valueOrDash(masterDraft.hireDate)],\r\n                  ].map(([label, value]) => (\r\n                    <div key={label} className=\"rounded-lg border border-slate-200 bg-white px-3 py-2\">\r\n                      <p className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500\">{label}</p>\r\n                      <p className=\"mt-1 text-sm text-slate-800\">{value}</p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"hidden overflow-x-auto rounded-lg border border-slate-200 sm:block\">\r\n                  <table className=\"min-w-full text-left text-sm\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.08em] text-slate-500\">\r\n                        <th className=\"w-[38%] px-3 py-2 font-medium\">Profile Field</th>\r\n                        <th className=\"px-3 py-2 font-medium\">Value</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {[\r\n                        [\"Employee Number\", valueOrDash(masterDraft.employeeId)],\r\n                        [\"Last Name\", valueOrDash(masterDraft.lastName)],\r\n                        [\"First Name\", valueOrDash(masterDraft.firstName)],\r\n                        [\"Middle Name\", valueOrDash(masterDraft.middleName)],\r\n                        [\"Suffix\", valueOrDash(masterDraft.suffix)],\r\n                        [\"Account Email\", valueOrDash(masterDraft.email)],\r\n                        [\"Assigned Role\", toLabel(selectedRow.role || employmentDraft.role || \"EMPLOYEE_L1\")],\r\n                        [\"Assigned Department\", valueOrDash(masterDraft.department)],\r\n                        [\"Work Setup\", valueOrDash(employmentDraft.workSetup)],\r\n                        [\"Employment Start Date\", valueOrDash(masterDraft.hireDate)],\r\n                      ].map(([label, value]) => (\r\n                        <tr key={label} className=\"border-b border-slate-100 last:border-b-0\">\r\n                          <td className=\"px-3 py-2 text-xs font-semibold uppercase tracking-[0.06em] text-slate-500\">\r\n                            {label}\r\n                          </td>\r\n                          <td className=\"px-3 py-2 text-slate-800\">{value}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-3\">\r\n                  <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500\">Editable Contact Details</p>\r\n                  <div className=\"mt-2 grid gap-2 sm:grid-cols-2\">\r\n                    <label className=\"space-y-1\">\r\n                      <span className=\"text-[11px] font-medium text-slate-600\">Contact Number</span>\r\n                      <input\r\n                        value={asInputValue(contactDraft.contact)}\r\n                        placeholder=\"Enter contact number\"\r\n                        className=\"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                        onChange={(event) => setContactDraft((current) => ({ ...current, contact: event.target.value }))}\r\n                      />\r\n                    </label>\r\n                    <label className=\"space-y-1\">\r\n                      <span className=\"text-[11px] font-medium text-slate-600\">Address</span>\r\n                      <input\r\n                        value={asInputValue(contactDraft.address)}\r\n                        placeholder=\"Enter address\"\r\n                        className=\"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                        onChange={(event) => setContactDraft((current) => ({ ...current, address: event.target.value }))}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                  <p className=\"text-xs text-slate-500\">\r\n                    All employment details are shown above. You can update contact details here.\r\n                  </p>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={saveFullProfile}\r\n                    disabled={isSubmitting}\r\n                    className=\"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n                  >\r\n                    Save My Profile\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderAttachedDocuments = () => (\r\n    <SurfaceCard\r\n      title={employeeRole ? \"Documents\" : \"Employee Attached Documents\"}\r\n      subtitle={\r\n        employeeRole\r\n          ? \"Files linked to your employee profile.\"\r\n          : \"All documents currently attached to this employee record\"\r\n      }\r\n    >\r\n      {!selectedRow ? (\r\n        <EmptyState\r\n          title=\"No employee selected\"\r\n          subtitle=\"Select a record to view attached employee documents.\"\r\n        />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex flex-col gap-2 rounded-lg border border-slate-200 bg-slate-50 p-3 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div>\r\n              <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500\">Attached Files</p>\r\n              <p className=\"mt-1 text-xs text-slate-600\">\r\n                {ensureArray(selectedRow.documents).length} document(s) linked to this employee.\r\n              </p>\r\n            </div>\r\n            {canManageRecords ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => documentInputRef.current?.click()}\r\n                  disabled={isSubmitting}\r\n                  className=\"inline-flex h-8 items-center rounded-lg border border-slate-300 bg-white px-3 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-70\"\r\n                >\r\n                  Upload File\r\n                </button>\r\n                <input\r\n                  ref={documentInputRef}\r\n                  type=\"file\"\r\n                  className=\"hidden\"\r\n                  onChange={handleDocumentFileChange}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n\r\n          {ensureArray(selectedRow.documents).length === 0 ? (\r\n            <EmptyState\r\n              title={employeeRole ? \"No files yet\" : \"No attached documents yet\"}\r\n              subtitle={\r\n                employeeRole\r\n                  ? \"HR or onboarding uploads will appear here once attached.\"\r\n                  : \"Upload employee files to build this document list.\"\r\n              }\r\n            />\r\n          ) : (\r\n            <div className=\"overflow-x-auto rounded-lg border border-slate-200\">\r\n              <table className=\"min-w-full text-left text-sm\">\r\n                <thead>\r\n                  <tr className=\"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.08em] text-slate-500\">\r\n                    <th className=\"px-3 py-2 font-medium\">Document</th>\r\n                    <th className=\"px-3 py-2 font-medium\">Type</th>\r\n                    <th className=\"px-3 py-2 font-medium\">Size</th>\r\n                    <th className=\"px-3 py-2 font-medium\">Uploaded At</th>\r\n                    <th className=\"px-3 py-2 font-medium text-right\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {ensureArray(selectedRow.documents).map((document, index) => (\r\n                    <tr key={`${document.name || \"document\"}-${index}`} className=\"border-b border-slate-100 last:border-b-0\">\r\n                      <td className=\"px-3 py-2 text-slate-800\">{valueOrDash(document.name)}</td>\r\n                      <td className=\"px-3 py-2 text-slate-700\">{valueOrDash(document.type)}</td>\r\n                      <td className=\"px-3 py-2 text-slate-700\">{formatFileSize(document.sizeBytes)}</td>\r\n                      <td className=\"px-3 py-2 text-slate-700\">{formatDate(document.uploadedAt)}</td>\r\n                      <td className=\"px-3 py-2 text-right\">\r\n                        <div className=\"inline-flex items-center justify-end gap-2\">\r\n                          {String(document.ref || \"\").trim() ? (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => openDocument(document, index)}\r\n                              className=\"inline-flex h-7 items-center rounded-md border border-sky-200 bg-sky-50 px-2.5 text-[11px] font-semibold text-sky-700 transition hover:bg-sky-100\"\r\n                            >\r\n                              Open\r\n                            </button>\r\n                          ) : null}\r\n                          {canManageRecords ? (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => removeDocument(index)}\r\n                              disabled={isSubmitting}\r\n                              className=\"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-[11px] font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-70\"\r\n                            >\r\n                              Remove\r\n                            </button>\r\n                          ) : null}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderRecentActivitySection = () => (\r\n    <SurfaceCard\r\n      title=\"Recent Activity\"\r\n      subtitle=\"Latest change history for the selected employee record\"\r\n    >\r\n      {!selectedRow ? (\r\n        <EmptyState\r\n          title=\"No employee selected\"\r\n          subtitle=\"Open an employee record to review recent activity.\"\r\n        />\r\n      ) : ensureArray(selectedRow.activityHistory).length === 0 ? (\r\n        <p className=\"text-xs text-slate-500\">No change history yet.</p>\r\n      ) : (\r\n        <div className=\"overflow-x-auto rounded-lg border border-slate-200\">\r\n          <table className=\"min-w-full text-left text-sm\">\r\n            <thead>\r\n              <tr className=\"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.08em] text-slate-500\">\r\n                <th className=\"px-3 py-2 font-medium\">Action</th>\r\n                <th className=\"px-3 py-2 font-medium\">Performed By</th>\r\n                <th className=\"px-3 py-2 font-medium\">Timestamp</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {ensureArray(selectedRow.activityHistory)\r\n                .slice(-20)\r\n                .reverse()\r\n                .map((item, index) => (\r\n                  <tr key={`${item.at || \"activity\"}-${index}`} className=\"border-b border-slate-100 last:border-b-0\">\r\n                    <td className=\"px-3 py-2 text-slate-800\">{toLabel(item.action || \"update\")}</td>\r\n                    <td className=\"px-3 py-2 text-slate-700\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Image\r\n                          src={getActorAvatarUrl(item.byAvatar)}\r\n                          alt={`${formatActorName(item.byName, item.byEmail || item.by)} profile`}\r\n                          width={28}\r\n                          height={28}\r\n                          className=\"h-7 w-7 rounded-full border border-slate-200 bg-white object-cover\"\r\n                        />\r\n                        <div className=\"min-w-0\">\r\n                          <p className=\"truncate text-xs font-medium text-slate-800\">\r\n                            {formatActorName(item.byName, item.byEmail || item.by)}\r\n                          </p>\r\n                          {formatActorEmail(item.byEmail, item.by) ? (\r\n                            <p className=\"truncate text-[11px] text-slate-500\">{formatActorEmail(item.byEmail, item.by)}</p>\r\n                          ) : null}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-3 py-2 text-slate-700\">{formatDate(item.at)}</td>\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderCompliance = () => (\r\n    <SurfaceCard\r\n      title=\"Government & Compliance IDs\"\r\n      subtitle=\"Restricted PII identifiers with controlled update workflow\"\r\n    >\r\n      {!selectedRow ? (\r\n        <EmptyState title=\"No employee selected\" subtitle=\"Select a profile to review compliance identifiers.\" />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"grid gap-3 md:grid-cols-3\">\r\n            {detailsRow(\"Data Classification\", selectedRow.classification || \"Restricted PII\")}\r\n            {GOVERNMENT_ID_FIELDS.map((field) => detailsRow(field.label, governmentDraft[field.key], field.key))}\r\n          </div>\r\n          {canManageRecords ? (\r\n            <>\r\n              <div className=\"grid gap-2 md:grid-cols-3\">\r\n                {GOVERNMENT_ID_FIELDS.map((field) => (\r\n                  <input\r\n                    key={field.key}\r\n                    value={governmentDraft[field.key]}\r\n                    onChange={(event) =>\r\n                      setGovernmentDraft((current) => ({\r\n                        ...current,\r\n                        [field.key]: event.target.value,\r\n                      }))\r\n                    }\r\n                    placeholder={field.label}\r\n                    className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                  />\r\n                ))}\r\n              </div>\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <p className=\"text-xs text-slate-500\">Government identifiers remain classified as Restricted PII.</p>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={saveCompliance}\r\n                  disabled={isSubmitting}\r\n                  className=\"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n                >\r\n                  Save Compliance IDs\r\n                </button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <p className=\"text-xs text-slate-500\">\r\n              Sensitive identifiers are role-masked. Contact GRC/HR for compliance updates.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderPayroll = () => (\r\n    <SurfaceCard title=\"Payroll Information\" subtitle=\"Payroll grouping and compensation profile under restricted access\">\r\n      {!selectedRow ? (\r\n        <EmptyState title=\"No employee selected\" subtitle=\"Select a profile to view payroll information.\" />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"grid gap-3 md:grid-cols-3\">\r\n            {detailsRow(\"Payroll Group\", payrollDraft.payrollGroup)}\r\n            {PAYROLL_FIELDS.map((field) => detailsRow(field.label, payrollDraft[field.key], field.key))}\r\n            {detailsRow(\"Updated At\", formatDate(selectedRow.updatedAt))}\r\n          </div>\r\n          {canManageRecords ? (\r\n            <>\r\n              <div className=\"grid gap-2 md:grid-cols-3\">\r\n                <input\r\n                  value={payrollDraft.payrollGroup}\r\n                  onChange={(event) => setPayrollDraft((current) => ({ ...current, payrollGroup: event.target.value }))}\r\n                  placeholder=\"Payroll group\"\r\n                  className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                />\r\n                {PAYROLL_FIELDS.map((field) => (\r\n                  <input\r\n                    key={field.key}\r\n                    value={payrollDraft[field.key]}\r\n                    onChange={(event) =>\r\n                      setPayrollDraft((current) => ({\r\n                        ...current,\r\n                        [field.key]: event.target.value,\r\n                      }))\r\n                    }\r\n                    placeholder={field.placeholder}\r\n                    className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                  />\r\n                ))}\r\n              </div>\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <p className=\"text-xs text-slate-500\">Payroll information is Restricted PII.</p>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={savePayroll}\r\n                  disabled={isSubmitting}\r\n                  className=\"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n                >\r\n                  Save Payroll Information\r\n                </button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <p className=\"text-xs text-slate-500\">Payroll values are restricted by role-based masking policy.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderAccess = () => (\r\n    <SurfaceCard title=\"Access & Role Assignment\" subtitle=\"Role, manager, and account access controls\">\r\n      {!selectedRow ? (\r\n        <EmptyState title=\"No employee selected\" subtitle=\"Select a profile to manage access assignments.\" />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"grid gap-3 md:grid-cols-2\">\r\n            {detailsRow(\"Role Assignment\", toLabel(selectedRow.role || \"EMPLOYEE_L1\"))}\r\n            {detailsRow(\"Manager\", selectedRow.managerEmail || \"-\")}\r\n            {detailsRow(\"Record Status\", selectedRow.status || \"-\")}\r\n            {detailsRow(\"Last Updated\", formatDate(selectedRow.updatedAt))}\r\n          </div>\r\n          {canManageRecords ? (\r\n            <div className=\"grid gap-2 md:grid-cols-3\">\r\n              <select\r\n                value={accessDraft.role}\r\n                className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                onChange={(event) => setAccessDraft((current) => ({ ...current, role: event.target.value }))}\r\n              >\r\n                {roleOptions.map((roleOption) => (\r\n                  <option key={roleOption.value} value={roleOption.value}>\r\n                    {roleOption.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <input\r\n                value={accessDraft.managerEmail}\r\n                placeholder=\"Manager email\"\r\n                className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                onChange={(event) => setAccessDraft((current) => ({ ...current, managerEmail: event.target.value }))}\r\n              />\r\n              <select\r\n                value={accessDraft.status}\r\n                className=\"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none\"\r\n                onChange={(event) => setAccessDraft((current) => ({ ...current, status: event.target.value }))}\r\n              >\r\n                {RECORD_STATUS_OPTIONS.map((statusOption) => (\r\n                  <option key={statusOption} value={statusOption}>\r\n                    {statusOption}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-xs text-slate-500\">\r\n              Access and role assignment can only be changed by GRC, HR, EA, or Super Admin.\r\n            </p>\r\n          )}\r\n          {canManageRecords ? (\r\n            <div className=\"flex justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={saveAccess}\r\n                disabled={isSubmitting}\r\n                className=\"inline-flex h-9 items-center rounded-lg bg-sky-600 px-3 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70\"\r\n              >\r\n                Save Access Assignment\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            null\r\n          )}\r\n        </div>\r\n      )}\r\n    </SurfaceCard>\r\n  );\r\n\r\n  const renderDetailsSection = () =>\r\n    !selectedRow ? (\r\n      <EmptyState\r\n        title=\"No employee selected\"\r\n        subtitle=\"Open an employee from the directory to view profile, compliance, and payroll details.\"\r\n      />\r\n    ) : (\r\n      <>\r\n        {!employeeRole ? (\r\n          <div className=\"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 sm:flex-row sm:items-center sm:justify-between\">\r\n            <ModuleTabs\r\n              tabs={detailTabs}\r\n              value={detailTab}\r\n              onChange={setDetailTab}\r\n              className=\"min-w-0 flex-1\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowDetailsPanel(false)}\r\n              className=\"inline-flex h-8 items-center gap-1.5 rounded-lg border border-slate-300 bg-white px-3 text-xs font-medium text-slate-700 transition hover:bg-slate-50\"\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.9\" className=\"h-3.5 w-3.5\" aria-hidden=\"true\">\r\n                <path d=\"M15.5 18 9.5 12l6-6\" />\r\n              </svg>\r\n              Back\r\n            </button>\r\n          </div>\r\n        ) : null}\r\n        {detailTab === \"profile\" ? renderProfile() : null}\r\n        {!employeeRole && detailTab === \"compliance\" ? renderCompliance() : null}\r\n        {!employeeRole && detailTab === \"payroll\" ? renderPayroll() : null}\r\n        {detailTab === \"documents\" ? renderAttachedDocuments() : null}\r\n        {!employeeRole && detailTab === \"activity\" ? renderRecentActivitySection() : null}\r\n      </>\r\n    );\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {showDetailsPanel ? (\r\n        <div id=\"employee-details\" ref={detailsPanelRef} className=\"min-w-0\">\r\n          <div className=\"space-y-2 xl:max-h-[calc(100dvh-9.5rem)] xl:overflow-y-auto xl:pr-1\">\r\n            {renderDetailsSection()}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div id=\"employee-directory\" className=\"min-w-0\">\r\n          {renderDirectory()}\r\n        </div>\r\n      )}\r\n      {renderCreateForm}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}