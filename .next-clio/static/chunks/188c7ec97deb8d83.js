(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90177,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(38418),r=e.i(93096),l=e.i(77135),n=e.i(13634),i=e.i(97256),o=e.i(32295),d=e.i(9968);let c=[{id:"workflow-status-tracking",label:"Workflow Status Tracking"},{id:"onboarding",label:"Onboarding"},{id:"role-changes",label:"Role Changes"},{id:"disciplinary-records",label:"Disciplinary Records"},{id:"offboarding-access-revocation",label:"Offboarding + Access Revocation"}],m={onboarding:"Onboarding","role-changes":"Role Change","disciplinary-records":"Disciplinary","offboarding-access-revocation":"Offboarding"},p={"workflow-status-tracking":"Unified tracking view across onboarding, role changes, disciplinary actions, and offboarding.",onboarding:"Employee onboarding workflows with activation and completion tracking.","role-changes":"Role/department movement workflows with effectivity details.","disciplinary-records":"Disciplinary case workflows with controlled updates and timeline visibility.","offboarding-access-revocation":"Offboarding workflows with access revocation and account disablement trail."},x=[{value:"SUPER_ADMIN",label:"Super Admin"},{value:"GRC",label:"Governance, Risk, and Compliance (GRC)"},{value:"HR",label:"Human Resources (HR)"},{value:"EA",label:"Executive Assistant (EA)"},{value:"EMPLOYEE_L1",label:"Employee (L1)"},{value:"EMPLOYEE_L2",label:"Employee (L2)"},{value:"EMPLOYEE_L3",label:"Employee (L3)"}],u=new Map([["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"]]),f=[{value:"Governance, Risk, and Compliance (GRC)",label:"Governance, Risk, and Compliance (GRC)"},{value:"Research and Development (R&D)",label:"Research and Development (R&D)"},{value:"Cyber Security Operations Center (CSOC)",label:"Cyber Security Operations Center (CSOC)"},{value:"Threat Intelligence (TI)",label:"Threat Intelligence (TI)"}],h=["On-site","Hybrid","Remote"],g=new Map([["SUPER_ADMIN","Super Admin"],["GRC","Governance, Risk, and Compliance (GRC)"],["HR","Human Resources (HR)"],["EA","Executive Assistant (EA)"],["EMPLOYEE","Employee (L1)"],["EMPLOYEE_L1","Employee (L1)"],["EMPLOYEE_L2","Employee (L2)"],["EMPLOYEE_L3","Employee (L3)"]]),b=new Set(["SUPER_ADMIN","GRC","HR","EA","EMPLOYEE","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),y=new Set(["GRC","HR","EA","EMPLOYEE_L1","EMPLOYEE_L2","EMPLOYEE_L3"]),j={employeeRecordId:"",employeeEmail:"",employee:"",category:"Onboarding",owner:"",status:"In Progress",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",roleTo:"",departmentFrom:"",departmentTo:"",effectiveDate:"",justification:"",details:""};function N(e){let t=new Date(e||"");return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function v(e){let t=new Date(e||"");return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(t)}function w(e){return String(e||"").trim().toLowerCase()}function k(e){return String(e||"").trim()||"-"}function E(e){return window.confirm(e)}function S(e){let t=Number(e);return!Number.isFinite(t)||t<=0?"0 B":t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}function A(e){return String(e||"").trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,"")}function C(e){let t=A(e);return t?g.get(t)||e:"-"}function R(e){return Array.isArray(e)?e:[]}function D(e,t){let a=[],s=new Set;return[...R(e),...R(t)].forEach(e=>{let t,r,l=(t=String(e?.value||"").trim(),r=String(e?.label||t).trim(),t?{value:t,label:r||t}:null);if(!l)return;let n=w(`${l.value}::${l.label}`);!n||s.has(n)||(s.add(n),a.push(l))}),a}function L(e){return"role change"===w(e)}function F(e){return"onboarding"===w(e)}function I(e){return e?.details&&"object"==typeof e.details?e.details:{}}function O(e){return(0,n.formatEmployeeName)({firstName:e?.onboardingFirstName,middleName:e?.onboardingMiddleName,lastName:e?.onboardingLastName,suffix:e?.onboardingSuffix,fallback:e?.employee,fallbackEmail:e?.employeeEmail,fallbackLabel:"Employee"})}function M(e){return(Array.isArray(e)?e:[]).map(e=>"string"==typeof e?e.trim():String(e?.message||"").trim()).filter(Boolean).join(" ")}function P({session:e}){let g,R,P=e?.role||"EMPLOYEE_L1",T=A(P),$=!String(P||"").trim().toUpperCase().startsWith("EMPLOYEE_"),U=(g=String(e?.email||"").trim().toLowerCase(),R=(0,n.formatPersonName)({firstName:e?.firstName,middleName:e?.middleName,lastName:e?.lastName,fallbackEmail:g,fallbackLabel:"System"}),g&&R.toLowerCase()!==g?`${R} (${g})`:R),[_,B]=(0,a.useState)("workflow-status-tracking"),[G,Y]=(0,a.useState)([]),[q,W]=(0,a.useState)(!0),[z,H]=(0,a.useState)(""),[K,J]=(0,a.useState)(""),[Z,Q]=(0,a.useState)(!1),[V,X]=(0,a.useState)(j),[ee,et]=(0,a.useState)(!1),[ea,es]=(0,a.useState)(!1),[er,el]=(0,a.useState)(""),[en,ei]=(0,a.useState)(""),[eo,ed]=(0,a.useState)([]),[ec,em]=(0,a.useState)(!1),[ep,ex]=(0,a.useState)(""),[eu,ef]=(0,a.useState)({roles:x,departments:f}),[eh,eg]=(0,a.useState)(!1),[eb,ey]=(0,a.useState)(""),[ej,eN]=(0,a.useState)([]),ev=(0,a.useRef)(null),ew=(0,a.useMemo)(()=>c.find(e=>e.id===_)||c[0],[_]),ek=m[_]||"",eE=p[_]||p["workflow-status-tracking"],eS=(0,a.useMemo)(()=>{let e=D(eu.roles,x),t=new Map;return e.forEach(e=>{let a=A(e?.value);if(!a)return;let s=u.get(a),r={value:String(e.value||"").trim(),label:s||String(e.label||e.value||"").trim()};t.has(a)||t.set(a,r)}),u.forEach((e,a)=>{t.has(a)||t.set(a,{value:a,label:e})}),Array.from(t.values())},[eu.roles]),eA=(0,a.useMemo)(()=>D(eu.departments,f),[eu.departments]),eC=(0,a.useMemo)(()=>eS.filter(e=>{let t,a=A(e.value);return!!a&&!!b.has(a)&&("SUPER_ADMIN"===T||("GRC"===T?y.has(a):"EMPLOYEE"===(t=A(e.value))||t.startsWith("EMPLOYEE_")))}),[T,eS]),eR=(0,a.useCallback)(async()=>{W(!0),H("");try{let e=await i.hrisApi.lifecycle.list();Y(Array.isArray(e.records)?e.records:[])}catch(e){H(e.message||"Unable to load lifecycle records.")}finally{W(!1)}},[]);(0,a.useEffect)(()=>{eR()},[eR]);let eD=(0,a.useCallback)(async()=>{if(!$)return void ef({roles:x,departments:f});eg(!0);try{let e=await i.hrisApi.settings.referenceData.list();ef({roles:D(e?.catalogs?.roles,x),departments:D(e?.catalogs?.departments,f)})}catch{ef({roles:x,departments:f})}finally{eg(!1)}},[$]);(0,a.useEffect)(()=>{eD()},[eD]);let eL=(0,a.useCallback)(async()=>{if($){em(!0),ex("");try{let e=await i.hrisApi.employees.list({page:1,pageSize:200}),t=Array.isArray(e?.records)?e.records:[],a=[],s=new Set;t.forEach(e=>{let t=function(e){let t=String(e?.id||"").trim(),a=String(e?.email||"").trim().toLowerCase();return t&&a?{id:t,email:a,name:(0,n.formatEmployeeName)({firstName:e?.firstName,middleName:e?.middleName,lastName:e?.lastName,suffix:e?.suffix,fallback:e?.name,fallbackEmail:e?.email,fallbackLabel:"Unnamed Employee"}),currentRole:String(e?.role||"").trim(),currentDepartment:String(e?.department||"").trim()}:null}(e);!t||s.has(t.id)||(s.add(t.id),a.push(t))}),ed(a)}catch(e){ed([]),ex(e.message||"Unable to load employee directory options.")}finally{em(!1)}}},[$]);(0,a.useEffect)(()=>{eL()},[eL]),(0,a.useEffect)(()=>{X(e=>({...e,owner:U}))},[U]),(0,a.useEffect)(()=>{$&&0!==eo.length&&X(e=>{if(F(e.category)||e.employeeRecordId&&eo.some(t=>t.id===e.employeeRecordId))return e;let t=eo[0];return{...e,employeeRecordId:t.id,employee:t.name,employeeEmail:t.email,onboardingRole:t.currentRole||"",onboardingDepartment:t.currentDepartment||"",roleFrom:t.currentRole||"",departmentFrom:t.currentDepartment||""}})},[$,eo]),(0,a.useEffect)(()=>{if(!ee)return;let e=document.body.style.overflow,t=e=>{"Escape"!==e.key||Z||et(!1)};return document.body.style.overflow="hidden",window.addEventListener("keydown",t),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t)}},[ee,Z]),(0,a.useEffect)(()=>{let e=new Set(c.map(e=>e.id)),t=(t=window.location.hash)=>{let a=String(t||"").replace(/^#/,"").trim().toLowerCase();if(!a)return void B("workflow-status-tracking");let s=c.find(e=>(0,o.toSubTabAnchor)(e.id)===a);s&&e.has(s.id)&&B(s.id)},a=e=>{let a=e?.detail?.anchor;a?t(a):t()};return t(),window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("clio:subtab-anchor",a),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t),window.removeEventListener("clio:subtab-anchor",a)}},[]);let eF=(0,a.useMemo)(()=>G.filter(e=>{let t="workflow-status-tracking"===_||w(e.category).includes(w(m[_])),a=!er||w(e.status).includes(w(er)),s=!en||[e.employee,e.employeeEmail,e.category,e.owner,e.status].map(e=>w(e)).some(e=>e.includes(w(en)));return t&&a&&s}),[G,_,er,en]);(0,a.useEffect)(()=>{if(0===eF.length){ey(""),es(!1);return}eb&&!eF.some(e=>e.id===eb)&&(ey(""),es(!1))},[eF,eb]),(0,a.useEffect)(()=>{if(!ea)return;let e=document.body.style.overflow,t=e=>{"Escape"!==e.key||Z||es(!1)};return document.body.style.overflow="hidden",window.addEventListener("keydown",t),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t)}},[ea,Z]);let eI=(0,a.useMemo)(()=>G.find(e=>e.id===eb)||null,[G,eb]),eO=Array.isArray(eI?.workflow?.checklist)?eI.workflow.checklist:[],eM=Array.isArray(eI?.workflow?.stages)?eI.workflow.stages:[],eP=Number.isFinite(Number(eI?.workflow?.stageIndex))?Number(eI.workflow.stageIndex):0,eT=Array.isArray(eI?.evidence)?eI.evidence:[],e$=(0,a.useMemo)(()=>{let e=eF.filter(e=>{let t=w(e.status);return t.includes("in progress")||t.includes("pending")}).length,t=eF.filter(e=>{let t=w(e.status);return t.includes("approved")||t.includes("completed")}).length;return{total:eF.length,inProgress:e,completed:t}},[eF]),eU=(0,a.useMemo)(()=>[{key:"total",label:"Total",value:e$.total},{key:"in-progress",label:"In Progress",value:e$.inProgress},{key:"completed",label:"Completed",value:e$.completed}],[e$]),e_=e=>t=>{X(a=>({...a,[e]:t.target.value}))},eB=async t=>{if(t.preventDefault(),$){if(F(V.category)){if(!String(V.onboardingEmployeeId||"").trim())return void H("Employee number is required for onboarding.");if(!String(V.onboardingLastName||"").trim())return void H("Last name is required for onboarding.");if(!String(V.onboardingFirstName||"").trim())return void H("First name is required for onboarding.");if(!String(V.employeeEmail||"").trim())return void H("Google account email is required for onboarding.");if(!String(V.onboardingRole||"").trim())return void H("Assigned role is required for onboarding.");if(!String(V.onboardingDepartment||"").trim())return void H("Assigned department is required for onboarding.");if(!String(V.onboardingStartDate||"").trim())return void H("Employment start date is required for onboarding.");if(ej.find(e=>e.size>0xa00000))return void H("Each onboarding document must be 10MB or below.")}if(L(V.category)){let e=String(V.roleFrom||"").trim(),t=String(V.roleTo||"").trim();if(!e||!t)return void H("Current role is missing on employee record. Set employee role first, then select new role.");if(!String(V.departmentFrom||"").trim())return void H("Current department is missing on employee record. Set employee department first.")}Q(!0),H(""),J("");try{let t=F(V.category),a=t?O(V):V.employee,s=t?V.activateEmploymentNow?"Approved":"In Progress":V.status,r=await i.hrisApi.lifecycle.create({employeeEmail:V.employeeEmail,employee:a,category:V.category,owner:U,status:s,details:function(e){let t={note:String(e.details||"").trim()};if(F(e.category)){let a=String(e.onboardingStartDate||"").trim(),s=String(e.onboardingEmployeeId||"").trim(),r=String(e.onboardingFirstName||"").trim(),l=String(e.onboardingMiddleName||"").trim(),n=String(e.onboardingLastName||"").trim(),i=String(e.onboardingSuffix||"").trim(),o=String(e.onboardingRole||"").trim(),d=String(e.onboardingDepartment||"").trim();t.startDate=a,t.employeeId=s,t.firstName=r,t.middleName=l,t.lastName=n,t.suffix=i,t.role=o,t.roleTo=o,t.department=d,t.departmentTo=d,t.workSetup=String(e.workSetup||"").trim(),t.accountEmail=String(e.employeeEmail||"").trim().toLowerCase(),t.activateEmploymentNow=!!e.activateEmploymentNow}return L(e.category)&&(t.roleFrom=String(e.roleFrom||"").trim(),t.roleTo=String(e.roleTo||"").trim(),t.departmentFrom=String(e.departmentFrom||"").trim(),t.departmentTo=String(e.departmentTo||"").trim(),t.effectiveDate=String(e.effectiveDate||"").trim(),t.justification=String(e.justification||"").trim()),t}(V)}),l=String(r?.record?.id||"").trim();if(t&&l&&ej.length>0)for(let t of ej){let a=await (0,d.uploadLifecycleEvidenceToStorage)({file:t,lifecycleRecordId:l,employeeEmail:V.employeeEmail});await i.hrisApi.lifecycle.update(l,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:String(t.name||"").trim()||"Onboarding Document",ref:a.downloadUrl,storagePath:a.storagePath,contentType:a.contentType,sizeBytes:a.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:e?.email||"system@gmail.com"}}})}X(j),eN([]),et(!1);let n=M(r?.effects),o=t&&ej.length>0?`${ej.length} onboarding document${ej.length>1?"s":""} uploaded. `:"";J(n?`${o}Lifecycle workflow created. ${n}`:`${o}Lifecycle workflow created.`),await eR()}catch(e){H(e.message||"Unable to create lifecycle workflow.")}finally{Q(!1)}}},eG=async(e,t,a)=>{if(e?.id&&t?.id&&$){Q(!0),H(""),J("");try{await i.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"toggle-task",taskId:t.id,completed:a}}),J(a?"Checklist task marked as completed.":"Checklist task reverted to pending."),await eR()}catch(e){H(e.message||"Unable to update checklist task.")}finally{Q(!1)}}},eY=async(e,t)=>{if(e?.id&&$){Q(!0),H(""),J("");try{await i.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"set-stage",stageIndex:t}}),J("Workflow stage updated."),await eR()}catch(e){H(e.message||"Unable to update workflow stage.")}finally{Q(!1)}}},eq=async e=>{if(e?.id&&$&&E("Trigger immediate offboarding and access revocation for this employee?")){Q(!0),H(""),J("");try{let t=await i.hrisApi.lifecycle.offboard(e.id,{reason:"Resignation"}),a=M(t?.effects);J(a?`Offboarding completed. ${a}`:"Offboarding completed. Access revocation has been triggered."),await eR()}catch(e){H(e.message||"Unable to complete offboarding.")}finally{Q(!1)}}},eW=async t=>{let a=t.target.files?.[0];if(!a||!eI||!$){t.target.value="";return}if(a.size>0xa00000){H("Evidence upload is limited to 10MB per file."),t.target.value="";return}if(!E(`Upload evidence file "${a.name}" to this workflow?`)){t.target.value="";return}Q(!0),H(""),J("");try{let t=await (0,d.uploadLifecycleEvidenceToStorage)({file:a,lifecycleRecordId:eI.id,employeeEmail:eI.employeeEmail});await i.hrisApi.lifecycle.update(eI.id,{workflowAction:{type:"add-evidence",evidence:{id:`evidence-${Date.now()}`,name:String(a.name||"").trim()||"Evidence File",ref:t.downloadUrl,storagePath:t.storagePath,contentType:t.contentType,sizeBytes:t.sizeBytes,uploadedAt:new Date().toISOString(),uploadedBy:e?.email||"system@gmail.com"}}}),J("Evidence file uploaded."),await eR()}catch(e){H(e.message||"Unable to upload evidence file.")}finally{Q(!1),t.target.value=""}},ez=async(e,t)=>{if(!e?.id||!t?.id||!$)return;let a=String(t?.name||"evidence file").trim();if(E(`Remove evidence "${a}" from this workflow?`)){Q(!0),H(""),J("");try{await i.hrisApi.lifecycle.update(e.id,{workflowAction:{type:"remove-evidence",evidenceId:t.id}});let a=String(t?.storagePath||"").trim();a&&(0,d.removeStorageObjectByPath)(a).catch(()=>null),J("Evidence file removed."),await eR()}catch(e){H(e.message||"Unable to remove evidence file.")}finally{Q(!1)}}},eH=()=>{Z||(eN([]),et(!1))},eK=()=>{Z||es(!1)},eJ=e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:k(e.employee)}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:k(e.employeeEmail)})]}),eZ=(e,a)=>{let s;return(0,t.jsx)("td",{className:"px-2 py-3 text-right",children:(0,t.jsxs)("div",{className:"inline-flex flex-wrap items-center justify-end gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{var t;(t=e.id)&&(ey(t),es(!0))},className:`rounded-lg border px-2.5 py-1.5 text-xs font-medium transition ${a?"border-sky-300 bg-sky-50 text-sky-700":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:a?"Opened":"Open Workflow"}),$&&((s=w(e?.category)).includes("offboard")||s.includes("resign")||s.includes("terminate"))?(0,t.jsx)("button",{type:"button",onClick:()=>eq(e),disabled:Z,className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Offboard"}):null]})})};return(0,t.jsxs)("div",{className:"space-y-4",children:[z?(0,t.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:z}):null,ep?(0,t.jsx)("p",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-700",children:ep}):null,K?(0,t.jsx)("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:K}):null,$&&ee?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-slate-900/45 p-4 sm:items-center",role:"dialog","aria-modal":"true","aria-label":"Create Lifecycle Workflow",onClick:eH,children:(0,t.jsxs)("div",{className:"my-4 flex max-h-[calc(100vh-2rem)] w-full max-w-5xl flex-col rounded-2xl border border-slate-200 bg-white p-5 shadow-2xl sm:p-6",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Create Lifecycle Workflow"}),(0,t.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Onboarding, role change, disciplinary, and offboarding actions"})]}),(0,t.jsx)("button",{type:"button",onClick:eH,disabled:Z,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-70","aria-label":"Close create workflow modal",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsxs)("form",{className:"mt-4 grid flex-1 gap-3 overflow-y-auto pr-1 md:grid-cols-3",onSubmit:eB,children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Lifecycle Category"}),(0,t.jsxs)("select",{value:V.category,onChange:e=>{let t=e.target.value,a=F(t);a||eN([]),X(e=>{if(a)return{...e,category:t,employeeRecordId:"",employee:O(e),employeeEmail:"",onboardingEmployeeId:"",onboardingFirstName:"",onboardingMiddleName:"",onboardingLastName:"",onboardingSuffix:"",onboardingRole:"",onboardingDepartment:"",onboardingStartDate:"",workSetup:"On-site",activateEmploymentNow:!0,roleFrom:"",departmentFrom:""};let s=eo.find(t=>t.id===e.employeeRecordId)||eo[0]||null;return{...e,category:t,employeeRecordId:s?.id||e.employeeRecordId||"",employee:s?.name||e.employee||"",employeeEmail:s?.email||e.employeeEmail||"",onboardingRole:s?.currentRole||e.onboardingRole||"",onboardingDepartment:s?.currentDepartment||e.onboardingDepartment||"",roleFrom:s?.currentRole||e.roleFrom||"",departmentFrom:s?.currentDepartment||e.departmentFrom||""}})},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{children:"Onboarding"}),(0,t.jsx)("option",{children:"Role Change"}),(0,t.jsx)("option",{children:"Disciplinary"}),(0,t.jsx)("option",{children:"Offboarding"})]})]}),F(V.category)?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,t.jsx)("input",{value:V.activateEmploymentNow?"Approved (auto on create)":"In Progress",readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Status"}),(0,t.jsxs)("select",{value:V.status,onChange:e_("status"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{children:"In Progress"}),(0,t.jsx)("option",{children:"Completed"}),(0,t.jsx)("option",{children:"Approved"}),(0,t.jsx)("option",{children:"Rejected"})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 md:col-span-3",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Workflow Steps"}),(0,t.jsxs)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:[(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"1. Encode Employee Details"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"2. Upload Documents"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"3. Create Account"}),(0,t.jsx)("span",{className:"inline-flex rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700",children:"4. Activate Employment"})]})]}),F(V.category)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Number"}),(0,t.jsx)("input",{required:!0,value:V.onboardingEmployeeId,onChange:e_("onboardingEmployeeId"),placeholder:"Employee number",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Last Name"}),(0,t.jsx)("input",{required:!0,value:V.onboardingLastName,onChange:e_("onboardingLastName"),placeholder:"Last name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"First Name"}),(0,t.jsx)("input",{required:!0,value:V.onboardingFirstName,onChange:e_("onboardingFirstName"),placeholder:"First name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Middle Name"}),(0,t.jsx)("input",{value:V.onboardingMiddleName,onChange:e_("onboardingMiddleName"),placeholder:"Middle name",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Suffix"}),(0,t.jsx)("input",{value:V.onboardingSuffix,onChange:e_("onboardingSuffix"),placeholder:"Suffix (optional)",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Account Email (Google Sign-In)"}),(0,t.jsx)("input",{required:!0,value:V.employeeEmail,onChange:e_("employeeEmail"),type:"email",placeholder:"employee@gmail.com",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Role"}),(0,t.jsxs)("select",{required:!0,value:V.onboardingRole,onChange:e_("onboardingRole"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select role"}),eC.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`onboarding-role-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Assigned Department"}),(0,t.jsxs)("select",{required:!0,value:V.onboardingDepartment,onChange:e_("onboardingDepartment"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select department"}),eA.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`onboarding-department-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Work Setup"}),(0,t.jsx)("select",{value:V.workSetup,onChange:e_("workSetup"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:h.map(e=>(0,t.jsx)("option",{value:e,children:e},`work-setup-${e}`))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employment Start Date"}),(0,t.jsx)("input",{type:"date",required:!0,value:V.onboardingStartDate,onChange:e_("onboardingStartDate"),className:"h-9 w-full rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Generated Employee Display Name"}),(0,t.jsx)("input",{value:O(V),readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Upload Onboarding Documents"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:e=>{eN(Array.from(e.target.files||[]).slice(0,10))},className:"block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-2.5 file:py-1.5 file:text-xs file:font-semibold file:text-slate-700 hover:file:bg-slate-200"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Add contracts, IDs, NDA, and other onboarding files (max 10 files, 10 MB each)."}),ej.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:ej.map((e,a)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-[11px] text-slate-700",children:[(0,t.jsx)("span",{className:"max-w-[210px] truncate",children:e.name}),(0,t.jsxs)("span",{className:"text-slate-500",children:["(",S(e.size),")"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{eN(e=>e.filter((e,t)=>t!==a))},className:"rounded px-1 text-slate-500 transition hover:bg-slate-200 hover:text-slate-700","aria-label":`Remove ${e.name}`,children:"x"})]},`${e.name}-${e.size}-${e.lastModified}-${a}`))}):(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"No files selected."})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Activate Employment"}),(0,t.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!V.activateEmploymentNow,onChange:e=>{X(t=>({...t,activateEmploymentNow:!!e.target.checked}))},className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Activate employment immediately after onboarding is created."]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Name"}),(0,t.jsxs)("select",{required:!0,value:V.employeeRecordId,onChange:e=>{let t=e.target.value,a=eo.find(e=>e.id===t);X(e=>({...e,employeeRecordId:t,employee:a?.name||"",employeeEmail:a?.email||"",onboardingRole:a?.currentRole||"",onboardingDepartment:a?.currentDepartment||"",roleFrom:a?.currentRole||"",departmentFrom:a?.currentDepartment||""}))},className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:ec?"Loading employee names...":"Select employee name"}),eo.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},`name-${e.id}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Employee Email"}),(0,t.jsx)("input",{value:V.employeeEmail,readOnly:!0,"aria-readonly":"true",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]})]}),L(V.category)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Role"}),(0,t.jsx)("input",{value:k(C(V.roleFrom)),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Role"}),(0,t.jsxs)("select",{required:!0,value:V.roleTo,onChange:e_("roleTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select role"}),eC.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`role-to-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Effective Date"}),(0,t.jsx)("input",{value:V.effectiveDate,onChange:e_("effectiveDate"),type:"date",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Current Department"}),(0,t.jsx)("input",{value:k(V.departmentFrom),readOnly:!0,"aria-readonly":"true",title:"Auto-fetched from selected employee record",className:"h-9 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 text-xs font-medium text-slate-700"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"New Department"}),(0,t.jsxs)("select",{value:V.departmentTo,onChange:e_("departmentTo"),className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select department"}),eA.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},`department-to-${e.value}`))]})]}),(0,t.jsxs)("div",{className:"space-y-1 md:col-span-3",children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Role Change Justification"}),(0,t.jsx)("input",{value:V.justification,onChange:e_("justification"),placeholder:"Enter justification",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]})]}):null,(0,t.jsxs)("div",{className:`space-y-1 ${L(V.category)||F(V.category)?"md:col-span-3":""}`,children:[(0,t.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Notes"}),(0,t.jsx)("input",{value:V.details,onChange:e_("details"),placeholder:F(V.category)?"Onboarding notes":"Details / notes",className:"h-9 w-full rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 z-10 mt-1 flex items-center justify-end gap-2 border-t border-slate-200 bg-white pt-3 md:col-span-3",children:[(0,t.jsx)("button",{type:"button",onClick:eH,disabled:Z,className:"inline-flex h-9 items-center rounded-lg border border-slate-300 bg-white px-3 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-70",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:Z||ec||eh||(F(V.category)?!String(V.onboardingEmployeeId||"").trim()||!String(V.onboardingLastName||"").trim()||!String(V.onboardingFirstName||"").trim()||!String(V.employeeEmail||"").trim()||!String(V.onboardingRole||"").trim()||!String(V.onboardingDepartment||"").trim()||!String(V.onboardingStartDate||"").trim():0===eo.length||!V.employeeRecordId),className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:Z?"Saving...":"Create Workflow"})]})]})]})}):null,(0,t.jsx)(s.default,{title:ew.label,subtitle:eE,children:(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:eU.map(e=>(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-slate-500",children:e.label}),(0,t.jsx)("p",{className:"mt-0.5 text-lg font-semibold text-slate-900",children:e.value})]},e.key))})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.default,{title:"Lifecycle Records",subtitle:"Dedicated workflow records by lifecycle module with strict audit traceability",action:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[$?(0,t.jsx)("button",{type:"button",onClick:()=>{let e=ek||"Onboarding",t=F(e),a=!t&&(eo.find(e=>e.id===V.employeeRecordId)||eo[0])||null;X(s=>({...j,employeeRecordId:t?"":a?.id||s.employeeRecordId||"",employee:t?"":a?.name||s.employee||"",employeeEmail:t?"":a?.email||s.employeeEmail||"",onboardingRole:t?"":a?.currentRole||s.onboardingRole||"",onboardingDepartment:t?"":a?.currentDepartment||s.onboardingDepartment||"",roleFrom:t?"":a?.currentRole||s.roleFrom||"",departmentFrom:t?"":a?.currentDepartment||s.departmentFrom||"",category:e,owner:U,status:"In Progress"})),eN([]),et(!0)},className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700",children:"Create Lifecycle Workflow"}):null,(0,t.jsx)("input",{value:en,onChange:e=>ei(e.target.value),placeholder:"Search workflow",className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none"}),(0,t.jsxs)("select",{value:er,onChange:e=>el(e.target.value),className:"h-9 rounded-lg border border-slate-300 bg-white px-3 text-xs text-slate-800 focus:border-sky-400 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"in progress",children:"In Progress"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"approved",children:"Approved"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"rejected",children:"Rejected"}),(0,t.jsx)("option",{value:"revoked",children:"Access Revoked"})]})]}),children:q?(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Loading lifecycle records..."}):0===eF.length?(0,t.jsx)(r.default,{title:"No lifecycle workflows found",subtitle:"Create a workflow or change filters to view results."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:"onboarding"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee Number"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"role-changes"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Role From -> Role To"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Department From -> Department To"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"disciplinary-records"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Checklist"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):"offboarding-access-revocation"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Access Revoked At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Archive Until"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Category"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Stage"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Effective Date"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Initiated By"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Decision At"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"}),(0,t.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]})})}),(0,t.jsx)("tbody",{children:eF.map(e=>{let a,s={completed:(a=(Array.isArray(e?.workflow?.checklist)?e.workflow.checklist:[]).filter(e=>e?.required!==!1)).filter(e=>"completed"===w(e?.status)).length,total:a.length},r=ea&&eb===e.id;return(0,t.jsx)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:((e,{checklistProgress:a,rowSelected:s})=>{let r,n,i,o,d,c,m,p,x,u=(r=I(e),String(r?.effectiveDate||r?.startDate||"").trim()||""),f=String(e?.owner||"").trim(),h=function(e){let t=Array.isArray(e?.traceability)?e.traceability:[];for(let e=t.length-1;e>=0;e-=1){let a=t[e],s=w(a?.status);if(s.includes("approved")||s.includes("completed")||s.includes("rejected")){let e=String(a?.at||"").trim();if(e)return e}}let a=w(e?.status);return a.includes("approved")||a.includes("completed")||a.includes("rejected")?String(e?.updatedAt||e?.createdAt||"").trim():""}(e),g=(n=I(e),i=String(n?.roleFrom||"").trim(),o=String(n?.roleTo||n?.role||"").trim(),i||o?`${C(i||"-")} -> ${C(o||"-")}`:""),b=(d=I(e),c=String(d?.departmentFrom||"").trim(),m=String(d?.departmentTo||d?.department||"").trim(),c||m?`${c||"-"} -> ${m||"-"}`:""),y=(p=I(e),String(p?.employeeId||p?.employeeNumber||"").trim()||""),j=function(e){if((Array.isArray(e?.lastAutomationEffects)?e.lastAutomationEffects:[]).some(e=>"access-revocation"===w(e?.type)))return String(e?.lastAutomationAt||e?.updatedAt||"").trim();let t=w(e?.status);return t.includes("revoked")||t.includes("terminated")||t.includes("disabled")?String(e?.updatedAt||"").trim():""}(e),E=(x=(Array.isArray(e?.lastAutomationEffects)?e.lastAutomationEffects:[]).find(e=>"archive-policy"===w(e?.type)),String(x?.retentionDeleteAt||e?.retentionDeleteAt||"").trim()||"");return"onboarding"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:eJ(e)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(y)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:v(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(l.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?N(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:N(e.updatedAt||e.createdAt)}),eZ(e,s)]}):"role-changes"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:eJ(e)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(g)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(b)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:v(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(l.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?N(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:N(e.updatedAt||e.createdAt)}),eZ(e,s)]}):"disciplinary-records"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:eJ(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:k(e?.workflow?.stage)}),(0,t.jsxs)("td",{className:"px-2 py-3 text-xs",children:[a.completed,"/",a.total]}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:v(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(l.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?N(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:N(e.updatedAt||e.createdAt)}),eZ(e,s)]}):"offboarding-access-revocation"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:eJ(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:k(e?.workflow?.stage)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(l.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:j?N(j):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:E?N(E):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:N(e.updatedAt||e.createdAt)}),eZ(e,s)]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"px-2 py-3",children:eJ(e)}),(0,t.jsx)("td",{className:"px-2 py-3",children:k(e.category)}),(0,t.jsx)("td",{className:"px-2 py-3",children:k(e?.workflow?.stage)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:v(u)}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:k(f)}),(0,t.jsx)("td",{className:"px-2 py-3",children:(0,t.jsx)(l.default,{value:e.status||"-"})}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs",children:h?N(h):"-"}),(0,t.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:N(e.updatedAt||e.createdAt)}),eZ(e,s)]})})(e,{checklistProgress:s,rowSelected:r})},e.id)})})]})})}),ea?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 p-4",role:"dialog","aria-modal":"true","aria-label":"Workflow Console",onClick:eK,children:(0,t.jsxs)("div",{className:"w-full max-w-5xl rounded-2xl border border-slate-200 bg-white p-4 shadow-2xl sm:p-5",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-slate-900",children:"Workflow Console"}),(0,t.jsx)("p",{className:"mt-0.5 text-sm text-slate-600",children:"Checklist automation, stage control, and lifecycle evidence management"})]}),(0,t.jsx)("button",{type:"button",onClick:eK,disabled:Z,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50 disabled:opacity-60","aria-label":"Close workflow console",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.9",className:"h-4 w-4","aria-hidden":"true",children:(0,t.jsx)("path",{d:"m6 6 12 12M18 6 6 18"})})})]}),(0,t.jsx)(s.default,{children:eI?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:k(eI.employee)}),(0,t.jsx)("p",{className:"text-xs text-slate-600",children:k(eI.employeeEmail)}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[11px] text-slate-600",children:[(0,t.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["Stage: ",k(eI?.workflow?.stage)]}),(0,t.jsxs)("span",{className:"rounded-md border border-slate-200 bg-white px-2 py-1",children:["SLA Due: ",v(eI?.workflow?.slaDueAt)]})]})]}),(0,t.jsx)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Stage Control"}),$?(0,t.jsx)("select",{value:eP,onChange:e=>eY(eI,Number.parseInt(e.target.value,10)||0),disabled:Z,className:"h-8 rounded-md border border-slate-300 bg-white px-2.5 text-xs text-slate-700 focus:border-sky-400 focus:outline-none",children:eM.map((e,a)=>(0,t.jsx)("option",{value:a,children:e},`${e}-${a}`))}):null]})}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Checklist Automation"}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:0===eO.length?(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"No checklist tasks generated yet."}):eO.map(e=>{let a="completed"===w(e?.status);return(0,t.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-slate-800",children:k(e.label)}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-500",children:["Due: ",N(e.dueAt)," | Status: ",k(e.status)]})]}),$?(0,t.jsx)("button",{type:"button",onClick:()=>eG(eI,e,!a),disabled:Z,className:`inline-flex h-7 items-center rounded-md border px-2.5 text-[11px] font-semibold transition disabled:opacity-60 ${a?"border-amber-200 bg-amber-50 text-amber-700 hover:bg-amber-100":"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:a?"Set Pending":"Mark Complete"}):null]})},e.id)})})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-500",children:"Evidence Attachments"}),$?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ev.current?.click(),disabled:Z,className:"inline-flex h-8 items-center rounded-md border border-slate-300 bg-white px-3 text-[11px] font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-60",children:"Upload Evidence"}),(0,t.jsx)("input",{ref:ev,type:"file",className:"hidden",onChange:eW})]}):null]}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:0===eT.length?(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"No evidence files attached."}):eT.map(e=>(0,t.jsx)("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-2.5 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-slate-800",children:k(e.name)}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-500",children:[S(e.sizeBytes)," | ",N(e.uploadedAt)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[String(e.ref||"").trim()?(0,t.jsx)("a",{href:String(e.ref),target:"_blank",rel:"noreferrer",className:"inline-flex h-7 items-center rounded-md border border-sky-200 bg-sky-50 px-2.5 text-[11px] font-semibold text-sky-700 transition hover:bg-sky-100",children:"Open"}):null,$?(0,t.jsx)("button",{type:"button",onClick:()=>ez(eI,e),disabled:Z,className:"inline-flex h-7 items-center rounded-md border border-rose-200 bg-rose-50 px-2.5 text-[11px] font-semibold text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Remove"}):null]})]})},e.id))})]})]}):(0,t.jsx)(r.default,{title:"No workflow selected",subtitle:"Open a lifecycle record from the table to continue."})})]})}):null]})]})}e.s(["default",()=>P])}]);