module.exports=[93575,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(44036),e=a.i(63824),f=a.i(38014),g=a.i(3427),h=a.i(51084),i=a.i(63609);let j=[{id:"library",label:"Templates Library"},{id:"employee-docs",label:"Employee Documents"},{id:"contracts",label:"Contracts & Agreements"},{id:"versions",label:"Version History"},{id:"upload-audit",label:"Upload Audit Logs"}],k={templateName:"",category:"HR Template",documentType:"Template",classification:"Restricted PII",version:"v1.0",status:"Active",tags:"",contentRef:"",changeNote:""};function l(a){let b=new Date(a||"");return Number.isNaN(b.getTime())?"-":new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(b)}function m(a,b){let c=String(a||"").trim();if(c)return c;let d=String(b||"").trim();return d.includes("@")?(0,h.formatNameFromEmail)(d,{fallbackLabel:"-"}):d||"-"}function n(a){let b=String(a||"").trim();return b.includes("@")?b.toLowerCase():""}function o({session:a}){let o=!String(a?.role||"EMPLOYEE_L1").trim().toUpperCase().startsWith("EMPLOYEE_"),[p,q]=(0,c.useState)("library"),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(k),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),H=(0,c.useCallback)(async()=>{A(!0),E("");try{let[a,b]=await Promise.all([i.hrisApi.templates.list(),i.hrisApi.employees.list({page:1,pageSize:200,includeDocuments:!0})]),c=Array.isArray(a.records)?a.records:[];s(c),u(Array.isArray(b.records)?b.records:[]),!v&&c[0]?.id&&w(c[0].id)}catch(a){E(a.message||"Unable to load template repository.")}finally{A(!1)}},[v]);(0,c.useEffect)(()=>{H()},[H]);let I=(0,c.useMemo)(()=>r.find(a=>a.id===v)||null,[r,v]),J=(0,c.useMemo)(()=>{let a=[];return t.forEach(b=>{(b.documents||[]).forEach((c,d)=>{a.push({id:`${b.id}-${d}`,employee:(0,h.formatEmployeeName)({firstName:b.firstName,middleName:b.middleName,lastName:b.lastName,suffix:b.suffix,fallback:b.name,fallbackEmail:b.email,fallbackLabel:"Employee"}),employeeEmail:b.email,name:c.name||"Document",type:c.type||"General",ref:c.ref||"",uploadedAt:c.uploadedAt||b.updatedAt||b.createdAt,uploadedBy:c.uploadedBy||b.updatedBy||"-",uploadedByName:c.uploadedByName||b.updatedByName||"",uploadedByEmail:c.uploadedByEmail||b.updatedByEmail||c.uploadedBy||b.updatedBy||""})})}),a},[t]),K=(0,c.useMemo)(()=>r.filter(a=>{let b=`${a.category||""} ${a.documentType||""}`.toLowerCase();return b.includes("contract")||b.includes("agreement")||b.includes("nda")}),[r]),L=a=>b=>{y(c=>({...c,[a]:b.target.value}))},M=async a=>{if(a.preventDefault(),o){C(!0),E(""),G("");try{var b;await i.hrisApi.templates.create({templateName:x.templateName,category:x.category,documentType:x.documentType,classification:x.classification,version:x.version,status:x.status,tags:(b=x.tags,String(b||"").split(",").map(a=>a.trim()).filter(Boolean)),contentRef:x.contentRef,changeNote:x.changeNote}),y(k),G("Template uploaded and versioned."),await H()}catch(a){E(a.message||"Unable to create template.")}finally{C(!1)}}},N=async(a,b)=>{if(v&&o){C(!0),E(""),G("");try{await i.hrisApi.templates.update(v,a),G(b),await H()}catch(a){E(a.message||"Unable to update template.")}finally{C(!1)}}},O=async a=>{if(a&&o){C(!0),E(""),G("");try{await i.hrisApi.templates.archive(a),G("Template archived."),a===v&&w(""),await H()}catch(a){E(a.message||"Unable to archive template.")}finally{C(!1)}}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.default,{tabs:j,value:p,onChange:q}),D?(0,b.jsx)("p",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:D}):null,F?(0,b.jsx)("p",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:F}):null,o?(0,b.jsx)(d.default,{title:"Upload / Manage Template",subtitle:"Version-controlled templates with tagging and restricted classifications",children:(0,b.jsxs)("form",{className:"grid gap-2 md:grid-cols-3",onSubmit:M,children:[(0,b.jsx)("input",{required:!0,value:x.templateName,onChange:L("templateName"),placeholder:"Template name",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.category,onChange:L("category"),placeholder:"Category",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.documentType,onChange:L("documentType"),placeholder:"Type",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.version,onChange:L("version"),placeholder:"Version",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.tags,onChange:L("tags"),placeholder:"Tags (comma separated)",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.contentRef,onChange:L("contentRef"),placeholder:"File URL / reference",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("input",{value:x.changeNote,onChange:L("changeNote"),placeholder:"Change note",className:"h-9 rounded-lg border border-slate-300 px-3 text-xs text-slate-900 focus:border-sky-400 focus:outline-none"}),(0,b.jsx)("div",{className:"md:col-span-3",children:(0,b.jsx)("button",{type:"submit",disabled:B,className:"inline-flex h-9 items-center justify-center rounded-lg bg-sky-600 px-4 text-xs font-semibold text-white transition hover:bg-sky-700 disabled:opacity-70",children:B?"Saving...":"Upload Template"})})]})}):null,(0,b.jsx)(d.default,{title:"employee-docs"===p?"Employee Documents":"contracts"===p?"Contracts & Agreements":"versions"===p?"Version History":"upload-audit"===p?"Upload Audit Logs":"Templates Library",subtitle:"Permission-based template and document access",children:z?(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Loading template repository..."}):"employee-docs"===p?0===J.length?(0,b.jsx)(e.default,{title:"No employee documents yet",subtitle:"Uploaded employee documents will appear here."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Employee"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Document"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Type"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Uploaded"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Uploaded By"})]})}),(0,b.jsx)("tbody",{children:J.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:[(0,b.jsxs)("td",{className:"px-2 py-3",children:[(0,b.jsx)("p",{className:"font-medium text-slate-900",children:a.employee}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.employeeEmail})]}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.name}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.type}),(0,b.jsx)("td",{className:"px-2 py-3",children:l(a.uploadedAt)}),(0,b.jsxs)("td",{className:"px-2 py-3 text-xs text-slate-600",children:[(0,b.jsx)("p",{className:"font-medium text-slate-800",children:m(a.uploadedByName,a.uploadedBy)}),n(a.uploadedByEmail||a.uploadedBy)?(0,b.jsx)("p",{className:"truncate text-[11px] text-slate-500",children:n(a.uploadedByEmail||a.uploadedBy)}):null]})]},a.id))})]})}):"contracts"===p?0===K.length?(0,b.jsx)(e.default,{title:"No contracts or agreements found",subtitle:"Contract-type templates will appear in this section."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Template"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Category"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Version"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Updated"})]})}),(0,b.jsx)("tbody",{children:K.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-100 text-slate-700 last:border-b-0",children:[(0,b.jsx)("td",{className:"px-2 py-3 font-medium text-slate-900",children:a.templateName||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.category||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.version||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3",children:l(a.updatedAt||a.createdAt)})]},a.id))})]})}):"versions"===p?I?0===(I.versionHistory||[]).length?(0,b.jsx)(e.default,{title:"No historical versions yet",subtitle:"Version changes will be recorded after updates."}):(0,b.jsx)("div",{className:"space-y-2",children:(I.versionHistory||[]).map((a,c)=>(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:a.version||"v1.0"})," changed by"," ",(0,b.jsx)("span",{className:"font-medium",children:m(a.changedByName,a.changedBy)}),n(a.changedByEmail||a.changedBy)?(0,b.jsxs)("span",{className:"text-slate-500",children:[" (",n(a.changedByEmail||a.changedBy),")"]}):null]}),(0,b.jsx)("p",{className:"mt-1 text-slate-500",children:l(a.changedAt)}),(0,b.jsx)("p",{className:"mt-1",children:a.note||"-"})]},`${a.changedAt}-${c}`))}):(0,b.jsx)(e.default,{title:"No template selected",subtitle:"Select a template from the library to inspect version history."}):"upload-audit"===p?I?0===(I.modificationLog||[]).length?(0,b.jsx)(e.default,{title:"No upload logs yet",subtitle:"Template upload and update logs will appear here."}):(0,b.jsx)("div",{className:"space-y-2",children:(I.modificationLog||[]).map((a,c)=>(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:a.action||"update"})," by"," ",(0,b.jsx)("span",{className:"font-medium",children:m(a.byName,a.by)}),n(a.byEmail||a.by)?(0,b.jsxs)("span",{className:"text-slate-500",children:[" (",n(a.byEmail||a.by),")"]}):null," ","| version ",a.version||"-"]}),(0,b.jsx)("p",{className:"mt-1 text-slate-500",children:l(a.at)})]},`${a.at}-${c}`))}):(0,b.jsx)(e.default,{title:"No template selected",subtitle:"Select a template from the library to inspect upload logs."}):0===r.length?(0,b.jsx)(e.default,{title:"No templates yet",subtitle:"Upload template files and metadata to populate the repository."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.1em] text-slate-500",children:[(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Template"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Category"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Version"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Classification"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Tags"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-2 py-3 font-medium text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:r.map(a=>(0,b.jsxs)("tr",{className:`border-b border-slate-100 text-slate-700 last:border-b-0 ${a.id===v?"bg-sky-50/50":""}`,children:[(0,b.jsx)("td",{className:"px-2 py-3 font-medium text-slate-900",children:a.templateName||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.category||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.version||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:a.classification||"-"}),(0,b.jsx)("td",{className:"px-2 py-3 text-xs text-slate-600",children:(a.tags||[]).join(", ")||"-"}),(0,b.jsx)("td",{className:"px-2 py-3",children:(0,b.jsx)(g.default,{value:a.status||"-"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-right",children:(0,b.jsxs)("div",{className:"inline-flex flex-wrap items-center justify-end gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>w(a.id),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1.5 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:"Select"}),o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{type:"button",onClick:()=>N({version:"v1.0"===a.version?"v1.1":a.version,changeNote:"Template metadata update"},"Template version updated."),disabled:B,className:"rounded-lg border border-sky-200 bg-sky-50 px-2.5 py-1.5 text-xs font-medium text-sky-700 transition hover:bg-sky-100 disabled:opacity-60",children:"New Version"}),(0,b.jsx)("button",{type:"button",onClick:()=>O(a.id),disabled:B,className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs font-medium text-rose-700 transition hover:bg-rose-100 disabled:opacity-60",children:"Archive"})]}):null]})})]},a.id))})]})})})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=src_components_hris_modules_DocumentTemplateRepositoryModule_jsx_e0b7f573._.js.map